{"version":3,"file":"zeta-dom-react.min.js","mappings":"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","sources":["webpack://zeta-dom-react/webpack/universalModuleDefinition","webpack://zeta-dom-react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta-dom-react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta-dom-react/webpack/bootstrap","webpack://zeta-dom-react/webpack/runtime/define property getters","webpack://zeta-dom-react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta-dom-react/webpack/runtime/make namespace object","webpack://zeta-dom-react/./tmp/zeta-dom/util.js","webpack://zeta-dom-react/./tmp/zeta-dom/events.js","webpack://zeta-dom-react/./src/hooks.js","webpack://zeta-dom-react/./src/form.js","webpack://zeta-dom-react/./src/util.js","webpack://zeta-dom-react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"zeta-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"react\", \"zeta-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"react\"), require(\"zeta-dom\"));\n\telse\n\t\troot[\"zeta-dom-react\"] = factory(root[\"React\"], root[\"zeta\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__359__, __WEBPACK_EXTERNAL_MODULE__654__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__359__;","module.exports = __WEBPACK_EXTERNAL_MODULE__654__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import zeta from \"zeta-dom\";const { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, arrRemove, setAdd, equal, combineFn, executeOnce, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout } = zeta.util; export { noop, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, pick, exclude, mapGet, mapRemove, arrRemove, setAdd, equal, combineFn, executeOnce, createPrivateStore, setTimeoutOnce, setImmediate, setImmediateOnce, throwNotFunction, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, catchAsync, setPromiseTimeout };","import zeta from \"zeta-dom\";const { EventContainer: ZetaEventContainer } = zeta; export { ZetaEventContainer };","import { useEffect, useState } from \"react\";\r\nimport { always, combineFn, extend, makeArray, resolve, setAdd, watch } from \"./include/zeta-dom/util.js\";\r\n\r\nconst fnWeakMap = new WeakMap();\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const fn = useState(function () {\r\n        return function fn() {\r\n            const cb = fnWeakMap.get(fn);\r\n            return cb && cb.apply(this, arguments);\r\n        };\r\n    })[0];\r\n    fnWeakMap.set(fn, callback);\r\n    return fn;\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const sValue = useState(obj[key]);\r\n    const value = sValue[0], setValue = sValue[1];\r\n    useEffect(function () {\r\n        return watch(obj, key, function (v) {\r\n            setValue(function () {\r\n                return v;\r\n            });\r\n        });\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsyncContent(init, autoload) {\r\n    const state = useState(function () {\r\n        return {\r\n            loading: true,\r\n            refresh: function () {\r\n                extend(state, { loading: true, error: undefined });\r\n                always(resolve().then(init), function (resolved, value) {\r\n                    if (!state.disposed) {\r\n                        if (resolved) {\r\n                            extend(state, { loading: false, value: value });\r\n                        } else {\r\n                            extend(state, { loading: false, value: undefined, error: value });\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    init = useMemoizedFunction(init);\r\n\r\n    useObservableProperty(state, 'loading');\r\n    useEffect(function () {\r\n        return function () {\r\n            state.disposed = true;\r\n        };\r\n    }, [state]);\r\n    useEffect(function () {\r\n        if (autoload !== false) {\r\n            state.refresh();\r\n        }\r\n    }, [state, autoload]);\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n","import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { any, combineFn, createPrivateStore, definePrototype, extend, keys, makeArray, resolveAll, values } from \"./include/zeta-dom/util.js\";\r\nimport { ZetaEventContainer } from \"./include/zeta-dom/events.js\";\r\nimport { useMemoizedFunction } from \"./hooks.js\";\r\n\r\nconst _ = createPrivateStore();\r\n\r\n/** @type {React.Context<import (\"./form\").FormContext>} */\r\n// @ts-ignore: type inference issue\r\nconst _FormContext = createContext(null);\r\n\r\nexport const FormContextProvider = _FormContext.Provider;\r\n\r\nfunction createDataObject(context, eventContainer, initialData) {\r\n    return new Proxy(extend({}, initialData), {\r\n        get: function (t, p) {\r\n            if (typeof p === 'string') {\r\n                return t[p];\r\n            }\r\n        },\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && t[p] !== v) {\r\n                if (p in t) {\r\n                    eventContainer.emitAsync('dataChange', context, [p], {}, function (v, a) {\r\n                        return v.concat(a);\r\n                    });\r\n                }\r\n                t[p] = v;\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n}\r\n\r\nexport function FormContext(initialData, validateOnChange) {\r\n    var self = this;\r\n    var state = _(self, {\r\n        validateCallback: {},\r\n        validateResult: {},\r\n        eventContainer: new ZetaEventContainer(),\r\n        initialData: initialData || {},\r\n    });\r\n    self.isValid = true;\r\n    self.validateOnChange = validateOnChange !== false;\r\n    self.data = createDataObject(self, state.eventContainer, initialData);\r\n    self.on('dataChange', function (e) {\r\n        self.validate.apply(self, e.data);\r\n    });\r\n}\r\n\r\ndefinePrototype(FormContext, {\r\n    on: function (event, handler) {\r\n        var state = _(this);\r\n        return state.eventContainer.add(this, event, handler);\r\n    },\r\n    reset: function () {\r\n        var self = this;\r\n        var state = _(self);\r\n        for (var i in self.data) {\r\n            delete self.data[i];\r\n        }\r\n        extend(self.data, state.initialData);\r\n        self.isValid = true;\r\n        state.eventContainer.emit('reset', self);\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var state = _(self);\r\n        var validateResult = state.validateResult;\r\n        var eventContainer = state.eventContainer;\r\n        var props = makeArray(arguments);\r\n        if (!props.length) {\r\n            props = keys(state.validateCallback);\r\n        }\r\n        var prev = extend({}, validateResult);\r\n        var promise = resolveAll(props.map(function (v) {\r\n            return eventContainer.emit('validate', self, {\r\n                name: v,\r\n                value: self.data[v]\r\n            });\r\n        }));\r\n        return promise.then(function (result) {\r\n            props.forEach(function (v, i) {\r\n                validateResult[v] = result[i];\r\n                if ((result[i] || '') !== (prev[v] || '')) {\r\n                    eventContainer.emit('validationChange', self, {\r\n                        name: v,\r\n                        isValid: !!result[i],\r\n                        message: result[i] || ''\r\n                    });\r\n                }\r\n            });\r\n            self.isValid = !any(values(validateResult), function (v) {\r\n                return v;\r\n            });\r\n            return !any(result, function (v) {\r\n                return v;\r\n            });\r\n        });\r\n    }\r\n});\r\n\r\nexport function useFormContext(initialData, validateOnChange) {\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, validateOnChange);\r\n    })[0];\r\n    const forceUpdate = useState(0)[1];\r\n    useEffect(function () {\r\n        return form.on('dataChange', function () {\r\n            forceUpdate(function (v) {\r\n                return ++v;\r\n            });\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormFieldHooks(props, defaultValue, prop) {\r\n    const form = useContext(_FormContext);\r\n    const key = props.name || '';\r\n    const initialValue = useState(function () {\r\n        return (form && form.data[key]) || defaultValue;\r\n    })[0];\r\n    const sValue = useState(initialValue);\r\n    const sError = useState('');\r\n    const onValidate = useMemoizedFunction(props.onValidate);\r\n    const value = sValue[0], setValue = sValue[1];\r\n    const error = sError[0], setError = sError[1];\r\n\r\n    var setValueCallback = useMemoizedFunction(function (v) {\r\n        if (!props.onChange) {\r\n            console.warn('onChange not supplied');\r\n        } else {\r\n            props.onChange(typeof v === 'function' ? v(value) : v);\r\n        }\r\n    });\r\n\r\n    // put internal states on props for un-controlled mode\r\n    if (!(prop in props)) {\r\n        setValueCallback = setValue;\r\n        props = extend({}, props);\r\n        props[prop] = value;\r\n        props.error = error;\r\n    }\r\n\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            if (key in form.data) {\r\n                setValue(form.data[key]);\r\n            }\r\n            return combineFn(\r\n                form.on('validationChange', function (e) {\r\n                    if (e.name === key) {\r\n                        setError(e.message);\r\n                    }\r\n                }),\r\n                form.on('validate', function (e) {\r\n                    if (e.name === key) {\r\n                        return onValidate(e.value, e.name);\r\n                    }\r\n                }),\r\n                form.on('reset', function () {\r\n                    setValue(initialValue);\r\n                    setError('');\r\n                })\r\n            );\r\n        }\r\n    }, [form, key, initialValue, onValidate]);\r\n\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            form.data[key] = value;\r\n        }\r\n    }, [form, key, value]);\r\n\r\n    return {\r\n        value: props[prop],\r\n        error: props.error || '',\r\n        setValue: setValueCallback,\r\n        setError: setError,\r\n    };\r\n}\r\n","import { each, makeArray } from \"./include/zeta-dom/util.js\";\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n","import * as all from \"./index.js\";\r\nexport default all;\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__359__","__WEBPACK_EXTERNAL_MODULE__654__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","zeta","makeArray","noop","either","is","isUndefinedOrNull","isArray","isFunction","isThenable","isPlainObject","isArrayLike","extend","each","any","map","grep","splice","setAdd","single","kv","pick","exclude","mapGet","mapRemove","arrRemove","combineFn","equal","createPrivateStore","executeOnce","keys","setTimeoutOnce","setImmediate","setImmediateOnce","throwNotFunction","values","definePrototype","getOwnPropertyDescriptors","watch","defineOwnProperty","defineGetterProperty","defineHiddenProperty","defineAliasProperty","defineObservableProperty","resolve","watchOnce","watchable","inherit","deepFreeze","iequal","randomId","repeat","camel","hyphenate","ucfirst","lcfirst","trim","matchWord","htmlDecode","always","reject","resolveAll","ZetaEventContainer","catchAsync","setPromiseTimeout","fnWeakMap","WeakMap","useMemoizedFunction","callback","fn","useState","cb","apply","this","arguments","set","useObservableProperty","sValue","setValue","useEffect","v","useAsyncContent","init","autoload","state","loading","refresh","error","then","resolved","disposed","useRefInitCallback","args","WeakSet","useDispose","dispose","callbacks","length","push","bind","_","_FormContext","createContext","FormContextProvider","Provider","FormContext","initialData","validateOnChange","validateCallback","validateResult","eventContainer","isValid","data","context","Proxy","t","p","emitAsync","a","concat","createDataObject","on","e","validate","useFormContext","form","forceUpdate","useFormFieldHooks","props","defaultValue","useContext","name","initialValue","sError","onValidate","setError","setValueCallback","onChange","console","warn","message","classNames","className","process","j","getClassNames","i","join","event","handler","add","reset","emit","prev","promise","result","forEach"],"sourceRoot":""}