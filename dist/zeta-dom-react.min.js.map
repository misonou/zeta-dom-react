{"version":3,"file":"zeta-dom-react.min.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/react.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__33__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"@misonou/hoist/react\";\r\nconst { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } = lib;\r\nexport { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { useCallback, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, defineObservableProperty, defineOwnProperty, delay, each, extend, fill, freeze, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, makeArray, makeAsync, map, mapRemove, noop, pipe, resolve, sameValueZero, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst _ = /*#__PURE__*/ createPrivateStore();\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\nconst sameValue = Object.is || function (a, b) {\r\n    return sameValueZero(a, b) && (a !== 0 || 1 / a === 1 / b);\r\n};\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (clearUnusedSingletons.d & (v.d || 1)) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i)(i, v.d === 2);\r\n        }\r\n    });\r\n    clearUnusedSingletons.d = 0;\r\n}\r\n\r\nfunction useSingletonEffectImpl(factory, dispose, deps) {\r\n    var target = useMemo(factory, deps);\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose(target, true);\r\n        };\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction useSingletonEffectImplDev(factory, dispose, deps) {\r\n    var target = useMemo(function () {\r\n        var target = factory();\r\n        if (!singletons.has(target)) {\r\n            singletons.set(target, dispose);\r\n            clearUnusedSingletons.d = 0;\r\n            clearImmediateOnce(clearUnusedSingletons);\r\n        }\r\n        return target;\r\n    }, deps);\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = flag ? 4 : 2;\r\n            clearUnusedSingletons.d |= flag ? 1 : 2;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nexport function useAutoSetRef(value) {\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    return ref;\r\n}\r\n\r\nexport function useEagerReducer(reducer, init) {\r\n    var state = useState(function () {\r\n        var value = isFunction(init) ? init() : init;\r\n        var fn = function (newValue) {\r\n            newValue = reducer(value, newValue);\r\n            if (!sameValue(newValue, value)) {\r\n                value = newValue;\r\n                state[1]([value, fn]);\r\n            }\r\n        };\r\n        return [value, fn];\r\n    });\r\n    return state[0];\r\n}\r\n\r\nexport function useEagerState(init) {\r\n    return useEagerReducer(function (prevState, state) {\r\n        return isFunction(state) ? state(prevState) : state;\r\n    }, init);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    return useReducer(function () {\r\n        return {};\r\n    })[1];\r\n}\r\n\r\nexport function useValueTrigger(value, comparer) {\r\n    var state = useEagerReducer(function (ref, value) {\r\n        return (comparer || sameValue)(ref.current, value) ? ref : { current: value };\r\n    }, {});\r\n    state[0].current = value;\r\n    return state[1];\r\n}\r\n\r\nexport function useEventTrigger(obj, event, selector, initialState) {\r\n    const state = useEagerState(initialState);\r\n    useEffect(function () {\r\n        var callback = function (e) {\r\n            state[1](selector ? selector.bind(this, e) : {});\r\n        };\r\n        return obj.addEventListener ? bind(obj, event, callback) : obj.on(fill(event, callback));\r\n    }, [obj, event]);\r\n    return selector ? state[0] : undefined;\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useAutoSetRef(callback);\r\n    return useCallback(function () {\r\n        return (isFunction(ref.current) || noop).apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const value = obj[key];\r\n    const notifyChange = useValueTrigger(value);\r\n    useEffect(function () {\r\n        notifyChange(obj[key]);\r\n        return watch(obj, key, notifyChange);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const state = useSingleton(function () {\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function (force) {\r\n                if (debounce && !force) {\r\n                    nextResult = nextResult || deferrable();\r\n                    nextResult.waitFor(delay(debounce));\r\n                    return nextResult.d || (nextResult.d = muteRejection(nextResult.then(function () {\r\n                        nextResult = null;\r\n                        return state.refresh(true);\r\n                    })));\r\n                }\r\n                var controller = AbortController ? new AbortController() : { abort: noop };\r\n                if (currentController) {\r\n                    currentController.abort();\r\n                }\r\n                extend(state, { loading: true, error: undefined });\r\n                var result = makeAsync(init)(controller.signal);\r\n                var promise = always(result, function (resolved, value) {\r\n                    if (currentController === controller) {\r\n                        currentController = null;\r\n                        if (resolved) {\r\n                            extend(state, { loading: false, value: value });\r\n                            container.emit('load', state, { data: value });\r\n                        } else {\r\n                            extend(state, { loading: false, value: undefined, error: value });\r\n                            if (!container.emit('error', state, { error: value })) {\r\n                                throw value;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                currentController = controller;\r\n                notifyAsync(element || dom.root, promise);\r\n                return result;\r\n            },\r\n            abort: function (reason) {\r\n                if (currentController) {\r\n                    currentController.abort(reason);\r\n                    currentController = null;\r\n                }\r\n                state.loading = false;\r\n            }\r\n        };\r\n    }, function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            setImmediateOnce(state.refresh);\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    useObservableProperty(state, 'loading');\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, onDispose) {\r\n    var dispose = function (target) {\r\n        (onDispose || target.dispose || noop).call(target);\r\n    };\r\n    return isFunction(factory) ? useSingletonEffect(factory, dispose, []) : useSingletonEffect(pipe.bind(0, factory), dispose, [factory]);\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const reemitting = useRef(false);\r\n    const ref = useRef(null);\r\n    const args = makeArray(arguments);\r\n    const handler = useState(function () {\r\n        return {\r\n            ref: function (element) {\r\n                ref.current = element;\r\n                init(element);\r\n            },\r\n            emit: function (error) {\r\n                return catchError(error) || reemitError(error) || resolve();\r\n            },\r\n            catch: function (filter, callback) {\r\n                var isErrorOf;\r\n                if (!callback) {\r\n                    callback = filter;\r\n                } else if (!isArray(filter)) {\r\n                    isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n                } else {\r\n                    isErrorOf = function (error, filter) {\r\n                        return any(filter, function (filter) {\r\n                            return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                        });\r\n                    };\r\n                }\r\n                return container.add(handler, isErrorOf ? 'error' : 'default', function (e) {\r\n                    if ((isErrorOf || pipe)(e.error, filter)) {\r\n                        return callback(e.error);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    const reemitError = useCallback(function (error) {\r\n        try {\r\n            reemitting.current = true;\r\n            return reportError(error, ref.current);\r\n        } finally {\r\n            reemitting.current = false;\r\n        }\r\n    }, []);\r\n    const catchError = useCallback(function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    }, []);\r\n    const init = useRefInitCallback(function (element) {\r\n        dom.on(element, 'error', function (e) {\r\n            if (!reemitting.current) {\r\n                return catchError(e.error);\r\n            }\r\n        });\r\n    });\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(pipe.bind(0, callback), function (target, used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    }, []);\r\n}\r\n\r\nexport function createDependency(defaultValue) {\r\n    var Provider = freeze({});\r\n    var dependency = { Provider };\r\n    var values = _(dependency, extend([], dependency));\r\n    defineObservableProperty(values, 'current', defaultValue, function () {\r\n        return values[0] ? values[0].value : defaultValue;\r\n    });\r\n    _(Provider, values);\r\n    return freeze(dependency);\r\n}\r\n\r\nexport function useDependency(dependency, value, deps) {\r\n    var values = _(dependency);\r\n    if (dependency === values.Provider) {\r\n        var wrapper = useMemo(function () {\r\n            return {};\r\n        }, [values]);\r\n        if (values.indexOf(wrapper) < 0) {\r\n            values.push(wrapper);\r\n        }\r\n        useSingleton(wrapper, function () {\r\n            arrRemove(values, wrapper);\r\n            values.current = null;\r\n        });\r\n        useMemo(function () {\r\n            value = isFunction(value) ? value() : value;\r\n            if (wrapper.value !== value || !hasOwnProperty(wrapper, 'value')) {\r\n                defineOwnProperty(wrapper, 'value', value, true);\r\n                values.current = null;\r\n            }\r\n        }, [wrapper].concat(deps || [value]));\r\n        return wrapper;\r\n    } else {\r\n        return useObservableProperty(values, 'current');\r\n    }\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { combineFn, defineObservableProperty, hasOwnProperty, makeArray, map, single, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useEventTrigger, useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    useEventTrigger(mq, 'change');\r\n    return mq.matches;\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    var handleChanges = watch(values, true);\r\n    var updateAll = combineFn(map(breakpoints, function (v, i) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            if (mq.matches !== values[i]) {\r\n                handleChanges(updateAll);\r\n            }\r\n        });\r\n        return function () {\r\n            return setValue(mq.matches);\r\n        };\r\n    }));\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var deps = makeArray(arguments);\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, function (e) {\r\n                    if (!deps.length || single(deps, hasOwnProperty.bind(0, e.newValues))) {\r\n                        forceUpdate();\r\n                    }\r\n                });\r\n            }, deps);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\nconst noopStorage = Object.freeze({\r\n    get: noop,\r\n    set: noop\r\n});\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton((provider && key && provider.getState(uniqueId, key)) || noopStorage);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    state.callback = watch(filters, false);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    get hasPreviousPage() {\r\n        return this.pageIndex > 0;\r\n    },\r\n    get hasNextPage() {\r\n        return this.pageIndex < this.pageCount - 1;\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        values = values || state.defaults;\r\n        state.callback(function () {\r\n            extend(self.filters, values.filters);\r\n        });\r\n        return extend(self, values);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, single, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (current) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(current[key], current) : value);\r\n            }\r\n            return single(key, function (v, i) {\r\n                return v !== current[i] && extend({}, current, key);\r\n            }) || current;\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return useMemo(function () {\r\n        return (items || []).map(function (v) {\r\n            return typeof v === 'object' ? v : { label: String(v), value: v };\r\n        });\r\n    }, [items]);\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props) {\r\n        var items = normalizeChoiceItems(props.items);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        useEffect(() => {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { useMemo, useEffect } from \"react\";\r\nimport { define, definePrototype, extend, isFunction } from \"zeta-dom/util\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\n\r\nconst re = /^-?\\d{4,}-\\d{2}-\\d{2}$/;\r\n\r\n// method mapping for relative date units\r\nconst units = {\r\n    y: ['getFullYear', 'setFullYear'],\r\n    m: ['getMonth', 'setMonth'],\r\n    d: ['getDate', 'setDate']\r\n};\r\nunits.w = units.d;\r\n\r\nfunction parseRelativeDate(str) {\r\n    var date = new Date();\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    str.toLowerCase().replace(/([+-]?)(\\d+)([dwmy])/g, function (v, a, b, c) {\r\n        date[units[c][1]](date[units[c][0]]() + (b * (a === '-' ? -1 : a === '+' ? 1 : dir) * (c === 'w' ? 7 : 1)));\r\n    });\r\n    return date;\r\n}\r\n\r\nfunction normalizeDate(date) {\r\n    if (typeof date === 'string') {\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        date = date[0] === '+' || date[0] === '-' ? parseRelativeDate(date) : Date.parse(date);\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    if (!isNaN(date)) {\r\n        // counter UTC conversion due to toISOString\r\n        var tz = new Date(date).getTimezoneOffset() * 60000;\r\n        var str = new Date(date - tz).toISOString();\r\n        return str.slice(0, str.indexOf('T', 10));\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value));\r\n    },\r\n    postHook: function (state, props) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = normalizeDate(props.min);\r\n        var max = normalizeDate(props.max);\r\n        var displayText = useMemo(function () {\r\n            return value && props.formatDisplay ? props.formatDisplay(toDateObject(value)) : value;\r\n        }, [value]);\r\n        useEffect(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: useMemoizedFunction(function (v) {\r\n                v = isFunction(v) ? v(state.value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\nimport { definePrototype, either, extend, freeze, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = ChoiceField.normalizeItems(props.items);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = useMemoizedFunction(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        var value = useMemo(function () {\r\n            return makeArray(state.value);\r\n        }, [state.version]);\r\n        useEffect(() => {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            value: value,\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { useEffect } from \"react\";\r\nimport { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        useEffect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { useCallback } from \"react\";\r\nimport { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state) {\r\n        const toggleValue = useCallback(function () {\r\n            state.setValue(function (v) {\r\n                return !v;\r\n            });\r\n        }, []);\r\n        return extend(state, {\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useRef, useState } from \"react\";\r\nimport { always, any, createPrivateStore, define, defineObservableProperty, definePrototype, each, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst presets = new WeakMap();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction isEmpty(field, value) {\r\n    var fn = field.props.isEmpty || field.preset.isEmpty;\r\n    return fn ? fn(value) : isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && isEmpty(field, field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = [name];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path).parent === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(state.fields, function (v) {\r\n            return props[v.path];\r\n        });\r\n        emitter.emit('dataChange', form, keys(props));\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                field.value = target[p];\r\n                if (!sameValueZero(field.value, target[p])) {\r\n                    setValue(p, field.value);\r\n                    return;\r\n                }\r\n                handleDataChange.d.add(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            if (context !== rootForm) {\r\n                mapGet(changedProps, context, Object)[path] = true;\r\n                setImmediateOnce(emitDataChangeEvent);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').context !== context) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    setValue(p, v);\r\n                    onChange(p, state.fields[uniqueId + '.' + p]);\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        context,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    for (var i in initialData) {\r\n        setValue(i, initialData[i]);\r\n    }\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        value: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (!field.controlled) {\r\n                field.version++;\r\n            }\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (!field.controlled) {\r\n                field.value = v;\r\n            } else if (!sameValueZero(v, field.value)) {\r\n                field.onChange(v);\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.key ? field.form : null, [field]);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'value', initialValue, function (newValue, oldValue) {\r\n        newValue = (field.preset.normalizeValue || pipe)(newValue, field.props);\r\n        if (newValue !== oldValue && _(oldValue) && newValue !== field.dict[field.name]) {\r\n            field.dict[field.name] = newValue;\r\n            return oldValue;\r\n        }\r\n        return newValue;\r\n    });\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'value', function (v) {\r\n        field.version++;\r\n        if (field.key) {\r\n            field.dict[field.name] = v;\r\n        } else if (!field.controlled) {\r\n            field.onChange(v);\r\n        }\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        if (field.key) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(form, state, field, preset, props, controlled, dict, key) {\r\n    var hasErrorProp = 'error' in props;\r\n    var prevKey = field.key || key;\r\n    extend(field, { form, props, preset, controlled, dict, key });\r\n    if (form && key) {\r\n        field.name = key.slice(9);\r\n        field.path = getPath(form, dict, field.name);\r\n        if (prevKey !== key) {\r\n            field.locks = [];\r\n            if (!hasErrorProp) {\r\n                field.error = '';\r\n            }\r\n        }\r\n        state.fields[key] = field;\r\n    } else {\r\n        field.path = '';\r\n    }\r\n    if (hasErrorProp) {\r\n        field.error = props.error;\r\n    }\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            state.fields[key] = field;\r\n        }\r\n        return function () {\r\n            if (state && state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount || field.form === rootForm) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[key.slice(9)];\r\n                        }\r\n                    });\r\n                }\r\n                state.setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var result = emitter.emit('validate', form, { name, value });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        var state = _(form);\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(this).fields, function (v) {\r\n                return (v.error && (key & 1)) || (isEmpty(v, v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = this.element(key);\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        data = data || state.initialData;\r\n        for (var i in data) {\r\n            dict.set(i, data[i]);\r\n        }\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix.length) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    }\r\n    if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const preset = type ? mapGet(presets, type, type) : {};\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    const dict = useContext(FormObjectContext);\r\n    const form = dict && _(dict).context;\r\n    const state = form && _(form);\r\n    const name = props.name || '';\r\n    const key = form && name && (keyFor(dict) + '.' + name);\r\n    const controlled = prop in props;\r\n\r\n    const field = useState(function () {\r\n        var initialValue = controlled ? props[prop] : (preset.normalizeValue || pipe)(defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n        return createFieldState(initialValue);\r\n    })[0];\r\n    useFormFieldInternal(form, state, field, preset, props, controlled, dict, key);\r\n    if (controlled) {\r\n        field.value = props[prop];\r\n    }\r\n    if (form && key) {\r\n        if (!(name in dict)) {\r\n            if (isEmpty(field, field.initialValue)) {\r\n                field.value = _(dict).set(name, field.initialValue);\r\n            } else {\r\n                dict[name] = field.initialValue;\r\n            }\r\n            field.version = 0;\r\n        } else if (!controlled) {\r\n            field.value = dict[name];\r\n        }\r\n    }\r\n    useObservableProperty(field, 'error');\r\n    useObservableProperty(field, 'version');\r\n    return (preset.postHook || pipe)({\r\n        form: form,\r\n        key: key,\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        version: field.version,\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        validate: field.validate,\r\n        elementRef: field.elementRef\r\n    }, props);\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var form = _(dict).context;\r\n    var state = _(form);\r\n    var value = props.value;\r\n    if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else if (!(_(value) || '').context) {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var key = state.paths[keyFor(value)];\r\n    if (typeof (state.fields[key] || '').controlled !== 'boolean') {\r\n        var field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(form, state, field, {}, props, 0, dict, key);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__231__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__33__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_lib$util","lib","always","any","arrRemove","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","deferrable","defineGetterProperty","defineObservableProperty","defineOwnProperty","definePrototype","delay","each","either","exclude","extend","fill","freeze","grep","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","Fragment","StrictMode","Suspense","createContext","createElement","forwardRef","lazy","useCallback","useContext","useEffect","useMemo","useReducer","useRef","useState","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","extraRender","ReactDOM","TestComponent","container","document","element","render","IS_DEV","_","ZetaEventContainer","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AbortController","window","useSingletonEffect","dispose","deps","target","has","set","clearUnusedSingletons","cb","flag","add","sameValue","a","b","i","v","useAutoSetRef","ref","current","useEagerReducer","reducer","init","state","fn","newValue","useEagerState","prevState","useUpdateTrigger","useValueTrigger","comparer","useEventTrigger","event","selector","initialState","callback","e","this","addEventListener","on","useMemoizedFunction","apply","arguments","useObservableProperty","notifyChange","useAsync","debounce","useSingleton","currentController","nextResult","loading","error","elementRef","handler","onError","refresh","force","waitFor","promise","muteRejection","then","controller","abort","result","signal","resolved","emit","data","reason","concat","useRefInitCallback","args","useDispose","callbacks","length","push","isSingletonDisposed","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","catchError","reemitError","catch","filter","isErrorOf","useUnloadEffect","used","createDependency","defaultValue","Provider","dependency","values","useDependency","wrapper","indexOf","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","handleChanges","updateAll","setValue","useBreakpoint","forceUpdate","newValues","persisted","ViewStateProviderContext","noopStorage","ViewStateProvider","useViewState","uniqueId","provider","getState","proto","DataView","emitter","compare","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","sorted","filtered","useDataView","persistKey","viewState","reset","toJSON","onPopState","hasPreviousPage","hasNextPage","pageCount","getView","sort","filteredItems","slice","item","dir","toggleSort","max","min","oldValue","boundEvents","WeakMap","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","children","partial","setState","combineRef","toRefCallback","withSuspense","fallback","Component","props","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","postHook","selectedIndex","findIndex","allowUnselect","selectedItem","re","units","m","normalizeDate","date","test","Date","parse","str","toLowerCase","replace","c","parseRelativeDate","setHours","clampValue","ts","toDateObject","isNaN","toDateString","tz","getTimezoneOffset","toISOString","DateField","MultiChoiceField","NumericField","TextField","ToggleField","w","normalizeValue","displayText","formatDisplay","clamped","allowCustomValues","isUnknown","some","toggleValue","selected","version","cur","step","allowEmpty","rounded","round","form","inputProps","type","autoComplete","enterKeyHint","valueProperty","isEmpty","presets","instances","changedProps","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","field","preset","hasImplicitError","required","cloneValue","keyFor","resolvePathInfo","path","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","updatedFields","validateFields","validateOnChange","unlock","getEventSource","Promise","handleDataChange","local","onChange","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","delete","createFieldState","initialValue","controlled","setError","isValid","validate","dict","toString","formatError","wrapErrorResult","useFormFieldInternal","hasErrorProp","prevKey","locks","clearWhenUnmount","setValid","disabled","onValidate","promises","next","shift","forEach","formPersist","options","autoPersist","normalizeOptions","useFormContext","dataChange","useFormField","combineValidators","validators","reduce","registerFieldType","ERROR_FIELD","EMPTY_FIELD","persist","restore","clear","getValue","getErrors","errorFields","getError","prefix","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}