{"version":3,"file":"zeta-dom-react.min.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":[\"React\"]}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":[\"ReactDOM\"]}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__311__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__311__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, definePrototype, delay, each, either, exclude, extend, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, definePrototype, delay, each, either, exclude, extend, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, catchAsync, clearImmediateOnce, combineFn, deferrable, delay, each, extend, is, isArray, isErrorWithCode, isFunction, makeArray, makeAsync, map, mapRemove, noop, pipe, resolve, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (!v.d) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i)(v.d === false);\r\n        }\r\n    });\r\n}\r\n\r\nfunction useSingletonEffectImpl(target, dispose) {\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose(true);\r\n        };\r\n    }, [target]);\r\n}\r\n\r\nfunction useSingletonEffectImplDev(target, dispose) {\r\n    if (!singletons.has(target)) {\r\n        singletons.set(target, dispose);\r\n        clearImmediateOnce(clearUnusedSingletons);\r\n    }\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = !!flag;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    const setState = useState()[1];\r\n    return useCallback(function () {\r\n        setState({});\r\n    }, []);\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useRef();\r\n    ref.current = isFunction(callback) || noop;\r\n    return useCallback(function () {\r\n        return ref.current.apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const forceUpdate = useUpdateTrigger();\r\n    const value = obj[key];\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    useEffect(function () {\r\n        var cb = function (v) {\r\n            if (v !== ref.current) {\r\n                forceUpdate();\r\n            }\r\n        };\r\n        cb(obj[key]);\r\n        return watch(obj, key, cb);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const state = useSingleton(function () {\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function (force) {\r\n                if (debounce && !force) {\r\n                    nextResult = nextResult || deferrable();\r\n                    nextResult.waitFor(delay(debounce));\r\n                    return nextResult.d || (nextResult.d = muteRejection(nextResult.then(function () {\r\n                        nextResult = null;\r\n                        return state.refresh(true);\r\n                    })));\r\n                }\r\n                var controller = AbortController ? new AbortController() : { abort: noop };\r\n                if (currentController) {\r\n                    currentController.abort();\r\n                }\r\n                extend(state, { loading: true, error: undefined });\r\n                var result = makeAsync(init)(controller.signal);\r\n                var promise = always(result, function (resolved, value) {\r\n                    if (currentController === controller) {\r\n                        if (resolved) {\r\n                            extend(state, { loading: false, value: value });\r\n                            container.emit('load', state, { data: value });\r\n                        } else {\r\n                            extend(state, { loading: false, value: undefined, error: value });\r\n                            if (!container.emit('error', state, { error: value })) {\r\n                                throw value;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                currentController = controller;\r\n                notifyAsync(element || dom.root, promise);\r\n                return result;\r\n            },\r\n            abort: function (reason) {\r\n                if (currentController) {\r\n                    currentController.abort(reason);\r\n                    currentController = null;\r\n                }\r\n                state.loading = false;\r\n            }\r\n        };\r\n    }, function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            setImmediateOnce(state.refresh);\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    useObservableProperty(state, 'loading');\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, onDispose) {\r\n    const target = isFunction(factory) ? useMemo(factory, []) : useMemo(pipe.bind(0, factory), [factory]);\r\n    useSingletonEffect(target, function () {\r\n        (onDispose || target.dispose || noop).call(target);\r\n    });\r\n    return target;\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const reemitting = useRef(false);\r\n    const ref = useRef(null);\r\n    const args = makeArray(arguments);\r\n    const handler = useState(function () {\r\n        return {\r\n            ref: function (element) {\r\n                ref.current = element;\r\n                init(element);\r\n            },\r\n            emit: function (error) {\r\n                return catchError(error) || reemitError(error) || resolve();\r\n            },\r\n            catch: function (filter, callback) {\r\n                var isErrorOf;\r\n                if (!callback) {\r\n                    callback = filter;\r\n                } else if (!isArray(filter)) {\r\n                    isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n                } else {\r\n                    isErrorOf = function (error, filter) {\r\n                        return any(filter, function (filter) {\r\n                            return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                        });\r\n                    };\r\n                }\r\n                return container.add(handler, isErrorOf ? 'error' : 'default', function (e) {\r\n                    if ((isErrorOf || pipe)(e.error, filter)) {\r\n                        return callback(e.error);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    const reemitError = useCallback(function (error) {\r\n        try {\r\n            reemitting.current = true;\r\n            return reportError(error, ref.current);\r\n        } finally {\r\n            reemitting.current = false;\r\n        }\r\n    }, []);\r\n    const catchError = useCallback(function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    }, []);\r\n    const init = useRefInitCallback(function (element) {\r\n        dom.on(element, 'error', function (e) {\r\n            if (!reemitting.current) {\r\n                return catchError(e.error);\r\n            }\r\n        });\r\n    });\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(callback, function (used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    });\r\n}\r\n","import { useEffect, useMemo, useState } from \"react\";\r\nimport { defineObservableProperty, each, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    var state = useState(mq.matches);\r\n    useEffect(function () {\r\n        return bind(mq, 'change', function () {\r\n            state[1](mq.matches);\r\n        });\r\n    }, [mq]);\r\n    return state[0];\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    watch(values, true);\r\n    each(breakpoints, function (i, v) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            setValue(mq.matches);\r\n        });\r\n    });\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, forceUpdate);\r\n            }, []);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\nconst noopStorage = Object.freeze({\r\n    get: noop,\r\n    set: noop\r\n});\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton((provider && key && provider.getState(uniqueId, key)) || noopStorage);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    state.callback = watch(filters, false);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        values = values || state.defaults;\r\n        state.callback(function () {\r\n            extend(self.filters, values.filters);\r\n        });\r\n        return extend(self, values);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (v) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(v[key], v) : value);\r\n            }\r\n            return extend({}, v, key);\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return useMemo(function () {\r\n        return (items || []).map(function (v) {\r\n            return typeof v === 'object' ? v : { label: String(v), value: v };\r\n        });\r\n    }, [items]);\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props) {\r\n        var items = normalizeChoiceItems(props.items);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        useEffect(() => {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { useMemo, useEffect } from \"react\";\r\nimport { define, definePrototype, extend, isFunction } from \"zeta-dom/util\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\n\r\nconst re = /^-?\\d{4,}-\\d{2}-\\d{2}$/;\r\n\r\n// method mapping for relative date units\r\nconst units = {\r\n    y: ['getFullYear', 'setFullYear'],\r\n    m: ['getMonth', 'setMonth'],\r\n    d: ['getDate', 'setDate']\r\n};\r\nunits.w = units.d;\r\n\r\nfunction parseRelativeDate(str) {\r\n    var date = new Date();\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    str.toLowerCase().replace(/([+-]?)(\\d+)([dwmy])/g, function (v, a, b, c) {\r\n        date[units[c][1]](date[units[c][0]]() + (b * (a === '-' ? -1 : a === '+' ? 1 : dir) * (c === 'w' ? 7 : 1)));\r\n    });\r\n    return date;\r\n}\r\n\r\nfunction normalizeDate(date) {\r\n    if (typeof date === 'string') {\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        date = date[0] === '+' || date[0] === '-' ? parseRelativeDate(date) : Date.parse(date);\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    if (!isNaN(date)) {\r\n        // counter UTC conversion due to toISOString\r\n        var tz = new Date(date).getTimezoneOffset() * 60000;\r\n        var str = new Date(date - tz).toISOString();\r\n        return str.slice(0, str.indexOf('T', 10));\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value));\r\n    },\r\n    postHook: function (state, props) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = normalizeDate(props.min);\r\n        var max = normalizeDate(props.max);\r\n        var displayText = useMemo(function () {\r\n            return value && props.formatDisplay ? props.formatDisplay(toDateObject(value)) : value;\r\n        }, [value]);\r\n        useEffect(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: useMemoizedFunction(function (v) {\r\n                v = isFunction(v) ? v(state.value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { useEffect } from \"react\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\nimport { definePrototype, either, extend, freeze, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = ChoiceField.normalizeItems(props.items);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = useMemoizedFunction(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        useEffect(() => {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(state.value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { useEffect } from \"react\";\r\nimport { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        useEffect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { useCallback } from \"react\";\r\nimport { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state) {\r\n        const toggleValue = useCallback(function () {\r\n            state.setValue(function (v) {\r\n                return !v;\r\n            });\r\n        }, []);\r\n        return extend(state, {\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useRef, useState } from \"react\";\r\nimport { always, any, createPrivateStore, define, defineObservableProperty, definePrototype, each, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst presets = new WeakMap();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction isEmpty(field, value) {\r\n    var fn = field.props.isEmpty || field.preset.isEmpty;\r\n    return fn ? fn(value) : isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && isEmpty(field, field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = [name];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path).parent === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(state.fields, function (v) {\r\n            return props[v.path];\r\n        });\r\n        emitter.emit('dataChange', form, keys(props));\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                field.value = target[p];\r\n                if (!sameValueZero(field.value, target[p])) {\r\n                    setValue(p, field.value);\r\n                    return;\r\n                }\r\n                handleDataChange.d.add(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            if (context !== rootForm) {\r\n                mapGet(changedProps, context, Object)[path] = true;\r\n                setImmediateOnce(emitDataChangeEvent);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').context !== context) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    setValue(p, v);\r\n                    onChange(p, state.fields[uniqueId + '.' + p]);\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        context,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    each(initialData, function (i, v) {\r\n        setValue(i, v);\r\n    });\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        value: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (!field.controlled) {\r\n                field.version++;\r\n            }\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (!field.controlled) {\r\n                field.value = v;\r\n            } else if (!sameValueZero(v, field.value)) {\r\n                field.onChange(v);\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.key ? field.form : null, [field]);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'value', initialValue, function (newValue, oldValue) {\r\n        newValue = (field.preset.normalizeValue || pipe)(newValue, field.props);\r\n        if (newValue !== oldValue && _(oldValue) && newValue !== field.dict[field.name]) {\r\n            field.dict[field.name] = newValue;\r\n            return oldValue;\r\n        }\r\n        return newValue;\r\n    });\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'value', function (v) {\r\n        field.version++;\r\n        if (field.key) {\r\n            field.dict[field.name] = v;\r\n        } else if (!field.controlled) {\r\n            field.onChange(v);\r\n        }\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        field.version++;\r\n        if (field.key) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(form, state, field, preset, props, controlled, dict, key) {\r\n    var hasErrorProp = 'error' in props;\r\n    var prevKey = field.key || key;\r\n    extend(field, { form, props, preset, controlled, dict, key });\r\n    if (form && key) {\r\n        field.name = key.slice(9);\r\n        field.path = getPath(form, dict, field.name);\r\n        if (prevKey !== key) {\r\n            field.locks = [];\r\n            if (!hasErrorProp) {\r\n                field.error = '';\r\n            }\r\n        }\r\n        state.fields[key] = field;\r\n    } else {\r\n        field.path = '';\r\n    }\r\n    if (hasErrorProp) {\r\n        field.error = props.error;\r\n    }\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            state.fields[key] = field;\r\n        }\r\n        return function () {\r\n            if (state && state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount || field.form === rootForm) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[key.slice(9)];\r\n                        }\r\n                    });\r\n                }\r\n                state.setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var result = emitter.emit('validate', form, { name, value });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        var state = _(form);\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(this).fields, function (v) {\r\n                return (v.error && (key & 1)) || (isEmpty(v, v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = this.element(key);\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        each(data || state.initialData, function (i, v) {\r\n            dict.set(i, v);\r\n        });\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix[0]) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    }\r\n    if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const preset = type ? mapGet(presets, type, type) : {};\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    const dict = useContext(FormObjectContext);\r\n    const form = dict && _(dict).context;\r\n    const state = form && _(form);\r\n    const name = props.name || '';\r\n    const key = form && name && (keyFor(dict) + '.' + name);\r\n    const controlled = prop in props;\r\n\r\n    const field = useState(function () {\r\n        var initialValue = controlled ? props[prop] : (preset.normalizeValue || pipe)(defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n        return createFieldState(initialValue);\r\n    })[0];\r\n    useFormFieldInternal(form, state, field, preset, props, controlled, dict, key);\r\n    if (controlled) {\r\n        field.value = props[prop];\r\n    }\r\n    if (form && key) {\r\n        if (!(name in dict)) {\r\n            if (isEmpty(field, field.initialValue)) {\r\n                field.value = _(dict).set(name, field.initialValue);\r\n            } else {\r\n                dict[name] = field.initialValue;\r\n            }\r\n            field.version = 0;\r\n        } else if (!controlled) {\r\n            field.value = dict[name];\r\n        }\r\n    }\r\n    const state1 = (preset.postHook || pipe)({\r\n        form: form,\r\n        key: key,\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        validate: field.validate,\r\n        elementRef: field.elementRef\r\n    }, props);\r\n    state1.value = field.value;\r\n    state1.error = String(field.error);\r\n    useObservableProperty(field, 'version');\r\n    return state1;\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var form = _(dict).context;\r\n    var state = _(form);\r\n    var value = props.value;\r\n    if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else if (!(_(value) || '').context) {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var key = state.paths[keyFor(value)];\r\n    if (typeof (state.fields[key] || '').controlled !== 'boolean') {\r\n        var field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(form, state, field, {}, props, 0, dict, key);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__231__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__311__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_lib$util","lib","always","any","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","deferrable","defineGetterProperty","defineObservableProperty","definePrototype","delay","each","either","exclude","extend","freeze","grep","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","extraRender","ReactDOM","TestComponent","container","document","createElement","element","StrictMode","render","IS_DEV","ZetaEventContainer","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AbortController","window","useSingletonEffect","target","dispose","has","set","clearUnusedSingletons","useEffect","cb","flag","add","i","v","useUpdateTrigger","setState","useState","useCallback","useMemoizedFunction","callback","ref","useRef","current","apply","this","arguments","useObservableProperty","forceUpdate","useAsync","init","deps","debounce","state","useSingleton","currentController","nextResult","loading","error","elementRef","on","event","handler","onError","e","refresh","force","waitFor","promise","muteRejection","then","controller","abort","result","signal","resolved","emit","data","reason","concat","useMemo","useRefInitCallback","args","useDispose","callbacks","length","push","isSingletonDisposed","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","catchError","reemitError","catch","filter","isErrorOf","useUnloadEffect","used","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","values","setValue","useBreakpoint","persisted","ViewStateProviderContext","createContext","noopStorage","ViewStateProvider","Provider","useViewState","uniqueId","provider","useContext","getState","_","proto","DataView","emitter","compare","a","b","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","newValues","sorted","filtered","useDataView","persistKey","viewState","reset","toJSON","onPopState","newValue","getView","sort","filteredItems","slice","item","dir","toggleSort","max","min","pageCount","oldValue","boundEvents","WeakMap","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","children","partial","fn","combineRef","toRefCallback","withSuspense","fallback","Fragment","Component","lazy","props","Suspense","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","defaultValue","postHook","selectedIndex","findIndex","allowUnselect","selectedItem","re","units","m","normalizeDate","date","test","Date","parse","str","toLowerCase","replace","c","parseRelativeDate","setHours","clampValue","ts","toDateObject","isNaN","toDateString","tz","getTimezoneOffset","toISOString","indexOf","DateField","MultiChoiceField","NumericField","TextField","ToggleField","w","normalizeValue","displayText","formatDisplay","clamped","allowCustomValues","isUnknown","some","toggleValue","selected","cur","step","allowEmpty","rounded","round","form","inputProps","type","autoComplete","enterKeyHint","valueProperty","isEmpty","presets","instances","changedProps","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","field","preset","hasImplicitError","required","cloneValue","keyFor","resolvePathInfo","path","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","updatedFields","validateFields","version","validateOnChange","unlock","getEventSource","Promise","handleDataChange","local","onChange","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","delete","createFieldState","initialValue","controlled","setError","isValid","validate","dict","toString","formatError","wrapErrorResult","useFormFieldInternal","hasErrorProp","prevKey","locks","clearWhenUnmount","setValid","disabled","onValidate","promises","next","shift","forEach","formPersist","options","autoPersist","normalizeOptions","useFormContext","dataChange","useFormField","state1","combineValidators","validators","reduce","registerFieldType","ERROR_FIELD","EMPTY_FIELD","persist","restore","clear","getValue","getErrors","errorFields","getError","prefix","Form","forwardRef","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}