{"version":3,"file":"zeta-dom-react.min.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/react.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/errorCode.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__33__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, errorWithCode, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, errorWithCode, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"@misonou/hoist/react\";\r\nconst { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } = lib;\r\nexport { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import lib from \"zeta-dom\";\r\nconst errorCode = lib.ErrorCode;\r\nconst { cancelled } = errorCode;\r\nexport { cancelled };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { createContext, createElement, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, defineObservableProperty, defineOwnProperty, delay, each, equal, errorWithCode, extend, fill, freeze, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isUndefinedOrNull, makeArray, makeAsync, map, mapRemove, noop, pipe, resolve, sameValueZero, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport * as ErrorCode from \"zeta-dom/errorCode\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst _ = /*#__PURE__*/ createPrivateStore();\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AsyncScopeContext = createContext(null);\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\nconst sameValue = Object.is || function (a, b) {\r\n    return sameValueZero(a, b) && (a !== 0 || 1 / a === 1 / b);\r\n};\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (clearUnusedSingletons.d & (v.d || 1)) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i).call(i, i, v.d === 2);\r\n        }\r\n    });\r\n    clearUnusedSingletons.d = 0;\r\n}\r\n\r\nfunction useSingletonEffectImpl(factory, dispose, deps) {\r\n    var target = useMemo(factory, deps);\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose.call(target, target, true);\r\n        };\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction useSingletonEffectImplDev(factory, dispose, deps) {\r\n    var target = useMemo(function () {\r\n        var target = factory();\r\n        if (!singletons.has(target)) {\r\n            singletons.set(target, dispose);\r\n            clearUnusedSingletons.d = 0;\r\n            clearImmediateOnce(clearUnusedSingletons);\r\n        }\r\n        return target;\r\n    }, deps);\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = flag ? 4 : 2;\r\n            clearUnusedSingletons.d |= flag ? 1 : 2;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction createRefInitCallback(set, init, args) {\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function createAsyncScope(element) {\r\n    return {\r\n        errorHandler: createErrorHandler(element),\r\n        Provider: function (props) {\r\n            return createElement(AsyncScopeContext.Provider, { value: element }, props.children);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useAutoSetRef(value) {\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    return ref;\r\n}\r\n\r\nexport function useEagerReducer(reducer, init) {\r\n    var state = useState(function () {\r\n        var value = isFunction(init) ? init() : init;\r\n        var fn = function (newValue) {\r\n            newValue = reducer(value, newValue);\r\n            if (!sameValue(newValue, value)) {\r\n                value = newValue;\r\n                state[1]([value, fn]);\r\n            }\r\n        };\r\n        return [value, fn];\r\n    });\r\n    return state[0];\r\n}\r\n\r\nexport function useEagerState(init) {\r\n    return useEagerReducer(function (prevState, state) {\r\n        return isFunction(state) ? state(prevState) : state;\r\n    }, init);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    return useReducer(function () {\r\n        return {};\r\n    })[1];\r\n}\r\n\r\nexport function useValueTrigger(value, comparer) {\r\n    var state = useEagerReducer(function (ref, value) {\r\n        return (comparer || sameValue)(ref.current, value) ? ref : { current: value };\r\n    }, {});\r\n    state[0].current = value;\r\n    return state[1];\r\n}\r\n\r\nexport function useEventTrigger(obj, event, selector, initialState) {\r\n    const state = useEagerState(initialState);\r\n    useEffect(function () {\r\n        var callback = function (e) {\r\n            state[1](selector ? selector.bind(this, e) : {});\r\n        };\r\n        return obj.addEventListener ? bind(obj, event, callback) : obj.on(fill(event, callback));\r\n    }, [obj, event]);\r\n    return selector ? state[0] : undefined;\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useAutoSetRef(callback);\r\n    return useCallback(function () {\r\n        return (isFunction(ref.current) || noop).apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const value = obj[key];\r\n    const notifyChange = useValueTrigger(value);\r\n    useEffect(function () {\r\n        notifyChange(obj[key]);\r\n        return watch(obj, key, notifyChange);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const scopeElement = useContext(AsyncScopeContext);\r\n    const state = useSingleton(function () {\r\n        var lastTime = 0;\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        var reset = function (loading, value, error, reason) {\r\n            if (currentController) {\r\n                currentController.abort(reason);\r\n                currentController = null;\r\n            }\r\n            nextResult = null;\r\n            extend(state, { loading, value, error });\r\n            notifyChange([loading, value, error]);\r\n        };\r\n        var refresh = function () {\r\n            var controller = AbortController ? new AbortController() : { abort: noop };\r\n            var result = makeAsync(init)(controller.signal);\r\n            var promise = always(result, function (resolved, value) {\r\n                if (currentController === controller) {\r\n                    currentController = null;\r\n                    if (resolved) {\r\n                        reset(false, value);\r\n                        container.emit('load', state, { data: value });\r\n                    } else {\r\n                        reset(false, undefined, value);\r\n                        if (!container.emit('error', state, { error: value })) {\r\n                            throw value;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            reset(true, state.value);\r\n            lastTime = Date.now();\r\n            currentController = controller;\r\n            notifyAsync(element || scopeElement || dom.root, promise);\r\n            return result;\r\n        };\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function () {\r\n                return nextResult || (nextResult = muteRejection(new Promise(function (resolve, reject) {\r\n                    var previousController = currentController || { abort: noop };\r\n                    currentController = {\r\n                        abort: function (reason) {\r\n                            previousController.abort(reason);\r\n                            reject(reason || errorWithCode(ErrorCode.cancelled));\r\n                        }\r\n                    };\r\n                    (Date.now() - lastTime < debounce ? delay(debounce) : Promise.resolve()).then(resolve);\r\n                }).then(refresh)));\r\n            },\r\n            abort: function (reason) {\r\n                reset(false, state.value, state.error, reason);\r\n            },\r\n            reset: function () {\r\n                reset(false);\r\n                lastTime = 0;\r\n            }\r\n        };\r\n    }, [], function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            state.refresh();\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    var notifyChange = useValueTrigger([state.loading, state.value, state.error], equal);\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback() {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return createRefInitCallback(set, args[0], args);\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, deps, onDispose) {\r\n    if (isFunction(deps)) {\r\n        onDispose = deps;\r\n        deps = [];\r\n    }\r\n    onDispose = onDispose || function (target) {\r\n        (target.dispose || noop).call(target);\r\n    };\r\n    return isFunction(factory) ? useSingletonEffect(factory, onDispose, deps || []) : useSingletonEffect(pipe.bind(0, factory), onDispose, [factory]);\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function createErrorHandler(element) {\r\n    var reemitting;\r\n    var reemitError = function (error) {\r\n        try {\r\n            reemitting = true;\r\n            return reportError(error, element);\r\n        } finally {\r\n            reemitting = false;\r\n        }\r\n    };\r\n    var catchError = function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    };\r\n    var initElement = function (current) {\r\n        element = current;\r\n        return dom.on(current, 'error', function (e) {\r\n            return reemitting ? undefined : catchError(e.error);\r\n        });\r\n    };\r\n    var handler = {\r\n        emit: function (error) {\r\n            return catchError(error) || reemitError(error) || resolve();\r\n        },\r\n        catch: function (filter, callback) {\r\n            var isErrorOf = pipe;\r\n            if (!callback) {\r\n                callback = filter;\r\n            } else if (!isArray(filter)) {\r\n                isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n            } else {\r\n                isErrorOf = function (error, filter) {\r\n                    return any(filter, function (filter) {\r\n                        return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                    });\r\n                };\r\n            }\r\n            return container.add(handler, isErrorOf === pipe ? 'default' : 'error', function (e) {\r\n                if (isErrorOf(e.error, filter)) {\r\n                    return callback(e.error);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    if (element) {\r\n        initElement(element);\r\n    } else {\r\n        handler.ref = createRefInitCallback(new WeakSet(), initElement, []);\r\n    }\r\n    return handler;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const args = makeArray(arguments);\r\n    const handler = useState(createErrorHandler)[0];\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(pipe.bind(0, callback), function (target, used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    }, []);\r\n}\r\n\r\nexport function createDependency(defaultValue) {\r\n    var Provider = freeze({});\r\n    var Consumer = freeze({});\r\n    var dependency = { Provider, Consumer };\r\n    var values = _(dependency, extend([], dependency));\r\n    defineObservableProperty(values, 'current', defaultValue, function () {\r\n        return values[0] ? values[0].value : defaultValue;\r\n    });\r\n    _(Provider, values);\r\n    _(Consumer, values);\r\n    return freeze(dependency);\r\n}\r\n\r\nexport function useDependency(dependency, value, deps) {\r\n    var values = _(dependency);\r\n    if (dependency === values.Provider) {\r\n        var wrapper = useSingleton(function () {\r\n            var obj = {};\r\n            return values.push(obj) && obj;\r\n        }, [values], function () {\r\n            arrRemove(values, wrapper);\r\n            values.current = null;\r\n        });\r\n        useMemo(function () {\r\n            value = isFunction(value) ? value() : value;\r\n            if (wrapper.value !== value || !hasOwnProperty(wrapper, 'value')) {\r\n                defineOwnProperty(wrapper, 'value', value, true);\r\n                values.current = null;\r\n            }\r\n        }, [wrapper].concat(deps || [value]));\r\n        return wrapper;\r\n    } else {\r\n        return useObservableProperty(values, 'current');\r\n    }\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { combineFn, defineObservableProperty, hasOwnProperty, makeArray, map, single, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useEventTrigger, useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    useEventTrigger(mq, 'change');\r\n    return mq.matches;\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    var handleChanges = watch(values, true);\r\n    var updateAll = combineFn(map(breakpoints, function (v, i) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            if (mq.matches !== values[i]) {\r\n                handleChanges(updateAll);\r\n            }\r\n        });\r\n        return function () {\r\n            return setValue(mq.matches);\r\n        };\r\n    }));\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var deps = makeArray(arguments);\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, function (e) {\r\n                    if (!deps.length || single(deps, hasOwnProperty.bind(0, e.newValues))) {\r\n                        forceUpdate();\r\n                    }\r\n                });\r\n            }, deps);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton(function () {\r\n        return (provider && key && provider.getState(uniqueId, key)) || {\r\n            get: noop,\r\n            set: noop\r\n        };\r\n    }, [provider, key, uniqueId]);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    state.callback = watch(filters, false);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    get hasPreviousPage() {\r\n        return this.pageIndex > 0;\r\n    },\r\n    get hasNextPage() {\r\n        return this.pageIndex < this.pageCount - 1;\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        values = values || state.defaults;\r\n        state.callback(function () {\r\n            extend(self.filters, values.filters);\r\n        });\r\n        return extend(self, values);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, single, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (current) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(current[key], current) : value);\r\n            }\r\n            return single(key, function (v, i) {\r\n                return v !== current[i] && extend({}, current, key);\r\n            }) || current;\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return (items || []).map(function (v) {\r\n        return typeof v === 'object' ? v : { label: String(v), value: v };\r\n    });\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props, hook) {\r\n        var items = hook.memo(function () {\r\n            return normalizeChoiceItems(props.items);\r\n        }, [props.items]);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        hook.effect(function () {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { define, definePrototype, extend, isFunction } from \"zeta-dom/util\";\r\n\r\nconst re = /^-?\\d{4,}-\\d{2}-\\d{2}$/;\r\n\r\n// method mapping for relative date units\r\nconst units = {\r\n    y: ['getFullYear', 'setFullYear'],\r\n    m: ['getMonth', 'setMonth'],\r\n    d: ['getDate', 'setDate']\r\n};\r\nunits.w = units.d;\r\n\r\nfunction parseRelativeDate(str) {\r\n    var date = new Date();\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    str.toLowerCase().replace(/([+-]?)(\\d+)([dwmy])/g, function (v, a, b, c) {\r\n        date[units[c][1]](date[units[c][0]]() + (b * (a === '-' ? -1 : a === '+' ? 1 : dir) * (c === 'w' ? 7 : 1)));\r\n    });\r\n    return date;\r\n}\r\n\r\nfunction normalizeDate(date) {\r\n    if (typeof date === 'string') {\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        date = date[0] === '+' || date[0] === '-' ? parseRelativeDate(date) : Date.parse(date);\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    if (!isNaN(date)) {\r\n        // counter UTC conversion due to toISOString\r\n        var tz = new Date(date).getTimezoneOffset() * 60000;\r\n        var str = new Date(date - tz).toISOString();\r\n        return str.slice(0, str.indexOf('T', 10));\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value));\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = normalizeDate(props.min);\r\n        var max = normalizeDate(props.max);\r\n        var displayText = hook.memo(function () {\r\n            return value && props.formatDisplay ? props.formatDisplay(toDateObject(value)) : value;\r\n        }, [value]);\r\n        hook.effect(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: hook.callback(function (v) {\r\n                v = isFunction(v) ? v(value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, either, extend, freeze, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = hook.memo(function () {\r\n            return ChoiceField.normalizeItems(props.items);\r\n        }, [props.items]);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = hook.callback(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        var value = hook.memo(function () {\r\n            return makeArray(state.value);\r\n        }, [state.version]);\r\n        hook.effect(function () {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            value: value,\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        hook.effect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        return extend(state, {\r\n            toggleValue: hook.callback(function () {\r\n                state.setValue(function (v) {\r\n                    return !v;\r\n                });\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { always, any, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, definePrototype, each, equal, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throwNotFunction, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction createHookHelper(effects) {\r\n    var states = [];\r\n    var push = function (callback, deps) {\r\n        var i = effects.i++;\r\n        states[i] = !deps || !states[i] || !equal(states[i][0], deps) ? [deps, callback()] : states[i];\r\n        return states[i][1];\r\n    };\r\n    return {\r\n        memo: push,\r\n        callback: function (callback) {\r\n            var ref = push(Object, []);\r\n            ref.current = callback;\r\n            return ref.cb || (ref.cb = function () {\r\n                return ref.current.apply(this, arguments);\r\n            });\r\n        },\r\n        effect: function (callback, deps) {\r\n            push(function () {\r\n                effects.push(throwNotFunction(callback));\r\n            }, deps);\r\n        }\r\n    };\r\n}\r\n\r\nfunction isEmpty(value) {\r\n    return isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && field.isEmpty(field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = name ? [name] : [];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path)[name ? 'parent' : 'value'] === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(state.fields, function (v) {\r\n            return props[v.path];\r\n        });\r\n        emitter.emit('dataChange', form, keys(props));\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field, oldValue) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                var value = field.normalizeValue(target[p]);\r\n                if (!sameValueZero(value, target[p])) {\r\n                    setValue(p, value);\r\n                }\r\n                if (!sameValueZero(field.value, value)) {\r\n                    field.value = value;\r\n                    field.version++;\r\n                }\r\n                if (value === oldValue) {\r\n                    return;\r\n                }\r\n                handleDataChange.d.add(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            if (context !== rootForm) {\r\n                mapGet(changedProps, context, Object)[path] = true;\r\n                setImmediateOnce(emitDataChangeEvent);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').state !== state) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    setValue(p, v);\r\n                    onChange(p, state.fields[uniqueId + '.' + p], prev);\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        state,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    for (var i in initialData) {\r\n        setValue(i, initialData[i]);\r\n    }\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (!field.controlled) {\r\n                field.version++;\r\n            }\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (!field.controlled) {\r\n                field.dict[field.name] = v;\r\n            } else if (!sameValueZero(v, field.value)) {\r\n                field.onChange(v);\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.form, [field]);\r\n        },\r\n        isEmpty: function (value) {\r\n            return (field.props.isEmpty || (field.preset.isEmpty || isEmpty).bind(field.preset))(value);\r\n        },\r\n        normalizeValue: function (value) {\r\n            return (field.preset.normalizeValue || pipe).call(field.preset, value, field.props);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        if (field.form) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    defineGetterProperty(field.elementRef, 'current', function () {\r\n        return field.element || null;\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(state, field, preset, props, controlled, dict, name) {\r\n    var form = state.form === rootForm ? null : state.form;\r\n    var key = name ? keyFor(dict) + '.' + name : state.paths[keyFor(dict)];\r\n    var shouldReset = field.key !== key;\r\n    extend(field, {\r\n        form: form,\r\n        props: props,\r\n        preset: preset,\r\n        controlled: controlled,\r\n        dict: dict,\r\n        key: key,\r\n        name: name,\r\n        path: form ? getPath(form, dict, name) : '',\r\n        error: 'error' in props ? props.error : shouldReset ? '' : field.error,\r\n        locks: shouldReset ? [] : field.locks\r\n    });\r\n    var setValid = form ? state.setValid : noop;\r\n    state.fields[key] = field;\r\n    useEffect(function () {\r\n        state.fields[key] = field;\r\n        return function () {\r\n            if (state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount || !form) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[name];\r\n                        }\r\n                    });\r\n                }\r\n                setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        setValid();\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var result = emitter.emit('validate', form, { name, value });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        var state = _(form);\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        form: self,\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(this).fields, function (v) {\r\n                return (v.error && (key & 1)) || (v.isEmpty(v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = this.element(key);\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        data = data || state.initialData;\r\n        for (var i in data) {\r\n            dict.set(i, data[i]);\r\n        }\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n                v.version = 0;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix.length) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    } else if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const uniqueId = useState(randomId)[0];\r\n    const context = useContext(FormObjectContext);\r\n    const effects = useState([])[0];\r\n    const hook = useMemo(function () {\r\n        return type ? [new type(), createHookHelper(effects)] : [{}];\r\n    }, [type]);\r\n    const preset = hook[0];\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    var dict = context;\r\n    var name = props.name;\r\n    if (!dict || !name) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    const existing = name in dict;\r\n    const controlled = prop in props;\r\n    const field = useState(function () {\r\n        return createFieldState(controlled ? props[prop] : defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n    })[0];\r\n    const previousKey = field.key;\r\n    useFormFieldInternal(_(dict).state, field, preset, props, controlled, dict, name);\r\n\r\n    var value = controlled ? props[prop] : existing ? dict[name] : field.initialValue;\r\n    if (previousKey !== field.key) {\r\n        value = field.normalizeValue(value);\r\n    }\r\n    if (!field.form || (!existing && field.isEmpty(value))) {\r\n        _(dict).set(name, value);\r\n    } else {\r\n        dict[name] = value;\r\n    }\r\n    field.value = dict[name];\r\n    if (!existing) {\r\n        field.version = 0;\r\n    }\r\n    effects.i = 0;\r\n    effects.splice(0);\r\n    useEffect(function () {\r\n        combineFn(effects)();\r\n    });\r\n    useObservableProperty(field, 'error');\r\n    useObservableProperty(field, 'version');\r\n    return (preset.postHook || pipe).call(preset, {\r\n        form: context && _(context).state.form,\r\n        key: field.form ? field.key : '',\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        version: field.version,\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        validate: field.validate,\r\n        elementRef: field.elementRef\r\n    }, props, hook[1]);\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var value = props.value;\r\n    if ((_(value) || '').state) {\r\n        dict = value;\r\n        name = '';\r\n    } else if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var state = _(dict).state;\r\n    var field = state.fields[state.paths[keyFor(value)]];\r\n    if (!field || field.controlled === 0) {\r\n        field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(state, field, {}, props, 0, dict, name);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__231__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__33__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_lib$util","lib","always","any","arrRemove","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","defineGetterProperty","defineObservableProperty","defineOwnProperty","definePrototype","delay","each","either","equal","errorWithCode","exclude","extend","fill","freeze","grep","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","Fragment","StrictMode","Suspense","createContext","createElement","forwardRef","lazy","useCallback","useContext","useEffect","useMemo","useReducer","useRef","useState","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","cancelled","extraRender","ReactDOM","TestComponent","container","document","element","render","IS_DEV","_","ZetaEventContainer","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AsyncScopeContext","AbortController","window","useSingletonEffect","dispose","deps","target","has","set","clearUnusedSingletons","cb","flag","add","sameValue","a","b","i","v","createRefInitCallback","init","args","apply","createAsyncScope","errorHandler","createErrorHandler","Provider","props","children","useAutoSetRef","ref","current","useEagerReducer","reducer","state","fn","newValue","useEagerState","prevState","useUpdateTrigger","useValueTrigger","comparer","useEventTrigger","event","selector","initialState","callback","e","this","addEventListener","on","useMemoizedFunction","arguments","useObservableProperty","notifyChange","useAsync","debounce","scopeElement","useSingleton","currentController","nextResult","lastTime","reset","loading","error","reason","abort","refresh","controller","result","signal","promise","resolved","emit","data","Date","now","elementRef","handler","onError","Promise","reject","previousController","ErrorCode","then","concat","useRefInitCallback","useDispose","callbacks","length","push","isSingletonDisposed","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","catchError","initElement","reemitError","catch","filter","isErrorOf","useUnloadEffect","used","createDependency","defaultValue","Consumer","dependency","values","useDependency","wrapper","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","handleChanges","updateAll","setValue","useBreakpoint","forceUpdate","newValues","persisted","ViewStateProviderContext","ViewStateProvider","useViewState","uniqueId","provider","getState","proto","DataView","emitter","compare","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","sorted","filtered","useDataView","persistKey","viewState","toJSON","onPopState","hasPreviousPage","hasNextPage","pageCount","getView","sort","filteredItems","slice","item","dir","toggleSort","max","min","oldValue","boundEvents","WeakMap","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","partial","setState","combineRef","toRefCallback","withSuspense","fallback","Component","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","postHook","hook","memo","selectedIndex","findIndex","effect","allowUnselect","selectedItem","re","units","m","normalizeDate","date","test","parse","str","toLowerCase","replace","c","parseRelativeDate","setHours","clampValue","ts","toDateObject","isNaN","toDateString","tz","getTimezoneOffset","toISOString","indexOf","DateField","MultiChoiceField","NumericField","TextField","ToggleField","w","normalizeValue","displayText","formatDisplay","clamped","allowCustomValues","isUnknown","some","toggleValue","selected","version","cur","step","allowEmpty","rounded","round","form","inputProps","type","autoComplete","enterKeyHint","valueProperty","isEmpty","instances","changedProps","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","createHookHelper","effects","states","hasImplicitError","field","required","cloneValue","keyFor","resolvePathInfo","path","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","updatedFields","validateFields","validateOnChange","unlock","getEventSource","handleDataChange","local","onChange","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","delete","createFieldState","initialValue","preset","controlled","dict","setError","isValid","validate","toString","formatError","wrapErrorResult","useFormFieldInternal","shouldReset","locks","setValid","clearWhenUnmount","disabled","onValidate","promises","next","shift","forEach","formPersist","options","autoPersist","normalizeOptions","useFormContext","dataChange","useFormField","existing","previousKey","combineValidators","validators","reduce","registerFieldType","ERROR_FIELD","EMPTY_FIELD","persist","restore","clear","getValue","getErrors","errorFields","getError","prefix","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}