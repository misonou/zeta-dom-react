{"version":3,"file":"zeta-dom-react.js","mappings":"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","sources":["webpack://zeta-dom-react/webpack/universalModuleDefinition","webpack://zeta-dom-react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta-dom-react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta-dom-react/webpack/bootstrap","webpack://zeta-dom-react/webpack/runtime/define property getters","webpack://zeta-dom-react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta-dom-react/webpack/runtime/make namespace object","webpack://zeta-dom-react/./tmp/zeta-dom/util.js","webpack://zeta-dom-react/./src/include/zeta-dom/util.js","webpack://zeta-dom-react/./tmp/zeta-dom/domUtil.js","webpack://zeta-dom-react/./src/include/zeta-dom/domUtil.js","webpack://zeta-dom-react/./tmp/zeta-dom/dom.js","webpack://zeta-dom-react/./src/include/zeta-dom/dom.js","webpack://zeta-dom-react/./tmp/zeta-dom/domLock.js","webpack://zeta-dom-react/./src/include/zeta-dom/domLock.js","webpack://zeta-dom-react/./tmp/zeta-dom/events.js","webpack://zeta-dom-react/./src/include/zeta-dom/events.js","webpack://zeta-dom-react/./src/hooks.js","webpack://zeta-dom-react/./src/css.js","webpack://zeta-dom-react/./src/viewState.js","webpack://zeta-dom-react/./src/dataView.js","webpack://zeta-dom-react/./src/util.js","webpack://zeta-dom-react/./src/form.js","webpack://zeta-dom-react/./src/index.js","webpack://zeta-dom-react/./tmp/zeta-dom/index.js","webpack://zeta-dom-react/./src/include/zeta-dom/index.js","webpack://zeta-dom-react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"zeta-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"react\", \"zeta-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"react\"), require(\"zeta-dom\"));\n\telse\n\t\troot[\"zeta-dom-react\"] = factory(root[\"React\"], root[\"zeta\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__359__, __WEBPACK_EXTERNAL_MODULE__654__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__359__;","module.exports = __WEBPACK_EXTERNAL_MODULE__654__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import zeta from \"zeta-dom\";const { noop, pipe, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, fill, pick, exclude, mapObject, mapGet, mapRemove, arrRemove, setAdd, equal, combineFn, executeOnce, createPrivateStore, setTimeout, setTimeoutOnce, setInterval, setIntervalSafe, setImmediate, setImmediateOnce, throws, throwNotFunction, errorWithCode, isErrorWithCode, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, freeze, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, retryable, deferrable, catchAsync, setPromiseTimeout, delay, makeAsync } = zeta.util; export { noop, pipe, either, is, isUndefinedOrNull, isArray, isFunction, isThenable, isPlainObject, isArrayLike, makeArray, extend, each, map, grep, splice, any, single, kv, fill, pick, exclude, mapObject, mapGet, mapRemove, arrRemove, setAdd, equal, combineFn, executeOnce, createPrivateStore, setTimeout, setTimeoutOnce, setInterval, setIntervalSafe, setImmediate, setImmediateOnce, throws, throwNotFunction, errorWithCode, isErrorWithCode, keys, values, hasOwnProperty, getOwnPropertyDescriptors, define, definePrototype, defineOwnProperty, defineGetterProperty, defineHiddenProperty, defineAliasProperty, defineObservableProperty, watch, watchOnce, watchable, inherit, freeze, deepFreeze, iequal, randomId, repeat, camel, hyphenate, ucfirst, lcfirst, trim, matchWord, htmlDecode, resolve, reject, always, resolveAll, retryable, deferrable, catchAsync, setPromiseTimeout, delay, makeAsync };","export * from \"zeta-dom/util\";\r\n","import zeta from \"zeta-dom\";const { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint } = zeta.util; export { domReady, tagName, isVisible, matchSelector, comparePosition, connected, containsOrEquals, acceptNode, combineNodeFilters, iterateNode, iterateNodeToArray, getCommonAncestor, parentsAndSelf, selectIncludeSelf, selectClosestRelative, createNodeIterator, createTreeWalker, bind, bindUntil, dispatchDOMMouseEvent, removeNode, getClass, setClass, getScrollOffset, getScrollParent, getContentRect, scrollBy, scrollIntoView, makeSelection, getRect, getRects, toPlainRect, rectEquals, rectCovers, rectIntersects, pointInRect, mergeRect, elementFromPoint };","export * from \"zeta-dom/domUtil\";\r\n","import zeta from \"zeta-dom\";const _defaultExport = zeta.dom; export default _defaultExport;const { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, releaseModal, retainFocus, releaseFocus, iterateFocusPath, focus } = zeta.dom; export { textInputAllowed, beginDrag, beginPinchZoom, getShortcut, setShortcut, focusable, focused, setModal, releaseModal, retainFocus, releaseFocus, iterateFocusPath, focus };","import dom from \"zeta-dom/dom\";\r\nexport * from \"zeta-dom/dom\";\r\nexport default dom;\r\n","import zeta from \"zeta-dom\";const { lock, locked, cancelLock, subscribeAsync, notifyAsync, preventLeave } = zeta.dom; export { lock, locked, cancelLock, subscribeAsync, notifyAsync, preventLeave };","export * from \"zeta-dom/domLock\";\r\n","import zeta from \"zeta-dom\";const { EventContainer: ZetaEventContainer } = zeta; export { ZetaEventContainer };","export { ZetaEventContainer } from \"zeta-dom/events\";\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport dom from \"./include/zeta-dom/dom.js\";\r\nimport { notifyAsync } from \"./include/zeta-dom/domLock.js\";\r\nimport { ZetaEventContainer } from \"./include/zeta-dom/events.js\";\r\nimport { always, combineFn, deferrable, delay, extend, is, isArray, isErrorWithCode, isFunction, makeArray, makeAsync, map, pipe, resolve, setAdd, watch } from \"./include/zeta-dom/util.js\";\r\n\r\nconst fnWeakMap = new WeakMap();\r\nconst container = new ZetaEventContainer();\r\n\r\nexport function useUpdateTrigger() {\r\n    const setState = useState()[1];\r\n    return useCallback(function () {\r\n        setState({});\r\n    }, []);\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const fn = useCallback(function fn() {\r\n        const cb = fnWeakMap.get(fn);\r\n        return cb && cb.apply(this, arguments);\r\n    }, []);\r\n    fnWeakMap.set(fn, callback);\r\n    return fn;\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const forceUpdate = useUpdateTrigger();\r\n    const value = obj[key];\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    useEffect(function () {\r\n        var cb = function (v) {\r\n            if (v !== ref.current) {\r\n                forceUpdate();\r\n            }\r\n        };\r\n        cb(obj[key]);\r\n        return watch(obj, key, cb);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const state = useState(function () {\r\n        var element;\r\n        var currentPromise;\r\n        var nextResult;\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function (force) {\r\n                if (debounce && !force) {\r\n                    nextResult = nextResult || deferrable();\r\n                    nextResult.waitFor(delay(debounce));\r\n                    return nextResult.d || (nextResult.d = nextResult.then(function () {\r\n                        nextResult = null;\r\n                        return state.refresh(true);\r\n                    }));\r\n                }\r\n                extend(state, { loading: true, error: undefined });\r\n                var result = makeAsync(init)();\r\n                var promise = always(result, function (resolved, value) {\r\n                    if (!state.disposed && currentPromise === promise) {\r\n                        if (resolved) {\r\n                            extend(state, { loading: false, value: value });\r\n                            container.emit('load', state, { data: value });\r\n                        } else {\r\n                            extend(state, { loading: false, value: undefined, error: value });\r\n                            if (!container.emit('error', state, { error: value })) {\r\n                                throw value;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                currentPromise = promise;\r\n                notifyAsync(element || dom.root, promise);\r\n                return result;\r\n            }\r\n        };\r\n    })[0];\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        state.disposed = false;\r\n        return function () {\r\n            state.disposed = true;\r\n        };\r\n    }, [state]);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            state.refresh();\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    useObservableProperty(state, 'loading');\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const reemitting = useRef(false);\r\n    const ref = useRef(null);\r\n    const args = makeArray(arguments);\r\n    const handler = useState(function () {\r\n        return {\r\n            ref: function (element) {\r\n                ref.current = element;\r\n                init(element);\r\n            },\r\n            catch: function (filter, callback) {\r\n                var isErrorOf;\r\n                if (callback) {\r\n                    isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n                } else {\r\n                    callback = filter;\r\n                }\r\n                return container.add(handler, isErrorOf ? 'error' : 'default', function (e) {\r\n                    if ((isErrorOf || pipe)(e.error, filter)) {\r\n                        return callback(e.error);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    const reemitError = useCallback(function (error) {\r\n        try {\r\n            reemitting.current = true;\r\n            return dom.emit('error', ref.current || dom.root, { error }, true);\r\n        } finally {\r\n            reemitting.current = false;\r\n        }\r\n    }, []);\r\n    const catchError = useCallback(function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    }, []);\r\n    const init = useRefInitCallback(function (element) {\r\n        dom.on(element, 'error', function (e) {\r\n            if (!reemitting.current) {\r\n                return catchError(e.error);\r\n            }\r\n        });\r\n    });\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(function (error) {\r\n                return catchError(error) || reemitError(error) || resolve();\r\n            });\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n","import { useEffect, useMemo, useState } from \"react\";\r\nimport { defineObservableProperty, each, watch } from \"./include/zeta-dom/util.js\";\r\nimport { bind } from \"./include/zeta-dom/domUtil.js\";\r\nimport { useDispose, useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    var state = useState(mq.matches);\r\n    useEffect(function () {\r\n        return bind(mq, 'change', function () {\r\n            state[1](mq.matches);\r\n        });\r\n    }, [mq]);\r\n    return state[0];\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    watch(values, true);\r\n    each(breakpoints, function (i, v) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            setValue(mq.matches);\r\n        });\r\n    });\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, forceUpdate);\r\n            }, []);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { noop, randomId } from \"./include/zeta-dom/util.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\n// @ts-ignore: type inference issue\r\nconst ViewStateProviderContext = createContext(null);\r\nconst noopStorage = Object.freeze({\r\n    get: noop,\r\n    set: noop\r\n});\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    var state = (provider && key && provider.getState(uniqueId, key)) || noopStorage;\r\n    useEffect(function () {\r\n        return state.dispose && state.dispose.bind(state);\r\n    }, [state]);\r\n    return state;\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"./include/zeta-dom/events.js\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, pipe, single, watch } from \"./include/zeta-dom/util.js\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    filters = extend({}, filters);\r\n    for (let i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    var state = _(self, {\r\n        filters: Object.freeze(filters),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var onUpdated = function () {\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (this !== self) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        emitter.emitAsync('viewChange', self);\r\n    };\r\n    extend(this, defaults);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    itemCount: 0,\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function () {\r\n        extend(this, _(this).defaults);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'pageIndex');\r\ndefineObservableProperty(proto, 'pageSize');\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue) {\r\n    return extend(_(this).filters, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return extend(new DataView(filters, sortBy, sortOrder, pageSize), viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        var state = _(dataView);\r\n        return combineFn(\r\n            dataView.on('viewChange', forceUpdate),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                extend(dataView, newValue || state.defaults);\r\n            }) : noop,\r\n            function () {\r\n                viewState.set(dataView.toJSON());\r\n            }\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, noop } from \"./include/zeta-dom/util.js\";\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (v) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(v[key], v) : value);\r\n            }\r\n            return extend({}, v, key);\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { always, any, combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, either, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, reject, resolve, resolveAll, setImmediateOnce, single, splice, throws, watch } from \"./include/zeta-dom/util.js\";\r\nimport { ZetaEventContainer } from \"./include/zeta-dom/events.js\";\r\nimport dom, { focus } from \"./include/zeta-dom/dom.js\";\r\nimport { preventLeave } from \"./include/zeta-dom/domLock.js\";\r\nimport { parentsAndSelf } from \"./include/zeta-dom/domUtil.js\";\r\nimport { useMemoizedFunction, useObservableProperty, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst presets = new WeakMap();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction isEmpty(value) {\r\n    return isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && (field.props.isEmpty || field.preset.isEmpty || isEmpty)(field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = [name];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path).parent === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        emitter.emit('dataChange', form, keys(props));\r\n        if (form.validateOnChange) {\r\n            validateFields(form, grep(state.fields, function (v) {\r\n                return props[v.path] && v.props.validateOnChange !== false;\r\n            }));\r\n        }\r\n        if (form.preventLeave && !state.unlock) {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(state.ref || dom.root, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || reject();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            mapGet(changedProps, context, Object)[path] = true;\r\n            setImmediateOnce(emitDataChangeEvent);\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').context !== context) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (t[p] !== v || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var field = state.fields[uniqueId + '.' + p];\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    v = setValue(p, v);\r\n                    if (onChange(p) && field) {\r\n                        field.value = v;\r\n                        handleDataChange.d.add(field);\r\n                    }\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        context,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    each(initialData, function (i, v) {\r\n        setValue(i, v);\r\n    });\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        initialValue: initialValue,\r\n        value: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (field.controlled) {\r\n                field.onChange(v);\r\n            } else {\r\n                field.value = v;\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'value', initialValue, function (newValue, oldValue) {\r\n        newValue = (field.preset.normalizeValue || pipe)(newValue, field.props);\r\n        if (newValue !== oldValue && _(oldValue)) {\r\n            field.dict[field.name] = newValue;\r\n            return oldValue;\r\n        }\r\n        return newValue;\r\n    });\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'value', function (v) {\r\n        if (field.dict) {\r\n            field.dict[field.name] = v;\r\n        } else if (!field.controlled) {\r\n            field.onChange(v);\r\n        }\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        if (field.key) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(form, state, field, preset, props, controlled, dict, key) {\r\n    var hasErrorProp = 'error' in props;\r\n    var prevKey = field.key || key;\r\n    extend(field, { form, props, preset, controlled, dict, key });\r\n    if (form && key) {\r\n        field.name = key.slice(9);\r\n        field.path = getPath(form, dict, field.name);\r\n        if (prevKey !== key) {\r\n            field.locks = [];\r\n            if (!hasErrorProp) {\r\n                field.error = '';\r\n            }\r\n        }\r\n        state.fields[key] = field;\r\n    }\r\n    if (hasErrorProp) {\r\n        field.error = props.error;\r\n    }\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            state.fields[key] = field;\r\n        }\r\n        return function () {\r\n            if (state && state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount) {\r\n                    _(dict).delete(key.slice(9));\r\n                }\r\n                state.setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var state = _(form);\r\n    var imlicitErrors = map(fields, hasImplicitError);\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        return emitter.emit('validate', form, { name, value }) || ((field.props || '').onValidate || noop)(value, name, form);\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n            result[i] = result[i] || imlicitErrors[i];\r\n        });\r\n        state.setValid();\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element = this.element(key);\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        var self = this;\r\n        _(self).viewState.set(self.toJSON());\r\n        self.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        each(data || state.initialData, function (i, v) {\r\n            dict.set(i, v);\r\n        });\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix[0]) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useEffect(function () {\r\n        return combineFn(\r\n            form.on('dataChange', forceUpdate),\r\n            form.on('reset', forceUpdate),\r\n            function () {\r\n                (_(form).unlock || noop)();\r\n                if (form.autoPersist) {\r\n                    form.persist();\r\n                }\r\n            }\r\n        );\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    }\r\n    if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const preset = type ? mapGet(presets, type, type) : {};\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    const dict = useContext(FormObjectContext);\r\n    const form = dict && _(dict).context;\r\n    const state = form && _(form);\r\n    const name = props.name || '';\r\n    const key = form && name && (keyFor(dict) + '.' + name);\r\n    const controlled = prop in props;\r\n\r\n    const field = useState(function () {\r\n        var initialValue = controlled ? props[prop] : (preset.normalizeValue || pipe)(form && name in dict ? dict[name] : defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n        return createFieldState(initialValue);\r\n    })[0];\r\n    useFormFieldInternal(form, state, field, preset, props, controlled, dict, key);\r\n    if (controlled) {\r\n        field.value = props[prop];\r\n    }\r\n    if (form && key) {\r\n        if (!(name in dict)) {\r\n            field.value = _(dict).set(name, field.initialValue);\r\n        } else if (!controlled) {\r\n            field.value = dict[name];\r\n        }\r\n    }\r\n    const state1 = (preset.postHook || pipe)({\r\n        form: form,\r\n        key: key,\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        elementRef: field.elementRef\r\n    }, props);\r\n    state1.value = useObservableProperty(field, 'value');\r\n    state1.error = String(useObservableProperty(field, 'error'));\r\n    return state1;\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var dict = useContext(FormObjectContext);\r\n    if (!_(dict)) {\r\n        throws('Missing form context');\r\n    }\r\n    var fieldRef = useRef();\r\n    var form = _(dict).context;\r\n    var state = _(form);\r\n    var name = props.name;\r\n    var value = props.value;\r\n    if (name) {\r\n        value = isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else if (!(_(value) || '').context) {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var key = state.paths[keyFor(value)];\r\n    if (typeof (state.fields[key] || '').controlled !== 'boolean') {\r\n        var field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(form, state, field, {}, props, 0, dict, key);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return useMemo(function () {\r\n        return (items || []).map(function (v) {\r\n            return typeof v === 'object' ? v : { label: String(v), value: v };\r\n        });\r\n    }, [items]);\r\n}\r\n\r\nexport function TextField() {\r\n    this.defaultValue = '';\r\n    this.postHook = function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    };\r\n}\r\n\r\nexport function ChoiceField() {\r\n    this.defaultValue = '';\r\n    this.postHook = function (state, props) {\r\n        var items = normalizeChoiceItems(props.items);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        useEffect(() => {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    };\r\n}\r\n\r\nexport function MultiChoiceField() {\r\n    this.defaultValue = [];\r\n    this.normalizeValue = function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    };\r\n    this.postHook = function (state, props) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = normalizeChoiceItems(props.items);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = useMemoizedFunction(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index < 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        useEffect(() => {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(state.value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    };\r\n}\r\n\r\nexport function ToggleField() {\r\n    this.defaultValue = false;\r\n    this.valueProperty = 'checked';\r\n    this.normalizeValue = function (value) {\r\n        return !!value;\r\n    };\r\n    this.isEmpty = function (value) {\r\n        return !value;\r\n    };\r\n}\r\n\r\nexport function NumericField() {\r\n    this.normalizeValue = function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    };\r\n    this.postHook = function (state, props) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        useEffect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    };\r\n}\r\n","export * from \"./css.js\";\r\nexport * from \"./dataView.js\";\r\nexport * from \"./form.js\";\r\nexport * from \"./hooks.js\";\r\nexport * from \"./util.js\";\r\nexport * from \"./viewState.js\";\r\n","import zeta from \"zeta-dom\";const _defaultExport = zeta; export default _defaultExport;","import zeta from \"zeta-dom/index\";\r\nexport default zeta;\r\n","import * as all from \"./index.js\";\r\nexport default all;\r\n\r\nimport zeta from \"./include/zeta-dom/index.js\";\r\nzeta.react = all;\r\n"],"names":["zeta","util","noop","pipe","either","is","isUndefinedOrNull","isArray","isFunction","isThenable","isPlainObject","isArrayLike","makeArray","extend","each","map","grep","splice","any","single","kv","fill","pick","exclude","mapObject","mapGet","mapRemove","arrRemove","setAdd","equal","combineFn","executeOnce","createPrivateStore","setTimeout","setTimeoutOnce","setInterval","setIntervalSafe","setImmediate","setImmediateOnce","throws","throwNotFunction","errorWithCode","isErrorWithCode","keys","values","hasOwnProperty","getOwnPropertyDescriptors","define","definePrototype","defineOwnProperty","defineGetterProperty","defineHiddenProperty","defineAliasProperty","defineObservableProperty","watch","watchOnce","watchable","inherit","freeze","deepFreeze","iequal","randomId","repeat","camel","hyphenate","ucfirst","lcfirst","trim","matchWord","htmlDecode","resolve","reject","always","resolveAll","retryable","deferrable","catchAsync","setPromiseTimeout","delay","makeAsync","domReady","tagName","isVisible","matchSelector","comparePosition","connected","containsOrEquals","acceptNode","combineNodeFilters","iterateNode","iterateNodeToArray","getCommonAncestor","parentsAndSelf","selectIncludeSelf","selectClosestRelative","createNodeIterator","createTreeWalker","bind","bindUntil","dispatchDOMMouseEvent","removeNode","getClass","setClass","getScrollOffset","getScrollParent","getContentRect","scrollBy","scrollIntoView","makeSelection","getRect","getRects","toPlainRect","rectEquals","rectCovers","rectIntersects","pointInRect","mergeRect","elementFromPoint","_defaultExport","dom","textInputAllowed","beginDrag","beginPinchZoom","getShortcut","setShortcut","focusable","focused","setModal","releaseModal","retainFocus","releaseFocus","iterateFocusPath","focus","lock","locked","cancelLock","subscribeAsync","notifyAsync","preventLeave","ZetaEventContainer","EventContainer","useCallback","useEffect","useMemo","useRef","useState","fnWeakMap","WeakMap","container","useUpdateTrigger","setState","useMemoizedFunction","callback","fn","cb","get","apply","arguments","set","useObservableProperty","obj","key","forceUpdate","value","ref","current","v","useAsync","init","deps","debounce","state","element","currentPromise","nextResult","loading","undefined","error","elementRef","on","event","handler","add","onError","e","call","refresh","force","waitFor","d","then","result","promise","resolved","disposed","emit","data","root","concat","useRefInitCallback","args","WeakSet","useDispose","dispose","callbacks","length","push","useErrorHandlerRef","useErrorHandler","reemitting","filter","isErrorOf","reemitError","catchError","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","i","setValue","Object","useBreakpoint","createContext","useContext","ViewStateProviderContext","noopStorage","ViewStateProvider","Provider","useViewState","uniqueId","provider","getState","_","proto","DataView","prototype","emitter","compare","a","b","x","y","String","localeCompare","caseFirst","filters","sortBy","sortOrder","pageSize","self","defaults","pageIndex","items","onUpdated","sorted","filtered","emitAsync","itemCount","getView","sort","filteredItems","slice","prop","item","dir","Map","toJSON","reset","newValue","useDataView","persistKey","viewState","dataView","onPopState","createElement","Fragment","lazy","Suspense","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","children","partial","combineRef","toRefCallback","withSuspense","factory","fallback","Component","props","forwardRef","presets","instances","changedProps","fieldTypes","TextField","toggle","ToggleField","choice","ChoiceField","FormObjectContext","FormObjectProvider","ValidationError","kind","message","isEmpty","hasImplicitError","field","required","preset","cloneValue","keyFor","resolvePathInfo","form","path","arr","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","replace","validateOnChange","validateFields","unlock","Promise","handleDataChange","local","Set","onChange","createDataObject","context","initialData","target","p","proxy","deleteValue","Proxy","t","prev","index","deleteProperty","createFieldState","initialValue","controlled","setError","isValid","oldValue","normalizeValue","dict","wrapErrorResult","useFormFieldInternal","hasErrorProp","prevKey","locks","clearWhenUnmount","setValid","disabled","imlicitErrors","validate","onValidate","promises","next","shift","forEach","toString","FormContext","formatError","normalizeOptions","options","autoPersist","persist","restore","getValue","getError","prefix","w","useFormContext","useFormField","type","defaultValue","valueProperty","state1","postHook","combineValidators","validators","reduce","registerFieldType","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","normalizeChoiceItems","label","inputProps","autoComplete","enterKeyHint","selectedIndex","findIndex","allowUnselect","selectedItem","MultiChoiceField","allowCustomValues","isUnknown","some","toggleValue","selected","indexOf","cur","NumericField","isNaN","min","max","step","allowEmpty","rounded","Math","round","all","react"],"sourceRoot":""}