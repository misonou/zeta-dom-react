{"version":3,"file":"zeta-dom-react.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":[\"React\"]}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":[\"ReactDOM\"]}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/index.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__311__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__311__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, definePrototype, delay, each, either, exclude, extend, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, definePrototype, delay, each, either, exclude, extend, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, catchAsync, clearImmediateOnce, combineFn, deferrable, delay, each, extend, is, isArray, isErrorWithCode, isFunction, makeArray, makeAsync, map, mapRemove, noop, pipe, resolve, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (!v.d) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i)(v.d === false);\r\n        }\r\n    });\r\n}\r\n\r\nfunction useSingletonEffectImpl(target, dispose) {\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose(true);\r\n        };\r\n    }, [target]);\r\n}\r\n\r\nfunction useSingletonEffectImplDev(target, dispose) {\r\n    if (!singletons.has(target)) {\r\n        singletons.set(target, dispose);\r\n        clearImmediateOnce(clearUnusedSingletons);\r\n    }\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = !!flag;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    const setState = useState()[1];\r\n    return useCallback(function () {\r\n        setState({});\r\n    }, []);\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useRef();\r\n    ref.current = isFunction(callback) || noop;\r\n    return useCallback(function () {\r\n        return ref.current.apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const forceUpdate = useUpdateTrigger();\r\n    const value = obj[key];\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    useEffect(function () {\r\n        var cb = function (v) {\r\n            if (v !== ref.current) {\r\n                forceUpdate();\r\n            }\r\n        };\r\n        cb(obj[key]);\r\n        return watch(obj, key, cb);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const state = useSingleton(function () {\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function (force) {\r\n                if (debounce && !force) {\r\n                    nextResult = nextResult || deferrable();\r\n                    nextResult.waitFor(delay(debounce));\r\n                    return nextResult.d || (nextResult.d = muteRejection(nextResult.then(function () {\r\n                        nextResult = null;\r\n                        return state.refresh(true);\r\n                    })));\r\n                }\r\n                var controller = AbortController ? new AbortController() : { abort: noop };\r\n                if (currentController) {\r\n                    currentController.abort();\r\n                }\r\n                extend(state, { loading: true, error: undefined });\r\n                var result = makeAsync(init)(controller.signal);\r\n                var promise = always(result, function (resolved, value) {\r\n                    if (currentController === controller) {\r\n                        if (resolved) {\r\n                            extend(state, { loading: false, value: value });\r\n                            container.emit('load', state, { data: value });\r\n                        } else {\r\n                            extend(state, { loading: false, value: undefined, error: value });\r\n                            if (!container.emit('error', state, { error: value })) {\r\n                                throw value;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                currentController = controller;\r\n                notifyAsync(element || dom.root, promise);\r\n                return result;\r\n            },\r\n            abort: function (reason) {\r\n                if (currentController) {\r\n                    currentController.abort(reason);\r\n                    currentController = null;\r\n                }\r\n                state.loading = false;\r\n            }\r\n        };\r\n    }, function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            setImmediateOnce(state.refresh);\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    useObservableProperty(state, 'loading');\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, onDispose) {\r\n    const target = isFunction(factory) ? useMemo(factory, []) : useMemo(pipe.bind(0, factory), [factory]);\r\n    useSingletonEffect(target, function () {\r\n        (onDispose || target.dispose || noop).call(target);\r\n    });\r\n    return target;\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const reemitting = useRef(false);\r\n    const ref = useRef(null);\r\n    const args = makeArray(arguments);\r\n    const handler = useState(function () {\r\n        return {\r\n            ref: function (element) {\r\n                ref.current = element;\r\n                init(element);\r\n            },\r\n            emit: function (error) {\r\n                return catchError(error) || reemitError(error) || resolve();\r\n            },\r\n            catch: function (filter, callback) {\r\n                var isErrorOf;\r\n                if (!callback) {\r\n                    callback = filter;\r\n                } else if (!isArray(filter)) {\r\n                    isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n                } else {\r\n                    isErrorOf = function (error, filter) {\r\n                        return any(filter, function (filter) {\r\n                            return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                        });\r\n                    };\r\n                }\r\n                return container.add(handler, isErrorOf ? 'error' : 'default', function (e) {\r\n                    if ((isErrorOf || pipe)(e.error, filter)) {\r\n                        return callback(e.error);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    const reemitError = useCallback(function (error) {\r\n        try {\r\n            reemitting.current = true;\r\n            return reportError(error, ref.current);\r\n        } finally {\r\n            reemitting.current = false;\r\n        }\r\n    }, []);\r\n    const catchError = useCallback(function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    }, []);\r\n    const init = useRefInitCallback(function (element) {\r\n        dom.on(element, 'error', function (e) {\r\n            if (!reemitting.current) {\r\n                return catchError(e.error);\r\n            }\r\n        });\r\n    });\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(callback, function (used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    });\r\n}\r\n","import { useEffect, useMemo, useState } from \"react\";\r\nimport { defineObservableProperty, each, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    var state = useState(mq.matches);\r\n    useEffect(function () {\r\n        return bind(mq, 'change', function () {\r\n            state[1](mq.matches);\r\n        });\r\n    }, [mq]);\r\n    return state[0];\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    watch(values, true);\r\n    each(breakpoints, function (i, v) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            setValue(mq.matches);\r\n        });\r\n    });\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, forceUpdate);\r\n            }, []);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\nconst noopStorage = Object.freeze({\r\n    get: noop,\r\n    set: noop\r\n});\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton((provider && key && provider.getState(uniqueId, key)) || noopStorage);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    state.callback = watch(filters, false);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        values = values || state.defaults;\r\n        state.callback(function () {\r\n            extend(self.filters, values.filters);\r\n        });\r\n        return extend(self, values);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (v) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(v[key], v) : value);\r\n            }\r\n            return extend({}, v, key);\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return useMemo(function () {\r\n        return (items || []).map(function (v) {\r\n            return typeof v === 'object' ? v : { label: String(v), value: v };\r\n        });\r\n    }, [items]);\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props) {\r\n        var items = normalizeChoiceItems(props.items);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        useEffect(() => {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { useMemo, useEffect } from \"react\";\r\nimport { define, definePrototype, extend, isFunction } from \"zeta-dom/util\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\n\r\nconst re = /^-?\\d{4,}-\\d{2}-\\d{2}$/;\r\n\r\n// method mapping for relative date units\r\nconst units = {\r\n    y: ['getFullYear', 'setFullYear'],\r\n    m: ['getMonth', 'setMonth'],\r\n    d: ['getDate', 'setDate']\r\n};\r\nunits.w = units.d;\r\n\r\nfunction parseRelativeDate(str) {\r\n    var date = new Date();\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    str.toLowerCase().replace(/([+-]?)(\\d+)([dwmy])/g, function (v, a, b, c) {\r\n        date[units[c][1]](date[units[c][0]]() + (b * (a === '-' ? -1 : a === '+' ? 1 : dir) * (c === 'w' ? 7 : 1)));\r\n    });\r\n    return date;\r\n}\r\n\r\nfunction normalizeDate(date) {\r\n    if (typeof date === 'string') {\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        date = date[0] === '+' || date[0] === '-' ? parseRelativeDate(date) : Date.parse(date);\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    if (!isNaN(date)) {\r\n        // counter UTC conversion due to toISOString\r\n        var tz = new Date(date).getTimezoneOffset() * 60000;\r\n        var str = new Date(date - tz).toISOString();\r\n        return str.slice(0, str.indexOf('T', 10));\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value));\r\n    },\r\n    postHook: function (state, props) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = normalizeDate(props.min);\r\n        var max = normalizeDate(props.max);\r\n        var displayText = useMemo(function () {\r\n            return value && props.formatDisplay ? props.formatDisplay(toDateObject(value)) : value;\r\n        }, [value]);\r\n        useEffect(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: useMemoizedFunction(function (v) {\r\n                v = isFunction(v) ? v(state.value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { useEffect } from \"react\";\r\nimport { useMemoizedFunction } from \"../hooks.js\";\r\nimport { definePrototype, either, extend, freeze, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = ChoiceField.normalizeItems(props.items);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = useMemoizedFunction(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        useEffect(() => {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(state.value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { useEffect } from \"react\";\r\nimport { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        useEffect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { useCallback } from \"react\";\r\nimport { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state) {\r\n        const toggleValue = useCallback(function () {\r\n            state.setValue(function (v) {\r\n                return !v;\r\n            });\r\n        }, []);\r\n        return extend(state, {\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useRef, useState } from \"react\";\r\nimport { always, any, createPrivateStore, define, defineObservableProperty, definePrototype, each, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst presets = new WeakMap();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction isEmpty(field, value) {\r\n    var fn = field.props.isEmpty || field.preset.isEmpty;\r\n    return fn ? fn(value) : isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && isEmpty(field, field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = [name];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path).parent === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(state.fields, function (v) {\r\n            return props[v.path];\r\n        });\r\n        emitter.emit('dataChange', form, keys(props));\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                field.value = target[p];\r\n                if (!sameValueZero(field.value, target[p])) {\r\n                    setValue(p, field.value);\r\n                    return;\r\n                }\r\n                handleDataChange.d.add(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            if (context !== rootForm) {\r\n                mapGet(changedProps, context, Object)[path] = true;\r\n                setImmediateOnce(emitDataChangeEvent);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').context !== context) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    setValue(p, v);\r\n                    onChange(p, state.fields[uniqueId + '.' + p]);\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        context,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    each(initialData, function (i, v) {\r\n        setValue(i, v);\r\n    });\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        value: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (!field.controlled) {\r\n                field.version++;\r\n            }\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (!field.controlled) {\r\n                field.value = v;\r\n            } else if (!sameValueZero(v, field.value)) {\r\n                field.onChange(v);\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.key ? field.form : null, [field]);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'value', initialValue, function (newValue, oldValue) {\r\n        newValue = (field.preset.normalizeValue || pipe)(newValue, field.props);\r\n        if (newValue !== oldValue && _(oldValue) && newValue !== field.dict[field.name]) {\r\n            field.dict[field.name] = newValue;\r\n            return oldValue;\r\n        }\r\n        return newValue;\r\n    });\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'value', function (v) {\r\n        field.version++;\r\n        if (field.key) {\r\n            field.dict[field.name] = v;\r\n        } else if (!field.controlled) {\r\n            field.onChange(v);\r\n        }\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        field.version++;\r\n        if (field.key) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(form, state, field, preset, props, controlled, dict, key) {\r\n    var hasErrorProp = 'error' in props;\r\n    var prevKey = field.key || key;\r\n    extend(field, { form, props, preset, controlled, dict, key });\r\n    if (form && key) {\r\n        field.name = key.slice(9);\r\n        field.path = getPath(form, dict, field.name);\r\n        if (prevKey !== key) {\r\n            field.locks = [];\r\n            if (!hasErrorProp) {\r\n                field.error = '';\r\n            }\r\n        }\r\n        state.fields[key] = field;\r\n    } else {\r\n        field.path = '';\r\n    }\r\n    if (hasErrorProp) {\r\n        field.error = props.error;\r\n    }\r\n    useEffect(function () {\r\n        if (form && key) {\r\n            state.fields[key] = field;\r\n        }\r\n        return function () {\r\n            if (state && state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount || field.form === rootForm) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[key.slice(9)];\r\n                        }\r\n                    });\r\n                }\r\n                state.setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var result = emitter.emit('validate', form, { name, value });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        var state = _(form);\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(this).fields, function (v) {\r\n                return (v.error && (key & 1)) || (isEmpty(v, v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = this.element(key);\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        each(data || state.initialData, function (i, v) {\r\n            dict.set(i, v);\r\n        });\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix[0]) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    }\r\n    if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const preset = type ? mapGet(presets, type, type) : {};\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    const dict = useContext(FormObjectContext);\r\n    const form = dict && _(dict).context;\r\n    const state = form && _(form);\r\n    const name = props.name || '';\r\n    const key = form && name && (keyFor(dict) + '.' + name);\r\n    const controlled = prop in props;\r\n\r\n    const field = useState(function () {\r\n        var initialValue = controlled ? props[prop] : (preset.normalizeValue || pipe)(defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n        return createFieldState(initialValue);\r\n    })[0];\r\n    useFormFieldInternal(form, state, field, preset, props, controlled, dict, key);\r\n    if (controlled) {\r\n        field.value = props[prop];\r\n    }\r\n    if (form && key) {\r\n        if (!(name in dict)) {\r\n            if (isEmpty(field, field.initialValue)) {\r\n                field.value = _(dict).set(name, field.initialValue);\r\n            } else {\r\n                dict[name] = field.initialValue;\r\n            }\r\n            field.version = 0;\r\n        } else if (!controlled) {\r\n            field.value = dict[name];\r\n        }\r\n    }\r\n    const state1 = (preset.postHook || pipe)({\r\n        form: form,\r\n        key: key,\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        validate: field.validate,\r\n        elementRef: field.elementRef\r\n    }, props);\r\n    state1.value = field.value;\r\n    state1.error = String(field.error);\r\n    useObservableProperty(field, 'version');\r\n    return state1;\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var form = _(dict).context;\r\n    var state = _(form);\r\n    var value = props.value;\r\n    if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else if (!(_(value) || '').context) {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var key = state.paths[keyFor(value)];\r\n    if (typeof (state.fields[key] || '').controlled !== 'boolean') {\r\n        var field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(form, state, field, {}, props, 0, dict, key);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","export * from \"./css.js\";\r\nexport * from \"./dataView.js\";\r\nexport * from \"./form.js\";\r\nexport * from \"./hooks.js\";\r\nexport * from \"./util.js\";\r\nexport * from \"./viewState.js\";\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["lib","_lib$util","util","always","any","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","deferrable","define","defineGetterProperty","defineObservableProperty","definePrototype","delay","each","either","exclude","extend","freeze","grep","hasOwnProperty","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","ZetaEventContainer","StrictMode","createElement","ReactDOM","extraRender","flushSync","TestComponent","container","document","element","createRoot","render","IS_DEV","useCallback","useEffect","useMemo","useRef","useState","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AbortController","window","useSingletonEffect","useSingletonEffectImplDev","useSingletonEffectImpl","e","persisted","muteRejection","promise","clearUnusedSingletons","i","v","d","add","target","dispose","has","set","cb","flag","get","useUpdateTrigger","setState","useMemoizedFunction","callback","ref","current","apply","arguments","useObservableProperty","obj","key","forceUpdate","value","useAsync","init","deps","debounce","state","useSingleton","currentController","nextResult","loading","undefined","error","elementRef","on","event","handler","onError","call","refresh","force","waitFor","then","controller","abort","result","signal","resolved","emit","data","root","reason","concat","useRefInitCallback","args","useDispose","callbacks","length","push","isSingletonDisposed","factory","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","catchError","reemitError","_catch","filter","isErrorOf","useUnloadEffect","used","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","values","setValue","Object","useBreakpoint","createContext","useContext","ViewStateProviderContext","noopStorage","ViewStateProvider","Provider","useViewState","uniqueId","provider","getState","_","proto","DataView","prototype","emitter","compare","a","b","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","self","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","newValues","sorted","filtered","getView","sort","filteredItems","slice","prop","item","dir","toggleSort","toJSON","reset","newValue","max","min","pageCount","oldValue","useDataView","persistKey","viewState","onPopState","Fragment","lazy","Suspense","boundEvents","WeakMap","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","children","partial","fn","combineRef","toRefCallback","withSuspense","fallback","Component","props","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","defaultValue","postHook","selectedIndex","findIndex","allowUnselect","selectedItem","re","units","m","w","parseRelativeDate","str","date","Date","toLowerCase","replace","c","normalizeDate","test","parse","setHours","clampValue","ts","toDateObject","isNaN","toDateString","tz","getTimezoneOffset","toISOString","indexOf","DateField","normalizeValue","displayText","formatDisplay","clamped","MultiChoiceField","allowCustomValues","isUnknown","some","toggleValue","selected","cur","NumericField","step","allowEmpty","rounded","round","TextField","form","inputProps","type","autoComplete","enterKeyHint","ToggleField","valueProperty","isEmpty","forwardRef","presets","instances","changedProps","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","field","preset","hasImplicitError","required","cloneValue","keyFor","resolvePathInfo","path","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","updatedFields","validateFields","version","validateOnChange","unlock","getEventSource","Promise","handleDataChange","local","onChange","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","createFieldState","initialValue","controlled","setError","isValid","validate","dict","wrapErrorResult","useFormFieldInternal","hasErrorProp","prevKey","locks","clearWhenUnmount","setValid","disabled","onValidate","promises","next","shift","forEach","toString","formatError","normalizeOptions","options","autoPersist","formPersist","ERROR_FIELD","EMPTY_FIELD","persist","restore","clear","getValue","getErrors","errorFields","reduce","getError","prefix","useFormContext","dataChange","useFormField","state1","combineValidators","validators","registerFieldType","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}