{"version":3,"file":"zeta-dom-react.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/react.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/errorCode.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/index.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__33__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, errorWithCode, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValue, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, errorWithCode, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValue, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"@misonou/hoist/react\";\r\nconst { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } = lib;\r\nexport { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import lib from \"zeta-dom\";\r\nconst errorCode = lib.ErrorCode;\r\nconst { cancelled } = errorCode;\r\nexport { cancelled };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { createContext, createElement, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, defineOwnProperty, delay, each, equal, errorWithCode, extend, fill, freeze, is, isArray, isErrorWithCode, isFunction, isUndefinedOrNull, makeArray, makeAsync, map, mapRemove, noop, pick, pipe, resolve, sameValue, sameValueZero, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport * as ErrorCode from \"zeta-dom/errorCode\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst _ = /*#__PURE__*/ createPrivateStore();\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AsyncScopeContext = createContext(null);\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (clearUnusedSingletons.d & (v.d || 1)) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i).call(i, i, v.d === 2);\r\n        }\r\n    });\r\n    clearUnusedSingletons.d = 0;\r\n}\r\n\r\nfunction useSingletonEffectImpl(factory, dispose, deps) {\r\n    var target = useMemo(factory, deps);\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose.call(target, target, true);\r\n        };\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction useSingletonEffectImplDev(factory, dispose, deps) {\r\n    var target = useMemo(function () {\r\n        var target = factory();\r\n        if (!singletons.has(target)) {\r\n            singletons.set(target, dispose);\r\n            clearUnusedSingletons.d = 0;\r\n            clearImmediateOnce(clearUnusedSingletons);\r\n        }\r\n        return target;\r\n    }, deps);\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = flag ? 4 : 2;\r\n            clearUnusedSingletons.d |= flag ? 1 : 2;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction createRefInitCallback(set, init, args) {\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function createAsyncScope(element) {\r\n    return {\r\n        errorHandler: createErrorHandler(element),\r\n        Provider: function (props) {\r\n            return createElement(AsyncScopeContext.Provider, { value: element }, props.children);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useAutoSetRef(value) {\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    return ref;\r\n}\r\n\r\nexport function useEagerReducer(reducer, init) {\r\n    var state = useState(function () {\r\n        var value = isFunction(init) ? init() : init;\r\n        var fn = function (newValue) {\r\n            newValue = reducer(value, newValue);\r\n            if (!sameValue(newValue, value)) {\r\n                value = newValue;\r\n                state[1]([value, fn]);\r\n            }\r\n        };\r\n        return [value, fn];\r\n    });\r\n    return state[0];\r\n}\r\n\r\nexport function useEagerState(init) {\r\n    return useEagerReducer(function (prevState, state) {\r\n        return isFunction(state) ? state(prevState) : state;\r\n    }, init);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    return useReducer(function () {\r\n        return {};\r\n    })[1];\r\n}\r\n\r\nexport function useValueTrigger(value, comparer) {\r\n    var state = useEagerReducer(function (ref, value) {\r\n        var current = ref.current;\r\n        return sameValue(current, value) || (comparer && comparer(current, value)) ? ref : { current: value };\r\n    }, {});\r\n    state[0].current = value;\r\n    return state[1];\r\n}\r\n\r\nexport function useEventTrigger(obj, event, selector, initialState) {\r\n    const state = useEagerState(initialState);\r\n    useEffect(function () {\r\n        var callback = function (e) {\r\n            state[1](selector ? selector.bind(this, e) : {});\r\n        };\r\n        return obj.addEventListener ? bind(obj, event, callback) : obj.on(fill(event, callback));\r\n    }, [obj, event]);\r\n    return selector ? state[0] : undefined;\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useAutoSetRef(callback);\r\n    return useCallback(function () {\r\n        return (isFunction(ref.current) || noop).apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key, comparer) {\r\n    const value = obj[key];\r\n    const notifyChange = useValueTrigger(value, comparer);\r\n    useEffect(function () {\r\n        notifyChange(obj[key]);\r\n        return watch(obj, key, notifyChange);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const scopeElement = useContext(AsyncScopeContext);\r\n    const state = useSingleton(function () {\r\n        var lastTime = 0;\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        var reset = function (loading, value, error, reason) {\r\n            if (currentController) {\r\n                currentController.abort(reason);\r\n                currentController = null;\r\n            }\r\n            nextResult = null;\r\n            extend(state, { loading, value, error });\r\n            notifyChange([loading, value, error]);\r\n        };\r\n        var refresh = function () {\r\n            var controller = AbortController ? new AbortController() : { abort: noop };\r\n            var result = makeAsync(init)(controller.signal);\r\n            var promise = always(result, function (resolved, value) {\r\n                if (currentController === controller) {\r\n                    currentController = null;\r\n                    if (resolved) {\r\n                        reset(false, value);\r\n                        container.emit('load', state, { data: value });\r\n                    } else {\r\n                        reset(false, undefined, value);\r\n                        if (!container.emit('error', state, { error: value })) {\r\n                            throw value;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            reset(true, state.value);\r\n            lastTime = Date.now();\r\n            currentController = controller;\r\n            notifyAsync(element || scopeElement || dom.root, promise);\r\n            return result;\r\n        };\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function () {\r\n                return nextResult || (nextResult = muteRejection(new Promise(function (resolve, reject) {\r\n                    var previousController = currentController || { abort: noop };\r\n                    currentController = {\r\n                        abort: function (reason) {\r\n                            previousController.abort(reason);\r\n                            reject(reason || errorWithCode(ErrorCode.cancelled));\r\n                        }\r\n                    };\r\n                    (Date.now() - lastTime < debounce ? delay(debounce) : Promise.resolve()).then(resolve);\r\n                }).then(refresh)));\r\n            },\r\n            abort: function (reason) {\r\n                reset(false, state.value, state.error, reason);\r\n            },\r\n            reset: function () {\r\n                reset(false);\r\n                lastTime = 0;\r\n            }\r\n        };\r\n    }, [], function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            state.refresh();\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    var notifyChange = useValueTrigger([state.loading, state.value, state.error], equal);\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback() {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return createRefInitCallback(set, args[0], args);\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, deps, onDispose) {\r\n    if (isFunction(deps)) {\r\n        onDispose = deps;\r\n        deps = [];\r\n    }\r\n    onDispose = onDispose || function (target) {\r\n        (target.dispose || noop).call(target);\r\n    };\r\n    return isFunction(factory) ? useSingletonEffect(factory, onDispose, deps || []) : useSingletonEffect(pipe.bind(0, factory), onDispose, [factory]);\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function createErrorHandler(element) {\r\n    var reemitting;\r\n    var reemitError = function (error) {\r\n        try {\r\n            reemitting = true;\r\n            return reportError(error, element);\r\n        } finally {\r\n            reemitting = false;\r\n        }\r\n    };\r\n    var catchError = function (error, source) {\r\n        var data = {\r\n            error: error,\r\n            sourceElement: source ? source.target : null\r\n        };\r\n        return container.emit('error', handler, data, { source }) || container.emit('default', handler, data, { source });\r\n    };\r\n    var initElement = function (current) {\r\n        element = current;\r\n        return dom.on(current, 'error', function (e) {\r\n            return reemitting ? undefined : catchError(e.error, e);\r\n        });\r\n    };\r\n    var handler = {\r\n        emit: function (error) {\r\n            return catchError(error) || reemitError(error) || resolve();\r\n        },\r\n        catch: function (filter, callback) {\r\n            var isErrorOf = pipe;\r\n            if (!callback) {\r\n                callback = filter;\r\n            } else if (!isArray(filter)) {\r\n                isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n            } else {\r\n                isErrorOf = function (error, filter) {\r\n                    return any(filter, function (filter) {\r\n                        return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                    });\r\n                };\r\n            }\r\n            return container.add(handler, isErrorOf === pipe ? 'default' : 'error', function (e) {\r\n                if (isErrorOf(e.error, filter)) {\r\n                    return callback(e.error, pick(e, ['source', 'sourceKeyName', 'sourceElement']));\r\n                }\r\n            });\r\n        }\r\n    };\r\n    if (element) {\r\n        initElement(element);\r\n    } else {\r\n        handler.ref = createRefInitCallback(new WeakSet(), initElement, []);\r\n    }\r\n    return handler;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const args = makeArray(arguments);\r\n    const handler = useState(createErrorHandler)[0];\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(pipe.bind(0, callback), function (target, used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    }, []);\r\n}\r\n\r\nexport function createDependency(defaultValue) {\r\n    var Provider = freeze({});\r\n    var Consumer = freeze({});\r\n    var dependency = { Provider, Consumer };\r\n    var values = _(dependency, extend([], dependency, {\r\n        current: defaultValue,\r\n        update: function () {\r\n            var matched = any(values, function (v) {\r\n                return !isUndefinedOrNull(v.value);\r\n            });\r\n            values.current = matched ? matched.value : defaultValue;\r\n        }\r\n    }));\r\n    _(Provider, values);\r\n    _(Consumer, values);\r\n    return freeze(dependency);\r\n}\r\n\r\nexport function useDependency(dependency, value, deps) {\r\n    var values = _(dependency);\r\n    if (dependency === values.Provider) {\r\n        var wrapper = useSingleton(function () {\r\n            var obj = {};\r\n            return values.push(obj) && obj;\r\n        }, [values], function () {\r\n            arrRemove(values, wrapper);\r\n            values.update();\r\n        });\r\n        useMemo(function () {\r\n            defineOwnProperty(wrapper, 'value', isFunction(value) ? value() : value, true);\r\n            values.update();\r\n        }, [wrapper].concat(deps || [value]));\r\n        return wrapper;\r\n    } else {\r\n        return useObservableProperty(values, 'current');\r\n    }\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { combineFn, defineObservableProperty, hasOwnProperty, makeArray, map, single, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useEventTrigger, useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    useEventTrigger(mq, 'change');\r\n    return mq.matches;\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    var handleChanges = watch(values, true);\r\n    var updateAll = combineFn(map(breakpoints, function (v, i) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            if (mq.matches !== values[i]) {\r\n                handleChanges(updateAll);\r\n            }\r\n        });\r\n        return function () {\r\n            return setValue(mq.matches);\r\n        };\r\n    }));\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var deps = makeArray(arguments);\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, function (e) {\r\n                    if (!deps.length || single(deps, hasOwnProperty.bind(0, e.newValues))) {\r\n                        forceUpdate();\r\n                    }\r\n                });\r\n            }, deps);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton(function () {\r\n        return (provider && key && provider.getState(uniqueId, key)) || {\r\n            get: noop,\r\n            set: noop\r\n        };\r\n    }, [provider, key, uniqueId]);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    watch(self, onUpdated);\r\n    watch(filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    get hasPreviousPage() {\r\n        return this.pageIndex > 0;\r\n    },\r\n    get hasNextPage() {\r\n        return this.pageIndex < this.pageCount - 1;\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        return extend(self, values || state.defaults);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, sameValue, single, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\nconst partialCallbacks = new WeakMap();\r\n\r\nfunction setPartialState(setState, key, value) {\r\n    setState(function (current) {\r\n        if (typeof key === 'string') {\r\n            key = kv(key, isFunction(value) ? value(current[key], current) : value);\r\n        }\r\n        return single(key, function (v, i) {\r\n            return !sameValue(v, current[i]) && extend({}, current, key);\r\n        }) || current;\r\n    });\r\n}\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var map = mapGet(partialCallbacks, setState, Map);\r\n    return mapGet(map, key, function () {\r\n        return key !== undefined ? setPartialState.bind(0, setState, key) : setPartialState.bind(0, setState);\r\n    });\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return (items || []).map(function (v) {\r\n        return typeof v === 'object' ? v : { label: String(v), value: v };\r\n    });\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props, hook) {\r\n        var allowCustomValues = !props.items;\r\n        var items = hook.memo(function () {\r\n            return normalizeChoiceItems(props.items);\r\n        }, [props.items]);\r\n        var allowUnselect = props.allowUnselect || !items[0];\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        hook.memo(function () {\r\n            if (!allowCustomValues && selectedIndex < 0) {\r\n                state.setValue(allowUnselect ? '' : items[0].value);\r\n            }\r\n        }, [state.version, selectedIndex, allowUnselect, allowCustomValues]);\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { define, definePrototype, extend, hasOwnProperty, isFunction } from \"zeta-dom/util\";\r\n\r\nconst re = /^(\\d{4}|[+-]\\d{6})-\\d{2}-\\d{2}$/;\r\nconst fn = {\r\n    y: function (d, n) { adjustMonth(d, d.getDate(), d.setFullYear(d.getFullYear() + n)) },\r\n    m: function (d, n) { adjustMonth(d, d.getDate(), d.setMonth(d.getMonth() + n)) },\r\n    d: function (d, n) { d.setDate(d.getDate() + n) },\r\n    w: function (d, n) { fn.d(d, n * 7) }\r\n};\r\nconst fn1 = {\r\n    ys: function (d) { d.setMonth(0, 1) },\r\n    ye: function (d) { d.setMonth(11, 31) },\r\n    ms: function (d) { d.setDate(1) },\r\n    me: function (d) { d.setMonth(d.getMonth() + 1, 0) },\r\n    nb: function (d, k, n, b) { fn.d(d, -((7 - k + d.getDay()) % 7 || b || 0) - 7 * (n - 1)) },\r\n    na: function (d, k, n, b) { fn.d(d, +((7 + k - d.getDay()) % 7 || b || 0) + 7 * (n - 1)) }\r\n};\r\nconst fn2 = {\r\n    \"year-start\": fn1.ys,\r\n    \"year-end\": fn1.ye,\r\n    \"month-start\": fn1.ms,\r\n    \"month-end\": fn1.me,\r\n    \"week-start\": function (d) { fn.d(d, -d.getDay()) },\r\n    \"week-end\": function (d) { fn.d(d, -d.getDay() + 6) },\r\n    \"nth-after\": function (d, n, k) { fn1.na(d, k, n, 7) },\r\n    \"nth-before\": function (d, n, k) { fn1.nb(d, k, n, 7) },\r\n    \"nth-of-year\": function (d, n, k) { fn1.ys(d), fn1.na(d, k, n) },\r\n    \"nth-of-month\": function (d, n, k) { fn1.ms(d), fn1.na(d, k, n) },\r\n    \"nth-last-of-year\": function (d, n, k) { fn1.ye(d), fn1.nb(d, k, n) },\r\n    \"nth-last-of-month\": function (d, n, k) { fn1.me(d), fn1.nb(d, k, n) }\r\n};\r\n\r\nfunction adjustMonth(d, v, _) {\r\n    if (v > 28 && d.getDate() !== v) {\r\n        d.setDate(0);\r\n    }\r\n}\r\n\r\nfunction parseRelativeDateSimple(str, date) {\r\n    var re = /([+-]?)(\\d+)([dwmy])/g, m;\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    var pos = 0;\r\n    while (m = re.exec(str)) {\r\n        if (m.index !== pos) {\r\n            break;\r\n        }\r\n        pos += m[0].length;\r\n        fn[m[3]](date, m[2] * (m[1] === '-' ? -1 : m[1] === '+' ? 1 : dir));\r\n    }\r\n    return pos !== str.length ? undefined : date;\r\n}\r\n\r\nfunction parseRelativeDate(str, date) {\r\n    if (str.length < 8 || /^[0-9+-]/.test(str)) {\r\n        return parseRelativeDateSimple(str, date);\r\n    }\r\n    var pos = str.indexOf('(');\r\n    var d = pos < 0 ? str : str.slice(0, pos);\r\n    if (!hasOwnProperty(fn2, d)) {\r\n        return;\r\n    }\r\n    var r, n, k = 0;\r\n    if (pos > 0) {\r\n        r = str.slice(pos + 1, str.lastIndexOf(')'));\r\n    }\r\n    if (r && d[0] === 'n') {\r\n        r = r.split(/\\s*,\\s*/);\r\n        n = +r[0];\r\n        k = ({ sun: 0, mon: 1, tue: 2, wed: 3, thu: 4, fri: 5, sat: 6 })[r[1]];\r\n        r = r[2];\r\n    }\r\n    if (r) {\r\n        date = parseRelativeDateSimple(r, date);\r\n    }\r\n    if (date && k !== undefined) {\r\n        fn2[d](date, n, k);\r\n        return date;\r\n    }\r\n}\r\n\r\nfunction normalizeDate(date, base) {\r\n    if (typeof date === 'string') {\r\n        if (!date) {\r\n            return NaN;\r\n        }\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        if (base !== false) {\r\n            date = parseRelativeDate(date.toLowerCase(), base || new Date()) || date;\r\n        }\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date, false);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str, false);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    function pad(v, d) {\r\n        v = String(v);\r\n        return v.length >= d ? v : ('00000' + v).slice(-d);\r\n    }\r\n    date = new Date(date);\r\n    if (!isNaN(date)) {\r\n        var y = date.getFullYear();\r\n        return (y < 0 ? '-' + pad(Math.abs(y), 6) : y > 9999 ? '+' + pad(y, 6) : pad(y, 4)) + '-' + pad(date.getMonth() + 1, 2) + '-' + pad(date.getDate(), 2);\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject,\r\n    getDate: function (input, base) {\r\n        base = base !== undefined ? normalizeDate(base, false) : Date.now();\r\n        return isNaN(base) ? '' : toDateString(normalizeDate(input, new Date(base)));\r\n    }\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value, false));\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = hook.memo(normalizeDate, [props.min]);\r\n        var max = hook.memo(normalizeDate, [props.max]);\r\n        var formatDisplay = props.formatDisplay;\r\n        var displayText = hook.memo(function () {\r\n            return value && formatDisplay ? formatDisplay(toDateObject(value)) : value;\r\n        }, [value, formatDisplay]);\r\n        hook.memo(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: hook.callback(function (v) {\r\n                v = isFunction(v) ? v(value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, each, either, extend, freeze, grep, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = hook.memo(function () {\r\n            return ChoiceField.normalizeItems(props.items);\r\n        }, [props.items]);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = hook.callback(function (value, selected) {\r\n            state.setValue(function (arr) {\r\n                var newArr = makeArray(arr);\r\n                var updated = grep(makeArray(value), function (v) {\r\n                    var index = newArr.indexOf(v);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        if (index >= 0) {\r\n                            return newArr.splice(index, 1);\r\n                        } else if (allowCustomValues || !isUnknown(v)) {\r\n                            return newArr.push(v);\r\n                        }\r\n                    }\r\n                });\r\n                return updated.length ? newArr : arr;\r\n            });\r\n        });\r\n        var value = hook.memo(function () {\r\n            return makeArray(state.value);\r\n        }, [state.version]);\r\n        hook.memo(function () {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        }, [value, items, allowCustomValues]);\r\n        return extend(state, {\r\n            value: value,\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        hook.memo(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        return extend(state, {\r\n            toggleValue: hook.callback(function () {\r\n                state.setValue(function (v) {\r\n                    return !v;\r\n                });\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { always, any, combineFn, createPrivateStore, define, defineGetterProperty, defineObservableProperty, definePrototype, each, equal, exclude, extend, freeze, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throwNotFunction, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst changedFields = new Set();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction createHookHelper(effects) {\r\n    var states = [];\r\n    var push = function (callback, deps) {\r\n        var i = effects.i++;\r\n        states[i] = !deps || !states[i] || !equal(states[i][0], deps) ? [deps, callback.apply(null, deps)] : states[i];\r\n        return states[i][1];\r\n    };\r\n    return {\r\n        memo: push,\r\n        callback: function (callback) {\r\n            var ref = push(Object, []);\r\n            ref.current = callback;\r\n            return ref.cb || (ref.cb = function () {\r\n                return ref.current.apply(this, arguments);\r\n            });\r\n        },\r\n        effect: function (callback, deps) {\r\n            push(function () {\r\n                effects.push(throwNotFunction(callback));\r\n            }, deps);\r\n        }\r\n    };\r\n}\r\n\r\nfunction isEmpty(value) {\r\n    return isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && field.isEmpty(field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction pathContains(path, prefix) {\r\n    var len = prefix.length;\r\n    return path.slice(0, len) === prefix && (!path[len] || path[len] === '.');\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = name ? [name] : [];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path)[name ? 'parent' : 'value'] === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction getAllAncestorPaths(props) {\r\n    for (var i in props) {\r\n        while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n            props[i] = true;\r\n        }\r\n    }\r\n    return keys(props);\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    var lastChangedFields = makeArray(changedFields);\r\n    each(changedFields, function (i, v) {\r\n        v.onChange(v.value, true);\r\n    });\r\n    changedFields.clear();\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(lastChangedFields, function (v) {\r\n            return (v.form || rootForm) === form;\r\n        });\r\n        if (form !== rootForm) {\r\n            emitter.emit('dataChange', form, getAllAncestorPaths(props));\r\n        }\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function (reason) {\r\n                return emitter.emit('beforeLeave', form, { reason }) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(field) {\r\n    if (!field.controlled || field.committing) {\r\n        field.version++;\r\n        field.meta = null;\r\n        changedFields.add(field);\r\n    } else {\r\n        field.onChange(field.value);\r\n    }\r\n}\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                field.value = target[p];\r\n                handleDataChange(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange(state.fields[key]);\r\n                }\r\n            }\r\n            mapGet(changedProps, context, Object)[path] = true;\r\n            setImmediateOnce(emitDataChangeEvent);\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').state !== state) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                var prev = t[p];\r\n                var field = state.fields[uniqueId + '.' + p];\r\n                if (field) {\r\n                    v = field.normalizeValue(v);\r\n                    if (sameValueZero(v, prev)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                if (isArray(t)) {\r\n                    if (p === 'length') {\r\n                        // check for truncated indexes that would be deleted without calling the trap\r\n                        for (var index = prev - 1; index >= v; index--) {\r\n                            onChange(index);\r\n                        }\r\n                        t[p] = v;\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    if (_(v)) {\r\n                        throws(\"Cannot assign proxied data object\");\r\n                    }\r\n                    // apply changes to existing object or array when assigning new object or array\r\n                    // so that fields of the same path can have consistent key and state\r\n                    if (isArray(v) && isArray(prev)) {\r\n                        prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                        return true;\r\n                    }\r\n                    if (isPlainObject(v) && _(prev)) {\r\n                        for (var i in exclude(prev, keys(v))) {\r\n                            delete prev[i];\r\n                        }\r\n                        extend(prev, v);\r\n                        return true;\r\n                    }\r\n                }\r\n                setValue(p, v);\r\n                onChange(p, field);\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                deleteValue(p);\r\n                onChange(p);\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        state,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    for (var i in initialData) {\r\n        setValue(i, initialData[i]);\r\n    }\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v, committed) {\r\n            if (field.props.onChange && (!field.controlled || !committed)) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            var currentValue = (field.pending || field).value;\r\n            v = isFunction(v) ? v(currentValue) : v;\r\n            if (!field.controlled) {\r\n                field.dict[field.name] = v;\r\n            } else {\r\n                v = field.normalizeValue(v);\r\n                field.pending = { value: v };\r\n                changedFields.delete(field);\r\n                if (field.updating) {\r\n                    var pending = field.pending;\r\n                    setImmediate(function () {\r\n                        if (field.pending === pending && !sameValueZero(field.value, v)) {\r\n                            field.onChange(v);\r\n                        }\r\n                    });\r\n                } else if (!sameValueZero(currentValue, v)) {\r\n                    field.onChange(v);\r\n                }\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.form, [field]);\r\n        },\r\n        getMeta: function (value) {\r\n            var meta = {\r\n                empty: field.isEmpty(value)\r\n            };\r\n            return freeze((field.preset.getMeta || pipe).call(field.preset, meta, value, field.props));\r\n        },\r\n        isEmpty: function (value) {\r\n            return (field.props.isEmpty || (field.preset.isEmpty || isEmpty).bind(field.preset))(value);\r\n        },\r\n        normalizeValue: function (value) {\r\n            return (field.preset.normalizeValue || pipe).call(field.preset, value, field.props);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        if (field.form) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    defineGetterProperty(field.elementRef, 'current', function () {\r\n        return field.element || null;\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(state, field, preset, props, controlled, dict, name) {\r\n    var form = state.form === rootForm ? null : state.form;\r\n    var key = name ? keyFor(dict) + '.' + name : state.paths[keyFor(dict)];\r\n    var shouldReset = field.key !== key;\r\n    extend(field, {\r\n        form: form,\r\n        props: props,\r\n        preset: preset,\r\n        controlled: controlled,\r\n        dict: dict,\r\n        key: key,\r\n        name: name,\r\n        path: form ? getPath(form, dict, name) : '',\r\n        error: 'error' in props ? props.error : shouldReset ? '' : field.error,\r\n        locks: shouldReset ? [] : field.locks\r\n    });\r\n    var setValid = form ? state.setValid : noop;\r\n    state.fields[key] = field;\r\n    useEffect(function () {\r\n        state.fields[key] = field;\r\n        return function () {\r\n            if (state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                field.pending = false;\r\n                if (field.props.clearWhenUnmount || !form) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[name];\r\n                        }\r\n                    });\r\n                }\r\n                setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        setValid();\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    if (form === rootForm) {\r\n        form = null;\r\n    }\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var meta = field.meta || (field.meta = field.getMeta(value));\r\n        var result = emitter.emit('validate', form, { name, value, meta });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form, meta) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        (form || {}).isValid = null;\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        form: self,\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(self, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var self = this;\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(self).fields, function (v) {\r\n                return (v.error && (key & 1)) || (v.isEmpty(v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else if (key) {\r\n            element = self.element(key) || map(_(self).fields, function (v) {\r\n                return pathContains(v.path, key) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = self.element();\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        data = data || state.initialData;\r\n        for (var i in data) {\r\n            dict.set(i, data[i]);\r\n        }\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n                v.version = 0;\r\n                v.meta = null;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix.length) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                return pathContains(v.path, w);\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    } else if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const uniqueId = useState(randomId)[0];\r\n    const context = useContext(FormObjectContext);\r\n    const effects = useState([])[0];\r\n    const hook = useMemo(function () {\r\n        return type ? [new type(), createHookHelper(effects)] : [{}];\r\n    }, [type]);\r\n    const preset = hook[0];\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    var dict = context;\r\n    var name = props.name;\r\n    if (!dict || !name) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    const existing = name in dict;\r\n    const controlled = prop in props;\r\n    const field = useState(function () {\r\n        return createFieldState(controlled ? props[prop] : defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n    })[0];\r\n    const previousKey = field.key;\r\n    useFormFieldInternal(_(dict).state, field, preset, props, controlled, dict, name);\r\n\r\n    var value = controlled ? props[prop] : existing ? dict[name] : field.initialValue;\r\n    if (previousKey !== field.key) {\r\n        value = field.normalizeValue(value);\r\n    }\r\n    if (!existing && field.isEmpty(value)) {\r\n        _(dict).set(name, value);\r\n    } else {\r\n        field.committing = true;\r\n        dict[name] = value;\r\n        field.committing = false;\r\n    }\r\n    field.pending = false;\r\n    field.value = dict[name];\r\n    field.meta = field.getMeta(field.value);\r\n    if (!existing) {\r\n        field.version = 0;\r\n    }\r\n    effects.i = 0;\r\n    useEffect(function () {\r\n        combineFn(effects.splice(0))();\r\n    });\r\n    useObservableProperty(field, 'error');\r\n    useObservableProperty(field, 'version', function () {\r\n        return field.committing;\r\n    });\r\n    try {\r\n        field.updating = true;\r\n        return (preset.postHook || pipe).call(preset, {\r\n            form: context && _(context).state.form,\r\n            key: field.form ? field.key : '',\r\n            path: field.path,\r\n            value: field.value,\r\n            error: String(field.error),\r\n            version: field.version,\r\n            meta: field.meta,\r\n            setValue: field.setValue,\r\n            setError: field.setError,\r\n            validate: field.validate,\r\n            elementRef: field.elementRef\r\n        }, props, hook[1]);\r\n    } finally {\r\n        field.updating = false;\r\n    }\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name, form, meta) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name, form, meta);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var value = props.value;\r\n    if ((_(value) || '').state) {\r\n        dict = value;\r\n        name = '';\r\n    } else if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var state = _(dict).state;\r\n    var field = state.fields[state.paths[keyFor(value)]];\r\n    if (!field || field.controlled === 0) {\r\n        field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(state, field, {}, props, 0, dict, name);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","export * from \"./css.js\";\r\nexport * from \"./dataView.js\";\r\nexport * from \"./form.js\";\r\nexport * from \"./hooks.js\";\r\nexport * from \"./util.js\";\r\nexport * from \"./viewState.js\";\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["lib","_lib$util","util","always","any","arrRemove","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","define","defineGetterProperty","defineObservableProperty","defineOwnProperty","definePrototype","delay","each","either","equal","errorWithCode","exclude","extend","fill","freeze","grep","hasOwnProperty","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValue","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","Fragment","StrictMode","Suspense","createContext","createElement","forwardRef","lazy","useCallback","useContext","useEffect","useMemo","useReducer","useRef","useState","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","ZetaEventContainer","errorCode","ErrorCode","cancelled","ReactDOM","extraRender","flushSync","TestComponent","container","document","element","createRoot","render","IS_DEV","_","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AsyncScopeContext","AbortController","window","useSingletonEffect","useSingletonEffectImplDev","useSingletonEffectImpl","e","persisted","muteRejection","promise","clearUnusedSingletons","i","v","d","add","call","factory","dispose","deps","target","has","set","cb","flag","get","createRefInitCallback","init","args","apply","createAsyncScope","errorHandler","createErrorHandler","Provider","props","value","children","useAutoSetRef","ref","current","useEagerReducer","reducer","state","fn","newValue","useEagerState","prevState","useUpdateTrigger","useValueTrigger","comparer","useEventTrigger","obj","event","selector","initialState","callback","addEventListener","on","undefined","useMemoizedFunction","arguments","useObservableProperty","key","notifyChange","useAsync","debounce","scopeElement","useSingleton","lastTime","currentController","nextResult","reset","loading","error","reason","abort","refresh","controller","result","signal","resolved","emit","data","Date","now","root","elementRef","handler","onError","Promise","reject","previousController","then","concat","useRefInitCallback","useDispose","callbacks","length","push","isSingletonDisposed","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","reemitError","catchError","source","sourceElement","initElement","_catch","filter","isErrorOf","useUnloadEffect","used","createDependency","defaultValue","Consumer","dependency","values","update","matched","useDependency","wrapper","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","handleChanges","updateAll","setValue","Object","useBreakpoint","forceUpdate","newValues","ViewStateProviderContext","ViewStateProvider","useViewState","uniqueId","provider","getState","proto","DataView","prototype","emitter","compare","a","b","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","self","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","sorted","filtered","hasPreviousPage","hasNextPage","pageCount","getView","sort","filteredItems","slice","prop","item","dir","toggleSort","toJSON","max","min","oldValue","useDataView","persistKey","viewState","onPopState","boundEvents","WeakMap","partialCallbacks","setPartialState","setState","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","partial","combineRef","toRefCallback","withSuspense","fallback","Component","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","postHook","hook","allowCustomValues","memo","allowUnselect","selectedIndex","findIndex","version","selectedItem","re","n","adjustMonth","getDate","setFullYear","getFullYear","m","setMonth","getMonth","setDate","w","fn1","ys","ye","ms","me","nb","k","getDay","na","fn2","weekStart","weekEnd","nthAfter","nthBefore","nthOfYear","nthOfMonth","nthLastOfYear","nthLastOfMonth","parseRelativeDateSimple","str","date","pos","exec","parseRelativeDate","test","indexOf","r","lastIndexOf","split","sun","mon","tue","wed","thu","fri","sat","normalizeDate","base","NaN","parse","toLowerCase","setHours","clampValue","ts","toDateObject","isNaN","toDateString","pad","abs","DateField","input","normalizeValue","formatDisplay","displayText","clamped","MultiChoiceField","isUnknown","some","toggleValue","selected","newArr","updated","cur","NumericField","step","allowEmpty","rounded","round","TextField","form","inputProps","type","autoComplete","enterKeyHint","ToggleField","valueProperty","isEmpty","instances","changedProps","changedFields","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","createHookHelper","effects","states","effect","hasImplicitError","field","required","cloneValue","keyFor","resolvePathInfo","path","parent","len","name","exists","pathContains","prefix","getField","fields","getPath","paths","unshift","getAllAncestorPaths","replace","emitDataChangeEvent","lastChangedFields","onChange","clear","updatedFields","validateFields","validateOnChange","unlock","getEventSource","handleDataChange","controlled","committing","meta","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","createFieldState","initialValue","preset","committed","currentValue","pending","dict","updating","setError","validate","getMeta","empty","wrapErrorResult","isValid","useFormFieldInternal","shouldReset","locks","setValid","clearWhenUnmount","disabled","onValidate","promises","next","shift","forEach","toString","formatError","normalizeOptions","options","autoPersist","formPersist","ERROR_FIELD","EMPTY_FIELD","persist","restore","getValue","getErrors","errorFields","reduce","getError","useFormContext","dataChange","useFormField","existing","previousKey","combineValidators","validators","registerFieldType","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}