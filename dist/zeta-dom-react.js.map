{"version":3,"file":"zeta-dom-react.js","mappings":"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","sources":["webpack://zeta.react/webpack/universalModuleDefinition","webpack://zeta.react/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://zeta.react/external umd {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://zeta.react/external umd {\"commonjs\":\"zeta-dom\",\"commonjs2\":\"zeta-dom\",\"amd\":\"zeta-dom\",\"root\":\"zeta\"}","webpack://zeta.react/webpack/bootstrap","webpack://zeta.react/webpack/runtime/define property getters","webpack://zeta.react/webpack/runtime/hasOwnProperty shorthand","webpack://zeta.react/webpack/runtime/make namespace object","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/util.js","webpack://zeta.react/../zeta-dom-react|umd|C:/react.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domUtil.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/dom.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/domLock.js","webpack://zeta.react/../zeta-dom-react|umd|C:/zeta-dom/events.js","webpack://zeta.react/./src/env.umd.js","webpack://zeta.react/./src/hooks.js","webpack://zeta.react/./src/css.js","webpack://zeta.react/./src/viewState.js","webpack://zeta.react/./src/dataView.js","webpack://zeta.react/./src/util.js","webpack://zeta.react/./src/fields/ChoiceField.js","webpack://zeta.react/./src/fields/DateField.js","webpack://zeta.react/./src/fields/MultiChoiceField.js","webpack://zeta.react/./src/fields/NumericField.js","webpack://zeta.react/./src/fields/TextField.js","webpack://zeta.react/./src/fields/ToggleField.js","webpack://zeta.react/./src/form.js","webpack://zeta.react/./src/index.js","webpack://zeta.react/./src/entry.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"zeta-dom-react\", [\"zeta-dom\", \"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zeta-dom-react\"] = factory(require(\"zeta-dom\"), require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"zeta\"] = root[\"zeta\"] || {}, root[\"zeta\"][\"react\"] = factory(root[\"zeta\"], root[\"React\"], root[\"ReactDOM\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__231__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__33__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__33__;","module.exports = __WEBPACK_EXTERNAL_MODULE__231__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import lib from \"zeta-dom\";\r\nconst { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch } = lib.util;\r\nexport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, define, defineGetterProperty, defineObservableProperty, defineOwnProperty, definePrototype, delay, each, either, equal, exclude, extend, fill, freeze, grep, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, isPlainObject, isUndefinedOrNull, keys, kv, makeArray, makeAsync, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setAdd, setImmediate, setImmediateOnce, single, splice, throwNotFunction, throws, watch };","import lib from \"@misonou/hoist/react\";\r\nconst { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState } = lib;\r\nexport { Fragment, StrictMode, Suspense, createContext, createElement, forwardRef, lazy, useCallback, useContext, useEffect, useMemo, useReducer, useRef, useState };","import lib from \"zeta-dom\";\r\nconst { bind, comparePosition, parentsAndSelf } = lib.util;\r\nexport { bind, comparePosition, parentsAndSelf };","import lib from \"zeta-dom\";\r\nconst dom = lib.dom;\r\nexport default dom;\r\nconst { focus, reportError } = dom;\r\nexport { focus, reportError };","import lib from \"zeta-dom\";\r\nconst { notifyAsync, preventLeave } = lib.dom;\r\nexport { notifyAsync, preventLeave };","import lib from \"zeta-dom\";\r\nconst { EventContainer } = lib;\r\nexport { EventContainer as ZetaEventContainer };","import { StrictMode, createElement } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nvar extraRender = true;\r\n\r\nReactDOM.flushSync(function () {\r\n    function TestComponent() {\r\n        extraRender = !extraRender;\r\n        return null;\r\n    }\r\n    var container = document.createElement('div');\r\n    var element = createElement(StrictMode, null, createElement(TestComponent));\r\n    if (ReactDOM.createRoot) {\r\n        ReactDOM.createRoot(container).render(element);\r\n    } else {\r\n        ReactDOM.render(element, container);\r\n    }\r\n});\r\n\r\nexport const IS_DEV = extraRender;\r\n","import { useCallback, useEffect, useMemo, useReducer, useRef, useState } from \"react\";\r\nimport dom, { reportError } from \"zeta-dom/dom\";\r\nimport { notifyAsync } from \"zeta-dom/domLock\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { always, any, arrRemove, catchAsync, clearImmediateOnce, combineFn, createPrivateStore, deferrable, defineObservableProperty, defineOwnProperty, delay, each, equal, extend, fill, freeze, hasOwnProperty, is, isArray, isErrorWithCode, isFunction, makeArray, makeAsync, map, mapRemove, noop, pipe, resolve, sameValueZero, setAdd, setImmediateOnce, watch } from \"zeta-dom/util\";\r\nimport { IS_DEV } from \"./env.js\";\r\n\r\nconst _ = /*#__PURE__*/ createPrivateStore();\r\nconst container = new ZetaEventContainer();\r\nconst singletons = new Map();\r\nconst disposedSingletons = new WeakSet();\r\nconst unloadCallbacks = new Set();\r\nconst AbortController = window.AbortController;\r\nconst useSingletonEffect = IS_DEV ? useSingletonEffectImplDev : useSingletonEffectImpl;\r\nconst sameValue = Object.is || function (a, b) {\r\n    return sameValueZero(a, b) && (a !== 0 || 1 / a === 1 / b);\r\n};\r\n\r\nbind(window, 'pagehide', function (e) {\r\n    combineFn(makeArray(unloadCallbacks))(e.persisted);\r\n});\r\n\r\nfunction muteRejection(promise) {\r\n    catchAsync(promise);\r\n    return promise;\r\n}\r\n\r\nfunction clearUnusedSingletons() {\r\n    each(singletons, function (i, v) {\r\n        if (clearUnusedSingletons.d & (v.d || 1)) {\r\n            disposedSingletons.add(i);\r\n            mapRemove(singletons, i).call(i, i, v.d === 2);\r\n        }\r\n    });\r\n    clearUnusedSingletons.d = 0;\r\n}\r\n\r\nfunction useSingletonEffectImpl(factory, dispose, deps) {\r\n    var target = useMemo(factory, deps);\r\n    useEffect(function () {\r\n        return function () {\r\n            disposedSingletons.add(target);\r\n            dispose.call(target, target, true);\r\n        };\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nfunction useSingletonEffectImplDev(factory, dispose, deps) {\r\n    var target = useMemo(function () {\r\n        var target = factory();\r\n        if (!singletons.has(target)) {\r\n            singletons.set(target, dispose);\r\n            clearUnusedSingletons.d = 0;\r\n            clearImmediateOnce(clearUnusedSingletons);\r\n        }\r\n        return target;\r\n    }, deps);\r\n    useEffect(function () {\r\n        var cb = function (flag) {\r\n            singletons.get(target).d = flag ? 4 : 2;\r\n            clearUnusedSingletons.d |= flag ? 1 : 2;\r\n            setImmediateOnce(clearUnusedSingletons);\r\n        };\r\n        cb(true);\r\n        return cb;\r\n    }, [target]);\r\n    return target;\r\n}\r\n\r\nexport function useAutoSetRef(value) {\r\n    const ref = useRef();\r\n    ref.current = value;\r\n    return ref;\r\n}\r\n\r\nexport function useEagerReducer(reducer, init) {\r\n    var state = useState(function () {\r\n        var value = isFunction(init) ? init() : init;\r\n        var fn = function (newValue) {\r\n            newValue = reducer(value, newValue);\r\n            if (!sameValue(newValue, value)) {\r\n                value = newValue;\r\n                state[1]([value, fn]);\r\n            }\r\n        };\r\n        return [value, fn];\r\n    });\r\n    return state[0];\r\n}\r\n\r\nexport function useEagerState(init) {\r\n    return useEagerReducer(function (prevState, state) {\r\n        return isFunction(state) ? state(prevState) : state;\r\n    }, init);\r\n}\r\n\r\nexport function useUpdateTrigger() {\r\n    return useReducer(function () {\r\n        return {};\r\n    })[1];\r\n}\r\n\r\nexport function useValueTrigger(value, comparer) {\r\n    var state = useEagerReducer(function (ref, value) {\r\n        return (comparer || sameValue)(ref.current, value) ? ref : { current: value };\r\n    }, {});\r\n    state[0].current = value;\r\n    return state[1];\r\n}\r\n\r\nexport function useEventTrigger(obj, event, selector, initialState) {\r\n    const state = useEagerState(initialState);\r\n    useEffect(function () {\r\n        var callback = function (e) {\r\n            state[1](selector ? selector.bind(this, e) : {});\r\n        };\r\n        return obj.addEventListener ? bind(obj, event, callback) : obj.on(fill(event, callback));\r\n    }, [obj, event]);\r\n    return selector ? state[0] : undefined;\r\n}\r\n\r\nexport function useMemoizedFunction(callback) {\r\n    const ref = useAutoSetRef(callback);\r\n    return useCallback(function () {\r\n        return (isFunction(ref.current) || noop).apply(this, arguments);\r\n    }, []);\r\n}\r\n\r\nexport function useObservableProperty(obj, key) {\r\n    const value = obj[key];\r\n    const notifyChange = useValueTrigger(value);\r\n    useEffect(function () {\r\n        notifyChange(obj[key]);\r\n        return watch(obj, key, notifyChange);\r\n    }, [obj, key]);\r\n    return value;\r\n}\r\n\r\nexport function useAsync(init, deps, debounce) {\r\n    const state = useSingleton(function () {\r\n        var element;\r\n        var currentController;\r\n        var nextResult;\r\n        var reset = function (loading, value, error, reason) {\r\n            if (currentController) {\r\n                currentController.abort(reason);\r\n                currentController = null;\r\n            }\r\n            extend(state, { loading, value, error });\r\n            notifyChange([loading, value, error]);\r\n        };\r\n        return {\r\n            loading: false,\r\n            value: undefined,\r\n            error: undefined,\r\n            elementRef: function (current) {\r\n                element = current;\r\n            },\r\n            on: function (event, handler) {\r\n                return container.add(state, event, handler);\r\n            },\r\n            onError: function (handler) {\r\n                return state.on('error', function (e) {\r\n                    return handler.call(state, e.error);\r\n                });\r\n            },\r\n            refresh: function (force) {\r\n                if (debounce && !force) {\r\n                    nextResult = nextResult || deferrable();\r\n                    nextResult.waitFor(delay(debounce));\r\n                    return nextResult.d || (nextResult.d = muteRejection(nextResult.then(function () {\r\n                        nextResult = null;\r\n                        return state.refresh(true);\r\n                    })));\r\n                }\r\n                var controller = AbortController ? new AbortController() : { abort: noop };\r\n                var result = makeAsync(init)(controller.signal);\r\n                var promise = always(result, function (resolved, value) {\r\n                    if (currentController === controller) {\r\n                        currentController = null;\r\n                        if (resolved) {\r\n                            reset(false, value);\r\n                            container.emit('load', state, { data: value });\r\n                        } else {\r\n                            reset(false, undefined, value);\r\n                            if (!container.emit('error', state, { error: value })) {\r\n                                throw value;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                reset(true, state.value);\r\n                currentController = controller;\r\n                notifyAsync(element || dom.root, promise);\r\n                return result;\r\n            },\r\n            abort: function (reason) {\r\n                reset(false, state.value, state.error, reason);\r\n            },\r\n            reset: function () {\r\n                reset(false);\r\n            }\r\n        };\r\n    }, [], function () {\r\n        state.abort();\r\n    });\r\n    deps = [deps !== false].concat(isArray(deps) || []);\r\n    init = useMemoizedFunction(init);\r\n    useEffect(function () {\r\n        if (deps[0]) {\r\n            // keep call to refresh in useEffect to avoid double invocation\r\n            // in strict mode in development environment\r\n            setImmediateOnce(state.refresh);\r\n        }\r\n    }, deps);\r\n    useMemo(function () {\r\n        if (deps[0] && !debounce) {\r\n            state.loading = true;\r\n        }\r\n    }, deps);\r\n    var notifyChange = useValueTrigger([state.loading, state.value, state.error], equal);\r\n    return [state.value, state];\r\n}\r\n\r\nexport function useRefInitCallback(init) {\r\n    const args = makeArray(arguments);\r\n    const set = useState(new WeakSet())[0];\r\n    return function (v) {\r\n        if (v && setAdd(set, v)) {\r\n            args[0] = v;\r\n            init.apply(null, args);\r\n        }\r\n    };\r\n}\r\n\r\nexport function useDispose() {\r\n    const dispose = useState(function () {\r\n        const callbacks = [\r\n            function () {\r\n                callbacks.splice(0, callbacks.length - 1);\r\n            }\r\n        ];\r\n        return extend(combineFn(callbacks), { push: callbacks.splice.bind(callbacks, -1, 0) });\r\n    })[0];\r\n    useEffect(function () {\r\n        return dispose;\r\n    }, [dispose]);\r\n    return dispose;\r\n}\r\n\r\nexport function isSingletonDisposed(target) {\r\n    return disposedSingletons.has(target);\r\n}\r\n\r\nexport function useSingleton(factory, deps, onDispose) {\r\n    if (isFunction(deps)) {\r\n        onDispose = deps;\r\n        deps = [];\r\n    }\r\n    onDispose = onDispose || function (target) {\r\n        (target.dispose || noop).call(target);\r\n    };\r\n    return isFunction(factory) ? useSingletonEffect(factory, onDispose, deps || []) : useSingletonEffect(pipe.bind(0, factory), onDispose, [factory]);\r\n}\r\n\r\nexport function useErrorHandlerRef() {\r\n    return useErrorHandler.apply(this, arguments).ref;\r\n}\r\n\r\nexport function useErrorHandler() {\r\n    const reemitting = useRef(false);\r\n    const ref = useRef(null);\r\n    const args = makeArray(arguments);\r\n    const handler = useState(function () {\r\n        return {\r\n            ref: function (element) {\r\n                ref.current = element;\r\n                init(element);\r\n            },\r\n            emit: function (error) {\r\n                return catchError(error) || reemitError(error) || resolve();\r\n            },\r\n            catch: function (filter, callback) {\r\n                var isErrorOf;\r\n                if (!callback) {\r\n                    callback = filter;\r\n                } else if (!isArray(filter)) {\r\n                    isErrorOf = isFunction(filter) ? is : isErrorWithCode;\r\n                } else {\r\n                    isErrorOf = function (error, filter) {\r\n                        return any(filter, function (filter) {\r\n                            return (isFunction(filter) ? is : isErrorWithCode)(error, filter);\r\n                        });\r\n                    };\r\n                }\r\n                return container.add(handler, isErrorOf ? 'error' : 'default', function (e) {\r\n                    if ((isErrorOf || pipe)(e.error, filter)) {\r\n                        return callback(e.error);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })[0];\r\n    const reemitError = useCallback(function (error) {\r\n        try {\r\n            reemitting.current = true;\r\n            return reportError(error, ref.current);\r\n        } finally {\r\n            reemitting.current = false;\r\n        }\r\n    }, []);\r\n    const catchError = useCallback(function (error) {\r\n        return container.emit('error', handler, { error }) || container.emit('default', handler, { error });\r\n    }, []);\r\n    const init = useRefInitCallback(function (element) {\r\n        dom.on(element, 'error', function (e) {\r\n            if (!reemitting.current) {\r\n                return catchError(e.error);\r\n            }\r\n        });\r\n    });\r\n    useEffect(function () {\r\n        return combineFn(map(args, function (v) {\r\n            return v.onError(handler.emit);\r\n        }));\r\n    }, args);\r\n    return handler;\r\n}\r\n\r\nexport function useUnloadEffect(callback) {\r\n    callback = useMemoizedFunction(callback);\r\n    unloadCallbacks.add(callback);\r\n    useSingletonEffect(pipe.bind(0, callback), function (target, used) {\r\n        unloadCallbacks.delete(callback);\r\n        return used && callback(false);\r\n    }, []);\r\n}\r\n\r\nexport function createDependency(defaultValue) {\r\n    var Provider = freeze({});\r\n    var dependency = { Provider };\r\n    var values = _(dependency, extend([], dependency));\r\n    defineObservableProperty(values, 'current', defaultValue, function () {\r\n        return values[0] ? values[0].value : defaultValue;\r\n    });\r\n    _(Provider, values);\r\n    return freeze(dependency);\r\n}\r\n\r\nexport function useDependency(dependency, value, deps) {\r\n    var values = _(dependency);\r\n    if (dependency === values.Provider) {\r\n        var wrapper = useSingleton(function () {\r\n            var obj = {};\r\n            return values.push(obj) && obj;\r\n        }, [values], function () {\r\n            arrRemove(values, wrapper);\r\n            values.current = null;\r\n        });\r\n        useMemo(function () {\r\n            value = isFunction(value) ? value() : value;\r\n            if (wrapper.value !== value || !hasOwnProperty(wrapper, 'value')) {\r\n                defineOwnProperty(wrapper, 'value', value, true);\r\n                values.current = null;\r\n            }\r\n        }, [wrapper].concat(deps || [value]));\r\n        return wrapper;\r\n    } else {\r\n        return useObservableProperty(values, 'current');\r\n    }\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { combineFn, defineObservableProperty, hasOwnProperty, makeArray, map, single, watch } from \"zeta-dom/util\";\r\nimport { bind } from \"zeta-dom/domUtil\";\r\nimport { useEventTrigger, useUpdateTrigger } from \"./hooks.js\";\r\n\r\nexport function useMediaQuery(query) {\r\n    var mq = useMemo(function () {\r\n        return matchMedia(query);\r\n    }, [query]);\r\n    useEventTrigger(mq, 'change');\r\n    return mq.matches;\r\n}\r\n\r\n/**\r\n * @param {Zeta.Dictionary<string>} breakpoints\r\n */\r\nexport function createBreakpointContext(breakpoints) {\r\n    var values = {};\r\n    var handleChanges = watch(values, true);\r\n    var updateAll = combineFn(map(breakpoints, function (v, i) {\r\n        var mq = matchMedia(v);\r\n        var setValue = defineObservableProperty(values, i, mq.matches, true);\r\n        bind(mq, 'change', function () {\r\n            if (mq.matches !== values[i]) {\r\n                handleChanges(updateAll);\r\n            }\r\n        });\r\n        return function () {\r\n            return setValue(mq.matches);\r\n        };\r\n    }));\r\n    return {\r\n        breakpoints: Object.freeze(values),\r\n        useBreakpoint: function () {\r\n            var deps = makeArray(arguments);\r\n            var forceUpdate = useUpdateTrigger();\r\n            useEffect(function () {\r\n                return watch(values, function (e) {\r\n                    if (!deps.length || single(deps, hasOwnProperty.bind(0, e.newValues))) {\r\n                        forceUpdate();\r\n                    }\r\n                });\r\n            }, deps);\r\n            return values;\r\n        }\r\n    };\r\n}\r\n","import { createContext, useContext, useState } from \"react\";\r\nimport { noop, randomId } from \"zeta-dom/util\";\r\nimport { useSingleton } from \"./hooks.js\";\r\n\r\n/** @type {React.Context<import(\"./viewState\").ViewStateProvider | null>} */\r\nconst ViewStateProviderContext = createContext(null);\r\n\r\nexport const ViewStateProvider = ViewStateProviderContext.Provider;\r\n\r\nexport function useViewState(key) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var provider = useContext(ViewStateProviderContext);\r\n    return useSingleton(function () {\r\n        return (provider && key && provider.getState(uniqueId, key)) || {\r\n            get: noop,\r\n            set: noop\r\n        };\r\n    }, [provider, key, uniqueId]);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport { combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, extend, freeze, hasOwnProperty, isArray, isFunction, isUndefinedOrNull, keys, makeArray, noop, pick, setImmediateOnce, single, watch } from \"zeta-dom/util\";\r\nimport { useUpdateTrigger } from \"./hooks.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst proto = DataView.prototype;\r\nconst emitter = new ZetaEventContainer();\r\n\r\nfunction compare(a, b) {\r\n    var x = isUndefinedOrNull(a) && -1;\r\n    var y = isUndefinedOrNull(b) && 1;\r\n    if (x || y) {\r\n        return x + y;\r\n    }\r\n    if (typeof a === 'string' || typeof b === 'string') {\r\n        return String(a).localeCompare(b, undefined, { caseFirst: 'upper' });\r\n    }\r\n    return a - b;\r\n}\r\n\r\nfunction setPageCount(dataView, pageSize, itemCount) {\r\n    _(dataView).setPageCount(Math.ceil(itemCount / (pageSize || itemCount || 1)));\r\n}\r\n\r\nexport function DataView(filters, sortBy, sortOrder, pageSize) {\r\n    var self = this;\r\n    var defaults = {\r\n        filters: extend({}, filters),\r\n        sortBy: sortBy,\r\n        sortOrder: sortOrder || (sortBy && 'asc'),\r\n        itemCount: null,\r\n        pageIndex: 0,\r\n        pageSize: pageSize === undefined ? DataView.pageSize : pageSize\r\n    }\r\n    var state = _(self, {\r\n        setPageCount: defineObservableProperty(self, 'pageCount', 0, true),\r\n        defaults: defaults,\r\n        items: [],\r\n    });\r\n    var emitViewChange = function () {\r\n        emitter.emit('viewChange', self);\r\n    };\r\n    var onUpdated = function (e) {\r\n        var isFilter = this !== self;\r\n        var emitEvent = isFilter || single(e.newValues, function (v, i) {\r\n            return i !== 'pageCount' && i !== 'itemCount';\r\n        });\r\n        state.sorted = state.items.length ? undefined : [];\r\n        if (isFilter) {\r\n            state.filtered = state.sorted;\r\n        }\r\n        self.pageIndex = isFilter || !hasOwnProperty(e.newValues, 'pageIndex') ? 0 : self.pageIndex;\r\n        if (emitEvent) {\r\n            setImmediateOnce(emitViewChange);\r\n        }\r\n    };\r\n    var filters = extend(self, defaults).filters;\r\n    state.callback = watch(filters, false);\r\n    watch(self, onUpdated);\r\n    watch(self.filters, onUpdated);\r\n    for (var i in filters) {\r\n        defineObservableProperty(filters, i);\r\n    }\r\n    freeze(filters);\r\n}\r\n\r\ndefine(DataView, {\r\n    pageSize: 0\r\n});\r\n\r\ndefinePrototype(DataView, {\r\n    get hasPreviousPage() {\r\n        return this.pageIndex > 0;\r\n    },\r\n    get hasNextPage() {\r\n        return this.pageIndex < this.pageCount - 1;\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    getView: function (items, callback) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var pageIndex = self.pageIndex || 0;\r\n        var pageSize = self.pageSize || 0;\r\n        if (items !== state.items) {\r\n            state.items = items || [];\r\n            state.filtered = state.items.length ? undefined : [];\r\n            state.sorted = state.filtered;\r\n        }\r\n        callback = callback || function (items) {\r\n            return self.sort(items);\r\n        };\r\n        var filteredItems = state.sorted || (state.sorted = callback.call(self, state.filtered || state.items, self.filters, self.sortBy, self.sortOrder) || []);\r\n        state.filtered = filteredItems;\r\n        if (items) {\r\n            self.itemCount = filteredItems.length;\r\n        }\r\n        return [filteredItems.slice(pageIndex * pageSize, pageSize ? (pageIndex + 1) * pageSize : undefined), filteredItems.length];\r\n    },\r\n    sort: function (items, callback) {\r\n        var self = this;\r\n        items = makeArray(items);\r\n        if (!isFunction(callback)) {\r\n            var prop = callback || self.sortBy;\r\n            if (!prop) {\r\n                return items;\r\n            }\r\n            callback = function (item) {\r\n                return item[prop];\r\n            };\r\n        }\r\n        var dir = self.sortOrder === 'desc' ? -1 : 1;\r\n        var values = new Map();\r\n        each(items, function (i, v) {\r\n            values.set(v, callback(v));\r\n        });\r\n        return items.sort(function (a, b) {\r\n            var x = values.get(a);\r\n            var y = values.get(b);\r\n            return dir * (isArray(x) ? single(x, function (v, i) {\r\n                return compare(v, y[i]);\r\n            }) : compare(x, y));\r\n        });\r\n    },\r\n    toggleSort: function (sortBy, sortOrder) {\r\n        var self = this;\r\n        if (self.sortBy === sortBy) {\r\n            self.sortOrder = self.sortOrder === 'asc' ? 'desc' : 'asc';\r\n        } else {\r\n            self.sortBy = sortBy;\r\n            self.sortOrder = sortOrder || 'asc';\r\n        }\r\n    },\r\n    toJSON: function () {\r\n        var self = this;\r\n        return extend(pick(self, keys(_(self).defaults)), {\r\n            filters: extend({}, self.filters),\r\n            itemCount: self.itemCount\r\n        });\r\n    },\r\n    reset: function (values) {\r\n        var self = this;\r\n        var state = _(self);\r\n        delete state.itemCount;\r\n        values = values || state.defaults;\r\n        state.callback(function () {\r\n            extend(self.filters, values.filters);\r\n        });\r\n        return extend(self, values);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(proto, 'sortBy');\r\ndefineObservableProperty(proto, 'sortOrder');\r\ndefineObservableProperty(proto, 'itemCount', 0, function (newValue) {\r\n    _(this).itemCount = newValue;\r\n    setPageCount(this, this.pageSize, newValue);\r\n    return newValue || 0;\r\n});\r\ndefineObservableProperty(proto, 'pageSize', 0, function (newValue) {\r\n    setPageCount(this, newValue, this.itemCount);\r\n    return newValue;\r\n});\r\ndefineObservableProperty(proto, 'pageIndex', 0, function (newValue) {\r\n    return Math.max(0, isUndefinedOrNull(_(this).itemCount) ? newValue : Math.min(newValue, this.pageCount - 1));\r\n});\r\ndefineObservableProperty(proto, 'filters', {}, function (newValue, oldValue) {\r\n    return extend(oldValue || {}, newValue);\r\n});\r\n\r\nexport function useDataView(persistKey, filters, sortBy, sortOrder, pageSize) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useDataView('__dataView', persistKey, filters, sortBy, sortOrder);\r\n    }\r\n    var viewState = useViewState(persistKey);\r\n    var forceUpdate = useUpdateTrigger();\r\n    var dataView = useState(function () {\r\n        return new DataView(filters, sortBy, sortOrder, pageSize).reset(viewState.get());\r\n    })[0];\r\n    useEffect(function () {\r\n        return combineFn(\r\n            dataView.on('viewChange', function () {\r\n                viewState.set(dataView.toJSON());\r\n                forceUpdate();\r\n            }),\r\n            viewState.onPopState ? viewState.onPopState(function (newValue) {\r\n                viewState.set(dataView.toJSON());\r\n                dataView.reset(newValue);\r\n            }) : noop\r\n        );\r\n    }, [dataView]);\r\n    return dataView;\r\n}\r\n","import { createElement, Fragment, lazy, Suspense } from \"react\";\r\nimport { combineFn, each, extend, isFunction, isPlainObject, kv, makeArray, mapGet, noop, single, throwNotFunction } from \"zeta-dom/util\";\r\nimport dom from \"zeta-dom/dom\";\r\n\r\nconst boundEvents = new WeakMap();\r\n\r\nexport function domEventRef(event, handler) {\r\n    var arr;\r\n    handler = isPlainObject(event) || kv(event, handler);\r\n    return function (element) {\r\n        if (element) {\r\n            if (arr && arr.ref) {\r\n                throw new Error('Callback can only be passed to single React element');\r\n            }\r\n            arr = mapGet(boundEvents, element, Array);\r\n            if (arr.index === undefined) {\r\n                arr.index = 0;\r\n            }\r\n            var index = arr.index++;\r\n            var state = arr[index] || (arr[index] = { keys: {} });\r\n            each(handler, function (i, v) {\r\n                throwNotFunction(v);\r\n                state.keys[i] = state.keys[i] || dom.on(element, i, function () {\r\n                    return (state.handler[i] || noop).apply(this, arguments);\r\n                });\r\n            });\r\n            state.handler = handler;\r\n        } else {\r\n            arr.index = 0;\r\n        }\r\n        arr.ref = element;\r\n    };\r\n}\r\n\r\nexport function classNames() {\r\n    var className = [];\r\n    (function process(args) {\r\n        each(args, function (j, v) {\r\n            if (v) {\r\n                if (typeof v === 'string') {\r\n                    className.push(v);\r\n                } else if (typeof v.getClassNames === 'function') {\r\n                    process(makeArray(v.getClassNames()));\r\n                } else {\r\n                    for (var i in v) {\r\n                        var value = v[i];\r\n                        if (value || value === 0) {\r\n                            className.push(value === true ? i : i + '-' + value);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(makeArray(arguments));\r\n    return className.join(' ');\r\n}\r\n\r\nexport function innerTextOrHTML(text) {\r\n    return isPlainObject(text) ? { dangerouslySetInnerHTML: text } : { children: text };\r\n}\r\n\r\nexport function partial(setState, key) {\r\n    var fn = function (key, value) {\r\n        setState(function (current) {\r\n            if (typeof key === 'string') {\r\n                key = kv(key, isFunction(value) ? value(current[key], current) : value);\r\n            }\r\n            return single(key, function (v, i) {\r\n                return v !== current[i] && extend({}, current, key);\r\n            }) || current;\r\n        });\r\n    };\r\n    return key ? fn.bind(0, key) : fn;\r\n}\r\n\r\nexport function combineRef() {\r\n    return combineFn(makeArray(arguments).map(toRefCallback));\r\n}\r\n\r\nexport function toRefCallback(ref) {\r\n    if (ref && !isFunction(ref)) {\r\n        return function (v) {\r\n            return ref.current = v;\r\n        };\r\n    }\r\n    return ref || noop;\r\n}\r\n\r\nexport function withSuspense(factory, fallback) {\r\n    fallback = fallback || Fragment;\r\n    if (isFunction(fallback)) {\r\n        fallback = createElement(fallback);\r\n    }\r\n    const Component = lazy(factory);\r\n    return function (props) {\r\n        return createElement(Suspense, { fallback }, createElement(Component, props));\r\n    };\r\n}\r\n","import { define, definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ChoiceField() { }\r\n\r\nfunction normalizeChoiceItems(items) {\r\n    return (items || []).map(function (v) {\r\n        return typeof v === 'object' ? v : { label: String(v), value: v };\r\n    });\r\n}\r\n\r\ndefine(ChoiceField, {\r\n    normalizeItems: normalizeChoiceItems\r\n});\r\n\r\ndefinePrototype(ChoiceField, {\r\n    defaultValue: '',\r\n    postHook: function (state, props, hook) {\r\n        var items = hook.memo(function () {\r\n            return normalizeChoiceItems(props.items);\r\n        }, [props.items]);\r\n        var selectedIndex = items.findIndex(function (v) {\r\n            return v.value === state.value;\r\n        });\r\n        hook.effect(function () {\r\n            if (selectedIndex < 0) {\r\n                selectedIndex = props.allowUnselect || !items[0] ? -1 : 0;\r\n                state.setValue(selectedIndex < 0 ? '' : items[0].value);\r\n            }\r\n        });\r\n        return extend(state, {\r\n            items: items,\r\n            selectedIndex: selectedIndex,\r\n            selectedItem: items[selectedIndex]\r\n        });\r\n    }\r\n});\r\n","import { define, definePrototype, extend, isFunction } from \"zeta-dom/util\";\r\n\r\nconst re = /^-?\\d{4,}-\\d{2}-\\d{2}$/;\r\n\r\n// method mapping for relative date units\r\nconst units = {\r\n    y: ['getFullYear', 'setFullYear'],\r\n    m: ['getMonth', 'setMonth'],\r\n    d: ['getDate', 'setDate']\r\n};\r\nunits.w = units.d;\r\n\r\nfunction parseRelativeDate(str) {\r\n    var date = new Date();\r\n    var dir = str[0] === '-' ? -1 : 1;\r\n    str.toLowerCase().replace(/([+-]?)(\\d+)([dwmy])/g, function (v, a, b, c) {\r\n        date[units[c][1]](date[units[c][0]]() + (b * (a === '-' ? -1 : a === '+' ? 1 : dir) * (c === 'w' ? 7 : 1)));\r\n    });\r\n    return date;\r\n}\r\n\r\nfunction normalizeDate(date) {\r\n    if (typeof date === 'string') {\r\n        if (re.test(date)) {\r\n            return Date.parse(date + 'T00:00');\r\n        }\r\n        date = date[0] === '+' || date[0] === '-' ? parseRelativeDate(date) : Date.parse(date);\r\n    }\r\n    return new Date(date).setHours(0, 0, 0, 0);\r\n}\r\n\r\nfunction clampValue(date, min, max) {\r\n    var ts = normalizeDate(date);\r\n    return ts < min ? min : ts > max ? max : date;\r\n}\r\n\r\nfunction toDateObject(str) {\r\n    var ts = normalizeDate(str);\r\n    return isNaN(ts) ? null : new Date(ts);\r\n}\r\n\r\nfunction toDateString(date) {\r\n    if (!isNaN(date)) {\r\n        // counter UTC conversion due to toISOString\r\n        var tz = new Date(date).getTimezoneOffset() * 60000;\r\n        var str = new Date(date - tz).toISOString();\r\n        return str.slice(0, str.indexOf('T', 10));\r\n    }\r\n    return '';\r\n}\r\n\r\nexport default function DateField() { }\r\n\r\ndefine(DateField, {\r\n    toDateString: toDateString,\r\n    toDateObject: toDateObject\r\n});\r\n\r\ndefinePrototype(DateField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return toDateString(normalizeDate(value));\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var setValue = state.setValue;\r\n        var value = state.value;\r\n        var min = normalizeDate(props.min);\r\n        var max = normalizeDate(props.max);\r\n        var displayText = hook.memo(function () {\r\n            return value && props.formatDisplay ? props.formatDisplay(toDateObject(value)) : value;\r\n        }, [value]);\r\n        hook.effect(function () {\r\n            var clamped = value && clampValue(value, min, max);\r\n            if (clamped !== value) {\r\n                setValue(clamped);\r\n            }\r\n        }, [value, min, max]);\r\n        return extend(state, {\r\n            min: toDateString(min),\r\n            max: toDateString(max),\r\n            displayText: displayText,\r\n            setValue: hook.callback(function (v) {\r\n                v = isFunction(v) ? v(value) : v;\r\n                if (!v) {\r\n                    setValue('');\r\n                } else if (/\\d{4}/.test(v) && /[^\\s\\d]/.test(v)) {\r\n                    v = normalizeDate(v);\r\n                    if (!isNaN(v)) {\r\n                        setValue(clampValue(v, min, max));\r\n                    }\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, either, extend, freeze, isArray, isUndefinedOrNull, makeArray, splice } from \"zeta-dom/util\";\r\nimport ChoiceField from \"./ChoiceField.js\";\r\n\r\nexport default function MultiChoiceField() { }\r\n\r\ndefinePrototype(MultiChoiceField, {\r\n    /** @type {any} */\r\n    defaultValue: freeze([]),\r\n    normalizeValue: function (newValue) {\r\n        return isArray(newValue) || makeArray(newValue);\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var allowCustomValues = props.allowCustomValues || !props.items;\r\n        var items = hook.memo(function () {\r\n            return ChoiceField.normalizeItems(props.items);\r\n        }, [props.items]);\r\n        var isUnknown = function (value) {\r\n            return !items.some(function (v) {\r\n                return v.value === value;\r\n            });\r\n        };\r\n        var toggleValue = hook.callback(function (value, selected) {\r\n            if (allowCustomValues || !isUnknown(value)) {\r\n                state.setValue(function (arr) {\r\n                    var index = arr.indexOf(value);\r\n                    if (isUndefinedOrNull(selected) || either(index >= 0, selected)) {\r\n                        arr = makeArray(arr);\r\n                        if (index < 0) {\r\n                            arr.push(value);\r\n                        } else {\r\n                            arr.splice(index, 1);\r\n                        }\r\n                    }\r\n                    return arr;\r\n                });\r\n            }\r\n        });\r\n        var value = hook.memo(function () {\r\n            return makeArray(state.value);\r\n        }, [state.version]);\r\n        hook.effect(function () {\r\n            if (!allowCustomValues) {\r\n                var cur = makeArray(value);\r\n                var arr = splice(cur, isUnknown);\r\n                if (arr.length) {\r\n                    state.setValue(cur);\r\n                }\r\n            }\r\n        });\r\n        return extend(state, {\r\n            value: value,\r\n            items: items,\r\n            toggleValue: toggleValue\r\n        });\r\n    }\r\n});\r\n","import { definePrototype } from \"zeta-dom/util\";\r\n\r\nexport default function NumericField() { }\r\n\r\ndefinePrototype(NumericField, {\r\n    normalizeValue: function (newValue) {\r\n        newValue = +newValue;\r\n        return isNaN(newValue) ? undefined : newValue;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        var value = state.value;\r\n        var min = props.min;\r\n        var max = props.max;\r\n        var step = props.step;\r\n        var allowEmpty = props.allowEmpty;\r\n        hook.effect(function () {\r\n            var rounded = step > 0 ? Math.round(value / step) * step : value;\r\n            if (rounded < min || (isNaN(rounded) && !allowEmpty)) {\r\n                rounded = min || 0;\r\n            } else if (rounded > max) {\r\n                rounded = max;\r\n            }\r\n            if (rounded !== value) {\r\n                state.setValue(rounded);\r\n            }\r\n        }, [value, min, max, step, allowEmpty]);\r\n        return state;\r\n    }\r\n});\r\n","import { definePrototype, extend, isUndefinedOrNull, pick } from \"zeta-dom/util\";\r\n\r\nexport default function TextField() { }\r\n\r\ndefinePrototype(TextField, {\r\n    defaultValue: '',\r\n    normalizeValue: function (value) {\r\n        return isUndefinedOrNull(value) ? '' : String(value);\r\n    },\r\n    postHook: function (state, props) {\r\n        var form = state.form;\r\n        var inputProps = pick(props, ['type', 'disabled', 'autoComplete', 'maxLength', 'inputMode', 'placeholder', 'enterKeyHint', 'readOnly']);\r\n        if (props.type === 'password' && !inputProps.autoComplete) {\r\n            inputProps.autoComplete = 'current-password';\r\n        }\r\n        inputProps.type = inputProps.type || 'text';\r\n        inputProps.enterKeyHint = inputProps.enterKeyHint || (form && form.enterKeyHint);\r\n        return extend(state, {\r\n            inputProps: inputProps\r\n        });\r\n    }\r\n});\r\n","import { definePrototype, extend } from \"zeta-dom/util\";\r\n\r\nexport default function ToggleField() { }\r\n\r\ndefinePrototype(ToggleField, {\r\n    defaultValue: false,\r\n    valueProperty: 'checked',\r\n    normalizeValue: function (value) {\r\n        return !!value;\r\n    },\r\n    isEmpty: function (value) {\r\n        return !value;\r\n    },\r\n    postHook: function (state, props, hook) {\r\n        return extend(state, {\r\n            toggleValue: hook.callback(function () {\r\n                state.setValue(function (v) {\r\n                    return !v;\r\n                });\r\n            })\r\n        });\r\n    }\r\n});\r\n","import { createContext, createElement, forwardRef, useContext, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { always, any, combineFn, createPrivateStore, define, defineObservableProperty, definePrototype, each, equal, exclude, extend, grep, hasOwnProperty, is, isArray, isFunction, isPlainObject, isUndefinedOrNull, keys, makeArray, map, mapGet, mapRemove, noop, pick, pipe, randomId, resolve, resolveAll, sameValueZero, setImmediate, setImmediateOnce, single, throwNotFunction, throws, watch } from \"zeta-dom/util\";\r\nimport { ZetaEventContainer } from \"zeta-dom/events\";\r\nimport dom, { focus } from \"zeta-dom/dom\";\r\nimport { preventLeave } from \"zeta-dom/domLock\";\r\nimport { comparePosition, parentsAndSelf } from \"zeta-dom/domUtil\";\r\nimport { useObservableProperty, useUnloadEffect, useUpdateTrigger } from \"./hooks.js\";\r\nimport { combineRef } from \"./util.js\";\r\nimport { useViewState } from \"./viewState.js\";\r\n\r\nconst _ = createPrivateStore();\r\nconst emitter = new ZetaEventContainer();\r\nconst instances = new WeakMap();\r\nconst changedProps = new Map();\r\nconst rootForm = new FormContext({}, {}, { get: noop });\r\nconst fieldTypes = {\r\n    text: TextField,\r\n    toggle: ToggleField,\r\n    choice: ChoiceField\r\n};\r\n\r\n/** @type {React.Context<any>} */\r\nconst FormObjectContext = createContext(null);\r\nconst FormObjectProvider = FormObjectContext.Provider;\r\n\r\nexport function ValidationError(kind, message, args) {\r\n    this.kind = kind;\r\n    this.args = args;\r\n    this.message = message;\r\n}\r\n\r\nfunction createHookHelper(effects) {\r\n    var states = [];\r\n    var push = function (callback, deps) {\r\n        var i = effects.i++;\r\n        states[i] = !deps || !states[i] || !equal(states[i][0], deps) ? [deps, callback()] : states[i];\r\n        return states[i][1];\r\n    };\r\n    return {\r\n        memo: push,\r\n        callback: function (callback) {\r\n            var ref = push(Object, []);\r\n            ref.current = callback;\r\n            return ref.cb || (ref.cb = function () {\r\n                return ref.current.apply(this, arguments);\r\n            });\r\n        },\r\n        effect: function (callback, deps) {\r\n            push(function () {\r\n                effects.push(throwNotFunction(callback));\r\n            }, deps);\r\n        }\r\n    };\r\n}\r\n\r\nfunction isEmpty(value) {\r\n    return isUndefinedOrNull(value) || value === '' || (isArray(value) && !value.length);\r\n}\r\n\r\nfunction hasImplicitError(field) {\r\n    return field.props.required && field.isEmpty(field.value);\r\n}\r\n\r\nfunction cloneValue(value) {\r\n    return _(value) ? extend(true, isArray(value) ? [] : {}, value) : value;\r\n}\r\n\r\nfunction keyFor(value) {\r\n    return (_(value) || '').uniqueId;\r\n}\r\n\r\nfunction resolvePathInfo(form, path) {\r\n    var arr = isArray(path) || path.split('.');\r\n    var value = form.data;\r\n    var parent = value;\r\n    for (var i = 0, len = arr.length; i < len; i++) {\r\n        if (!hasOwnProperty(value, arr[i])) {\r\n            return {\r\n                name: arr[len - 1],\r\n                parent: i === len - 1 ? value : null\r\n            };\r\n        }\r\n        parent = value;\r\n        value = value[arr[i]];\r\n    }\r\n    return {\r\n        exists: true,\r\n        name: arr[len - 1],\r\n        value: value,\r\n        parent: parent\r\n    };\r\n}\r\n\r\nfunction getField(form, path) {\r\n    var prop = resolvePathInfo(form, path);\r\n    var key = keyFor(prop.parent);\r\n    return key && _(form).fields[key + '.' + prop.name];\r\n}\r\n\r\nfunction getPath(form, obj, name) {\r\n    if (obj === form.data) {\r\n        return name;\r\n    }\r\n    var paths = _(form).paths;\r\n    var path = name ? [name] : [];\r\n    for (var key = keyFor(obj); key = paths[key]; key = key.slice(0, 8)) {\r\n        path.unshift(key.slice(9));\r\n    }\r\n    return resolvePathInfo(form, path)[name ? 'parent' : 'value'] === obj ? path.join('.') : '';\r\n}\r\n\r\nfunction emitDataChangeEvent() {\r\n    each(changedProps, function (form) {\r\n        var state = _(form);\r\n        var props = mapRemove(changedProps, form);\r\n        for (var i in props) {\r\n            while (i = i.replace(/(^|\\.)[^.]+$/, '')) {\r\n                props[i] = true;\r\n            }\r\n        }\r\n        var element = state.ref || dom.root;\r\n        var updatedFields = grep(state.fields, function (v) {\r\n            return props[v.path];\r\n        });\r\n        emitter.emit('dataChange', form, keys(props));\r\n        validateFields(form, grep(updatedFields, function (v) {\r\n            return v.version && (v.props.validateOnChange + 1 || form.validateOnChange + 1) > 1;\r\n        }));\r\n        if (form.preventLeave && !state.unlock && updatedFields[0] && dom.getEventSource(element) !== 'script') {\r\n            var promise = new Promise(function (resolve) {\r\n                state.unlock = function () {\r\n                    state.unlock = null;\r\n                    resolve();\r\n                };\r\n            });\r\n            preventLeave(element, promise, function () {\r\n                return emitter.emit('beforeLeave', form) || resolve();\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleDataChange(callback) {\r\n    var local;\r\n    var map = handleDataChange.d || (handleDataChange.d = local = new Set());\r\n    try {\r\n        callback();\r\n    } finally {\r\n        if (map === local) {\r\n            each(local, function (i, v) {\r\n                v.onChange(v.value);\r\n            });\r\n            handleDataChange.d = null;\r\n        }\r\n    }\r\n}\r\nhandleDataChange.d = null;\r\n\r\nfunction createDataObject(context, initialData) {\r\n    var state = _(context);\r\n    var target = isArray(initialData) ? [] : {};\r\n    var uniqueId = randomId();\r\n    var onChange = function (p, field, oldValue) {\r\n        var path = getPath(context, proxy, p);\r\n        if (path) {\r\n            if (field) {\r\n                var value = field.normalizeValue(target[p]);\r\n                if (!sameValueZero(value, target[p])) {\r\n                    setValue(p, value);\r\n                }\r\n                if (!sameValueZero(field.value, value)) {\r\n                    field.value = value;\r\n                    field.version++;\r\n                }\r\n                if (value === oldValue) {\r\n                    return;\r\n                }\r\n                handleDataChange.d.add(field);\r\n            }\r\n            // ensure field associated with parent data object got notified\r\n            for (var key = uniqueId; key = state.paths[key]; key = key.slice(0, 8)) {\r\n                if (state.fields[key]) {\r\n                    handleDataChange.d.add(state.fields[key]);\r\n                }\r\n            }\r\n            if (context !== rootForm) {\r\n                mapGet(changedProps, context, Object)[path] = true;\r\n                setImmediateOnce(emitDataChangeEvent);\r\n            }\r\n            return true;\r\n        }\r\n    };\r\n    var setValue = function (p, v) {\r\n        if (isPlainObject(v) || isArray(v)) {\r\n            // ensure changes to nested data objects\r\n            // emits data change event to correct form context\r\n            if ((_(v) || '').state !== state) {\r\n                v = createDataObject(context, v);\r\n            }\r\n            state.paths[keyFor(v)] = uniqueId + '.' + p;\r\n        }\r\n        target[p] = v;\r\n        return v;\r\n    };\r\n    var deleteValue = function (p) {\r\n        delete target[p];\r\n    };\r\n    var proxy = new Proxy(target, {\r\n        set: function (t, p, v) {\r\n            if (typeof p === 'string' && (!sameValueZero(t[p], v) || !(p in t))) {\r\n                handleDataChange(function () {\r\n                    var prev = t[p];\r\n                    if (isArray(t)) {\r\n                        if (p === 'length') {\r\n                            // check for truncated indexes that would be deleted without calling the trap\r\n                            for (var index = prev - 1; index >= v; index--) {\r\n                                onChange(index);\r\n                            }\r\n                            t[p] = v;\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        if (_(v)) {\r\n                            throws(\"Cannot assign proxied data object\");\r\n                        }\r\n                        // apply changes to existing object or array when assigning new object or array\r\n                        // so that fields of the same path can have consistent key and state\r\n                        if (isArray(v) && isArray(prev)) {\r\n                            prev.splice.apply(prev, [0, prev.length].concat(v));\r\n                            return true;\r\n                        }\r\n                        if (isPlainObject(v) && _(prev)) {\r\n                            for (var i in exclude(prev, v)) {\r\n                                delete prev[i];\r\n                            }\r\n                            extend(prev, v);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    setValue(p, v);\r\n                    onChange(p, state.fields[uniqueId + '.' + p], prev);\r\n                });\r\n            }\r\n            return true;\r\n        },\r\n        deleteProperty: function (t, p) {\r\n            if (typeof p === 'string' && p in t) {\r\n                handleDataChange(function () {\r\n                    deleteValue(p);\r\n                    onChange(p);\r\n                });\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    _(proxy, {\r\n        state,\r\n        uniqueId,\r\n        set: setValue,\r\n        delete: deleteValue\r\n    });\r\n    for (var i in initialData) {\r\n        setValue(i, initialData[i]);\r\n    }\r\n    return proxy;\r\n}\r\n\r\nfunction createFieldState(initialValue) {\r\n    var field = {\r\n        version: 0,\r\n        initialValue: initialValue,\r\n        error: '',\r\n        preset: {},\r\n        onChange: function (v) {\r\n            if (!field.controlled) {\r\n                field.version++;\r\n            }\r\n            if (field.props.onChange) {\r\n                field.props.onChange(cloneValue(v));\r\n            }\r\n        },\r\n        setValue: function (v) {\r\n            v = isFunction(v) ? v(field.value) : v;\r\n            if (!field.controlled) {\r\n                field.dict[field.name] = v;\r\n            } else if (!sameValueZero(v, field.value)) {\r\n                field.onChange(v);\r\n            }\r\n        },\r\n        setError: function (v) {\r\n            field.error = isFunction(v) ? v(field.error) : v;\r\n            (field.form || {}).isValid = null;\r\n        },\r\n        validate: function () {\r\n            return validateFields(field.form, [field]);\r\n        },\r\n        isEmpty: function (value) {\r\n            return (field.props.isEmpty || (field.preset.isEmpty || isEmpty).bind(field.preset))(value);\r\n        },\r\n        normalizeValue: function (value) {\r\n            return (field.preset.normalizeValue || pipe).call(field.preset, value, field.props);\r\n        },\r\n        elementRef: function (v) {\r\n            field.element = v;\r\n        }\r\n    };\r\n    watch(field, true);\r\n    defineObservableProperty(field, 'error', '', function (v) {\r\n        return isFunction(v) || is(v, ValidationError) ? wrapErrorResult(field, v) : v || '';\r\n    });\r\n    watch(field, 'error', function (v) {\r\n        if (field.form) {\r\n            emitter.emit('validationChange', field.form, {\r\n                name: field.path,\r\n                isValid: !v,\r\n                message: String(v)\r\n            });\r\n        }\r\n    });\r\n    return field;\r\n}\r\n\r\nfunction useFormFieldInternal(state, field, preset, props, controlled, dict, name) {\r\n    var form = state.form === rootForm ? null : state.form;\r\n    var key = name ? keyFor(dict) + '.' + name : state.paths[keyFor(dict)];\r\n    var shouldReset = field.key !== key;\r\n    extend(field, {\r\n        form: form,\r\n        props: props,\r\n        preset: preset,\r\n        controlled: controlled,\r\n        dict: dict,\r\n        key: key,\r\n        name: name,\r\n        path: form ? getPath(form, dict, name) : '',\r\n        error: 'error' in props ? props.error : shouldReset ? '' : field.error,\r\n        locks: shouldReset ? [] : field.locks\r\n    });\r\n    var setValid = form ? state.setValid : noop;\r\n    state.fields[key] = field;\r\n    useEffect(function () {\r\n        state.fields[key] = field;\r\n        return function () {\r\n            if (state.fields[key] === field) {\r\n                delete state.fields[key];\r\n                if (field.props.clearWhenUnmount || !form) {\r\n                    setImmediate(function () {\r\n                        if (!state.fields[key]) {\r\n                            delete dict[name];\r\n                        }\r\n                    });\r\n                }\r\n                setValid();\r\n            }\r\n        };\r\n    }, [state, field, key]);\r\n    useEffect(function () {\r\n        setValid();\r\n    }, [state, field.error, props.disabled, props.required]);\r\n}\r\n\r\nfunction validateFields(form, fields) {\r\n    var validate = function (field) {\r\n        var name = field.path;\r\n        var value = field.value;\r\n        var result = emitter.emit('validate', form, { name, value });\r\n        if (result || !field.props) {\r\n            return result;\r\n        }\r\n        return (field.props.onValidate || noop)(value, name, form) || (hasImplicitError(field) && new ValidationError('required', 'Required'));\r\n    };\r\n    var promises = fields.map(function (v) {\r\n        var locks = v.locks || (v.locks = []);\r\n        var prev = locks[0];\r\n        if (prev) {\r\n            // debounce async validation\r\n            return locks[1] || (locks[1] = always(locks[0], function () {\r\n                var next = validate(v);\r\n                always(next, function () {\r\n                    // dismiss effects of previous validation if later one resolves earlier\r\n                    // so that validity always reflects on latest data\r\n                    if (locks[0] === prev) {\r\n                        locks.shift();\r\n                    }\r\n                });\r\n                return next;\r\n            }));\r\n        }\r\n        locks[0] = resolve(validate(v));\r\n        return locks[0];\r\n    });\r\n    return resolveAll(promises).then(function (result) {\r\n        fields.forEach(function (v, i) {\r\n            // checks if current validation is of the latest\r\n            if (v.locks[0] === promises[i]) {\r\n                v.locks.shift();\r\n                v.error = result[i];\r\n            }\r\n        });\r\n        var state = _(form);\r\n        if (state) {\r\n            state.setValid();\r\n        }\r\n        return !any(result);\r\n    });\r\n}\r\n\r\nfunction wrapErrorResult(field, error) {\r\n    return {\r\n        toString: function () {\r\n            if (is(error, ValidationError)) {\r\n                return single([field.props, field.form || '', FormContext], function (v) {\r\n                    return (v.formatError || noop).call(v, error, field.path || null, field.props, field.form);\r\n                }) || error.message;\r\n            }\r\n            return error(field.props || {});\r\n        }\r\n    };\r\n}\r\n\r\nfunction normalizeOptions(options) {\r\n    if (typeof options === 'boolean') {\r\n        options = {\r\n            validateOnChange: options\r\n        };\r\n    }\r\n    return extend({\r\n        autoPersist: true,\r\n        preventLeave: false,\r\n        validateOnChange: true\r\n    }, options);\r\n}\r\n\r\nfunction formPersist(form) {\r\n    _(form).viewState.set(form.toJSON());\r\n}\r\n\r\nexport function FormContext(initialData, options, viewState) {\r\n    if (isFunction(initialData)) {\r\n        initialData = initialData();\r\n    }\r\n    var self = this;\r\n    var fields = {};\r\n    var state = _(self, {\r\n        form: self,\r\n        fields: fields,\r\n        viewState: viewState,\r\n        paths: {},\r\n        initialData: initialData,\r\n        setValid: defineObservableProperty(this, 'isValid', true, function () {\r\n            return !any(fields, function (v) {\r\n                return !v.props.disabled && (v.error || hasImplicitError(v));\r\n            });\r\n        })\r\n    });\r\n    extend(self, normalizeOptions(options));\r\n    self.ref = function (element) {\r\n        state.ref = element;\r\n        if (element) {\r\n            instances.set(element, self);\r\n        }\r\n    };\r\n    self.isValid = true;\r\n    self.data = createDataObject(self, viewState.get() || state.initialData);\r\n}\r\n\r\ndefine(FormContext, {\r\n    ERROR_FIELD: 1,\r\n    EMPTY_FIELD: 2,\r\n    get: function (element) {\r\n        return single(parentsAndSelf(element), instances.get.bind(instances)) || null;\r\n    }\r\n});\r\n\r\ndefinePrototype(FormContext, {\r\n    element: function (key) {\r\n        return key ? (getField(this, key) || '').element : _(this).ref;\r\n    },\r\n    focus: function (key) {\r\n        var element;\r\n        if (typeof key === 'number') {\r\n            element = map(_(this).fields, function (v) {\r\n                return (v.error && (key & 1)) || (v.isEmpty(v.value) && (key & 2)) ? v.element : null;\r\n            }).sort(comparePosition)[0];\r\n        } else {\r\n            element = this.element(key);\r\n        }\r\n        return !!element && focus(element);\r\n    },\r\n    on: function (event, handler) {\r\n        return emitter.add(this, event, handler);\r\n    },\r\n    persist: function () {\r\n        formPersist(this);\r\n        this.autoPersist = false;\r\n    },\r\n    restore: function () {\r\n        var self = this;\r\n        var data = _(self).viewState.get();\r\n        if (data) {\r\n            self.reset(data);\r\n        }\r\n        return !!data;\r\n    },\r\n    clear: function () {\r\n        this.reset({});\r\n    },\r\n    reset: function (data) {\r\n        var self = this;\r\n        var state = _(self);\r\n        var dict = _(self.data);\r\n        for (var i in self.data) {\r\n            dict.delete(i);\r\n        }\r\n        data = data || state.initialData;\r\n        for (var i in data) {\r\n            dict.set(i, data[i]);\r\n        }\r\n        each(state.fields, function (i, v) {\r\n            var prop = resolvePathInfo(self, v.path);\r\n            if (v.controlled) {\r\n                v.onChange(prop.exists ? prop.value : v.initialValue);\r\n            } else if (prop.exists) {\r\n                v.value = prop.value;\r\n                v.version = 0;\r\n            }\r\n            v.error = null;\r\n        });\r\n        state.setValid();\r\n        (state.unlock || noop)();\r\n        emitter.emit('reset', self);\r\n    },\r\n    getValue: function (key) {\r\n        return cloneValue(resolvePathInfo(this, key).value);\r\n    },\r\n    setValue: function (key, value) {\r\n        var prop = resolvePathInfo(this, key);\r\n        if (prop.parent) {\r\n            prop.parent[prop.name] = cloneValue(value);\r\n        }\r\n    },\r\n    getErrors: function () {\r\n        var errorFields = grep(_(this).fields, function (v) {\r\n            return v.error;\r\n        });\r\n        return errorFields[0] ? errorFields.reduce(function (v, a) {\r\n            v[a.path] = String(a.error);\r\n            return v;\r\n        }, {}) : null;\r\n    },\r\n    getError: function (key) {\r\n        return String((getField(this, key) || '').error || '');\r\n    },\r\n    setError: function (key, error) {\r\n        (getField(this, key) || {}).error = error;\r\n    },\r\n    validate: function () {\r\n        var self = this;\r\n        var fields = _(self).fields;\r\n        var prefix = makeArray(arguments);\r\n        if (!prefix.length) {\r\n            return validateFields(self, grep(fields, function (v) {\r\n                return !v.props.disabled;\r\n            }));\r\n        }\r\n        return validateFields(self, grep(fields, function (v) {\r\n            return any(prefix, function (w) {\r\n                var len = w.length;\r\n                return v.path.slice(0, len) === w && (!v.path[len] || v.path[len] === '.');\r\n            });\r\n        }));\r\n    },\r\n    toJSON: function () {\r\n        return extend(true, {}, this.data);\r\n    }\r\n});\r\n\r\ndefineObservableProperty(FormContext.prototype, 'preventLeave', false, function (value) {\r\n    if (!value) {\r\n        (_(this).unlock || noop)();\r\n    }\r\n    return !!value;\r\n});\r\n\r\nexport function useFormContext(persistKey, initialData, options) {\r\n    if (typeof persistKey !== 'string') {\r\n        return useFormContext('', persistKey, initialData);\r\n    }\r\n    const viewState = useViewState(persistKey);\r\n    const form = useState(function () {\r\n        return new FormContext(initialData, options, viewState);\r\n    })[0];\r\n    const forceUpdate = useUpdateTrigger();\r\n    useObservableProperty(form, 'isValid');\r\n    useUnloadEffect(function () {\r\n        (_(form).unlock || noop)();\r\n        if (form.autoPersist) {\r\n            formPersist(form);\r\n        }\r\n    });\r\n    useEffect(function () {\r\n        if (mapRemove(changedProps, form)) {\r\n            forceUpdate();\r\n        }\r\n        return form.on({\r\n            dataChange: forceUpdate,\r\n            reset: forceUpdate\r\n        });\r\n    }, [form]);\r\n    return form;\r\n}\r\n\r\nexport function useFormField(type, props, defaultValue, prop) {\r\n    if (typeof type === 'string') {\r\n        type = fieldTypes[type];\r\n    } else if (!isFunction(type)) {\r\n        prop = defaultValue;\r\n        defaultValue = props;\r\n        props = type;\r\n        type = '';\r\n    }\r\n    const uniqueId = useState(randomId)[0];\r\n    const context = useContext(FormObjectContext);\r\n    const effects = useState([])[0];\r\n    const hook = useMemo(function () {\r\n        return type ? [new type(), createHookHelper(effects)] : [{}];\r\n    }, [type]);\r\n    const preset = hook[0];\r\n    prop = prop || preset.valueProperty || 'value';\r\n\r\n    var dict = context;\r\n    var name = props.name;\r\n    if (!dict || !name) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    const existing = name in dict;\r\n    const controlled = prop in props;\r\n    const field = useState(function () {\r\n        return createFieldState(controlled ? props[prop] : defaultValue !== undefined ? defaultValue : preset.defaultValue);\r\n    })[0];\r\n    const previousKey = field.key;\r\n    useFormFieldInternal(_(dict).state, field, preset, props, controlled, dict, name);\r\n\r\n    var value = controlled ? props[prop] : existing ? dict[name] : field.initialValue;\r\n    if (previousKey !== field.key) {\r\n        value = field.normalizeValue(value);\r\n    }\r\n    if (!field.form || (!existing && field.isEmpty(value))) {\r\n        _(dict).set(name, value);\r\n    } else {\r\n        dict[name] = value;\r\n    }\r\n    field.value = dict[name];\r\n    if (!existing) {\r\n        field.version = 0;\r\n    }\r\n    effects.i = 0;\r\n    effects.splice(0);\r\n    useEffect(function () {\r\n        combineFn(effects)();\r\n    });\r\n    useObservableProperty(field, 'error');\r\n    useObservableProperty(field, 'version');\r\n    return (preset.postHook || pipe).call(preset, {\r\n        form: context && _(context).state.form,\r\n        key: field.form ? field.key : '',\r\n        path: field.path,\r\n        value: field.value,\r\n        error: String(field.error),\r\n        version: field.version,\r\n        setValue: field.setValue,\r\n        setError: field.setError,\r\n        validate: field.validate,\r\n        elementRef: field.elementRef\r\n    }, props, hook[1]);\r\n}\r\n\r\nexport function combineValidators() {\r\n    var validators = grep(makeArray(arguments), isFunction);\r\n    return function (value, name) {\r\n        return validators.reduce(function (prev, next) {\r\n            return prev.then(function (result) {\r\n                return result || next(value, name);\r\n            });\r\n        }, resolve());\r\n    };\r\n}\r\n\r\nexport function registerFieldType(type, options) {\r\n    if (isFunction(options)) {\r\n        options = {\r\n            postHook: options\r\n        };\r\n    }\r\n    fieldTypes[type] = function () {\r\n        return options;\r\n    };\r\n}\r\n\r\nexport const Form = forwardRef(function (props, ref) {\r\n    const form = props.context;\r\n    const onSubmit = function (e) {\r\n        if (!props.action) {\r\n            e.preventDefault();\r\n        }\r\n        (props.onSubmit || noop).call(this, e);\r\n    };\r\n    const onReset = function (e) {\r\n        e.preventDefault();\r\n        form.reset();\r\n        (props.onReset || noop).call(this, e);\r\n    };\r\n    extend(form, pick(props, ['enterKeyHint', 'preventLeave', 'formatError']));\r\n    return createElement(FormObjectProvider, { value: form.data },\r\n        createElement('form', extend(exclude(props, ['context', 'enterKeyHint', 'preventLeave', 'formatError']), { ref: combineRef(ref, form.ref), onSubmit, onReset })));\r\n});\r\n\r\nexport function FormContextProvider(props) {\r\n    return createElement(FormObjectProvider, { value: props.value.data }, props.children);\r\n}\r\n\r\nexport function FormArray(props) {\r\n    return FormObject(extend({}, props, { defaultValue: [] }));\r\n}\r\n\r\nexport function FormObject(props) {\r\n    var uniqueId = useState(randomId)[0];\r\n    var name = props.name;\r\n    var dict = useContext(FormObjectContext);\r\n    if (!dict) {\r\n        dict = rootForm.data;\r\n        name = uniqueId;\r\n    }\r\n    var fieldRef = useRef();\r\n    var value = props.value;\r\n    if ((_(value) || '').state) {\r\n        dict = value;\r\n        name = '';\r\n    } else if (name) {\r\n        value = 'value' in props ? value : isPlainObject(dict[name]) || isArray(dict[name]) || props.defaultValue || {};\r\n        value = _(dict).set(name, value);\r\n    } else {\r\n        throws('Value must be a data object or array');\r\n    }\r\n    // field state registered by useFormField has a higher priority\r\n    // create own field state only when needed\r\n    var state = _(dict).state;\r\n    var field = state.fields[state.paths[keyFor(value)]];\r\n    if (!field || field.controlled === 0) {\r\n        field = fieldRef.current || (fieldRef.current = createFieldState(value));\r\n        useFormFieldInternal(state, field, {}, props, 0, dict, name);\r\n        field.value = value;\r\n    } else {\r\n        useEffect(noop, [null]);\r\n        useEffect(noop, [null]);\r\n    }\r\n    var children = props.children;\r\n    if (isFunction(children)) {\r\n        children = children(value);\r\n    }\r\n    return createElement(FormObjectProvider, { value }, children);\r\n}\r\n\r\nexport function HiddenField(props) {\r\n    useFormField(props, props.value);\r\n    return null;\r\n}\r\n\r\ndefine(FormObject, { keyFor });\r\n\r\nimport ChoiceField from \"./fields/ChoiceField.js\";\r\nimport DateField from \"./fields/DateField.js\";\r\nimport MultiChoiceField from \"./fields/MultiChoiceField.js\";\r\nimport NumericField from \"./fields/NumericField.js\";\r\nimport TextField from \"./fields/TextField.js\";\r\nimport ToggleField from \"./fields/ToggleField.js\";\r\n\r\nexport {\r\n    ChoiceField,\r\n    DateField,\r\n    MultiChoiceField,\r\n    NumericField,\r\n    TextField,\r\n    ToggleField\r\n}\r\n","export * from \"./css.js\";\r\nexport * from \"./dataView.js\";\r\nexport * from \"./form.js\";\r\nexport * from \"./hooks.js\";\r\nexport * from \"./util.js\";\r\nexport * from \"./viewState.js\";\r\n","import { defineGetterProperty } from \"zeta-dom/util\";\r\n\r\ndefineGetterProperty(window, 'zeta-dom-react', function () {\r\n    console.warn('window[\"zeta-dom-react\"] is deprecated, access zeta.react instead.');\r\n    return zeta.react;\r\n});\r\n\r\nexport * from \"./index.js\";\r\n"],"names":["lib","_lib$util","util","always","any","arrRemove","catchAsync","clearImmediateOnce","combineFn","createPrivateStore","deferrable","define","defineGetterProperty","defineObservableProperty","defineOwnProperty","definePrototype","delay","each","either","equal","exclude","extend","fill","freeze","grep","hasOwnProperty","is","isArray","isErrorWithCode","isFunction","isPlainObject","isUndefinedOrNull","keys","kv","makeArray","makeAsync","map","mapGet","mapRemove","noop","pick","pipe","randomId","resolve","resolveAll","sameValueZero","setAdd","setImmediate","setImmediateOnce","single","splice","throwNotFunction","throws","watch","Fragment","StrictMode","Suspense","createContext","createElement","forwardRef","lazy","useCallback","useContext","useEffect","useMemo","useReducer","useRef","useState","bind","comparePosition","parentsAndSelf","dom","focus","reportError","_lib$dom","notifyAsync","preventLeave","EventContainer","ZetaEventContainer","ReactDOM","extraRender","flushSync","TestComponent","container","document","element","createRoot","render","IS_DEV","_","singletons","Map","disposedSingletons","WeakSet","unloadCallbacks","Set","AbortController","window","useSingletonEffect","useSingletonEffectImplDev","useSingletonEffectImpl","sameValue","Object","a","b","e","persisted","muteRejection","promise","clearUnusedSingletons","i","v","d","add","call","factory","dispose","deps","target","has","set","cb","flag","get","useAutoSetRef","value","ref","current","useEagerReducer","reducer","init","state","fn","newValue","useEagerState","prevState","useUpdateTrigger","useValueTrigger","comparer","useEventTrigger","obj","event","selector","initialState","callback","addEventListener","on","undefined","useMemoizedFunction","apply","arguments","useObservableProperty","key","notifyChange","useAsync","debounce","useSingleton","currentController","nextResult","reset","loading","error","reason","abort","elementRef","handler","onError","refresh","force","waitFor","then","controller","result","signal","resolved","emit","data","root","concat","useRefInitCallback","args","useDispose","callbacks","length","push","isSingletonDisposed","onDispose","useErrorHandlerRef","useErrorHandler","reemitting","catchError","reemitError","_catch","filter","isErrorOf","useUnloadEffect","used","createDependency","defaultValue","Provider","dependency","values","useDependency","wrapper","useMediaQuery","query","mq","matchMedia","matches","createBreakpointContext","breakpoints","handleChanges","updateAll","setValue","useBreakpoint","forceUpdate","newValues","ViewStateProviderContext","ViewStateProvider","useViewState","uniqueId","provider","getState","proto","DataView","prototype","emitter","compare","x","y","String","localeCompare","caseFirst","setPageCount","dataView","pageSize","itemCount","Math","ceil","filters","sortBy","sortOrder","self","defaults","pageIndex","items","emitViewChange","onUpdated","isFilter","emitEvent","sorted","filtered","hasPreviousPage","hasNextPage","pageCount","getView","sort","filteredItems","slice","prop","item","dir","toggleSort","toJSON","max","min","oldValue","useDataView","persistKey","viewState","onPopState","boundEvents","WeakMap","domEventRef","arr","Error","Array","index","classNames","className","process","j","getClassNames","join","innerTextOrHTML","text","dangerouslySetInnerHTML","children","partial","setState","combineRef","toRefCallback","withSuspense","fallback","Component","props","ChoiceField","normalizeChoiceItems","_typeof","label","normalizeItems","postHook","hook","memo","selectedIndex","findIndex","effect","allowUnselect","selectedItem","re","units","m","w","parseRelativeDate","str","date","Date","toLowerCase","replace","c","normalizeDate","test","parse","setHours","clampValue","ts","toDateObject","isNaN","toDateString","tz","getTimezoneOffset","toISOString","indexOf","DateField","normalizeValue","displayText","formatDisplay","clamped","MultiChoiceField","allowCustomValues","isUnknown","some","toggleValue","selected","version","cur","NumericField","step","allowEmpty","rounded","round","TextField","form","inputProps","type","autoComplete","enterKeyHint","ToggleField","valueProperty","isEmpty","instances","changedProps","rootForm","FormContext","fieldTypes","toggle","choice","FormObjectContext","FormObjectProvider","ValidationError","kind","message","createHookHelper","effects","states","hasImplicitError","field","required","cloneValue","keyFor","resolvePathInfo","path","split","parent","len","name","exists","getField","fields","getPath","paths","unshift","emitDataChangeEvent","updatedFields","validateFields","validateOnChange","unlock","getEventSource","Promise","handleDataChange","local","onChange","createDataObject","context","initialData","p","proxy","deleteValue","Proxy","t","prev","deleteProperty","createFieldState","initialValue","preset","controlled","dict","setError","isValid","validate","wrapErrorResult","useFormFieldInternal","shouldReset","locks","setValid","clearWhenUnmount","disabled","onValidate","promises","next","shift","forEach","toString","formatError","normalizeOptions","options","autoPersist","formPersist","ERROR_FIELD","EMPTY_FIELD","persist","restore","clear","getValue","getErrors","errorFields","reduce","getError","prefix","useFormContext","dataChange","useFormField","existing","previousKey","combineValidators","validators","registerFieldType","Form","onSubmit","action","preventDefault","onReset","FormContextProvider","FormArray","FormObject","fieldRef","HiddenField","console","warn","zeta","react"],"sourceRoot":""}