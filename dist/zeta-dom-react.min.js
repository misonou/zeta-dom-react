!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>Pt});var e={};o.r(e),o.d(e,{ChoiceField:()=>He,DataView:()=>Ve,DateField:()=>Je,Form:()=>Et,FormArray:()=>Vt,FormContext:()=>bt,FormContextProvider:()=>kt,FormObject:()=>Ot,MultiChoiceField:()=>Ue,NumericField:()=>Ye,TextField:()=>Ge,ToggleField:()=>$e,ValidationError:()=>it,ViewStateProvider:()=>Se,classNames:()=>Re,combineRef:()=>Me,combineValidators:()=>xt,createBreakpointContext:()=>ge,domEventRef:()=>Fe,innerTextOrHTML:()=>ze,partial:()=>De,registerFieldType:()=>Ct,toRefCallback:()=>Ne,useAsync:()=>le,useDataView:()=>Oe,useDispose:()=>pe,useErrorHandler:()=>me,useErrorHandlerRef:()=>ve,useFormContext:()=>St,useFormField:()=>wt,useMediaQuery:()=>he,useMemoizedFunction:()=>ce,useObservableProperty:()=>fe,useRefInitCallback:()=>de,useUpdateTrigger:()=>se,useViewState:()=>we,withSuspense:()=>Ie});var t=o(359),n=o(654),r=n.util,u=r.noop,a=r.pipe,s=r.either,c=r.is,f=r.isUndefinedOrNull,l=r.isArray,d=r.isFunction,p=(r.isThenable,r.isPlainObject),v=(r.isArrayLike,r.makeArray),m=r.extend,h=r.each,g=r.map,y=r.grep,b=r.splice,S=r.any,w=r.single,x=r.kv,C=(r.fill,r.pick),E=r.exclude,k=(r.mapObject,r.mapGet),V=r.mapRemove,O=(r.arrRemove,r.setAdd),P=(r.equal,r.combineFn),F=(r.executeOnce,r.createPrivateStore),R=(r.setTimeout,r.setTimeoutOnce,r.setInterval,r.setIntervalSafe,r.setImmediate,r.setImmediateOnce),z=r.throws,D=r.throwNotFunction,M=(r.errorWithCode,r.isErrorWithCode),N=r.keys,I=(r.values,r.hasOwnProperty),j=(r.getOwnPropertyDescriptors,r.define),H=r.definePrototype,T=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty),A=r.watch,L=(r.watchOnce,r.watchable,r.inherit,r.freeze),q=(r.deepFreeze,r.iequal,r.randomId),W=(r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),B=r.reject,K=r.always,_=r.resolveAll,J=(r.retryable,r.deferrable),U=(r.catchAsync,r.setPromiseTimeout,r.delay),Y=r.makeAsync,G=n.util,$=(G.domReady,G.tagName,G.isVisible,G.matchSelector,G.comparePosition),Q=(G.connected,G.containsOrEquals,G.acceptNode,G.combineNodeFilters,G.iterateNode,G.iterateNodeToArray,G.getCommonAncestor,G.parentsAndSelf),Z=(G.selectIncludeSelf,G.selectClosestRelative,G.createNodeIterator,G.createTreeWalker,G.bind);G.bindUntil,G.dispatchDOMMouseEvent,G.removeNode,G.getClass,G.setClass,G.getScrollOffset,G.getScrollParent,G.getContentRect,G.scrollBy,G.scrollIntoView,G.makeSelection,G.getRect,G.getRects,G.toPlainRect,G.rectEquals,G.rectCovers,G.rectIntersects,G.pointInRect,G.mergeRect,G.elementFromPoint;const X=n.dom;var ee=n.dom,te=(ee.textInputAllowed,ee.beginDrag,ee.beginPinchZoom,ee.getShortcut,ee.setShortcut,ee.focusable,ee.focused,ee.setModal,ee.releaseModal,ee.retainFocus,ee.releaseFocus,ee.iterateFocusPath,ee.focus);const ne=X;var re=n.dom,oe=(re.lock,re.locked,re.cancelLock,re.subscribeAsync,re.notifyAsync),ie=re.preventLeave,ue=n.EventContainer,ae=new ue;function se(){var e=(0,t.useState)()[1];return(0,t.useCallback)((function(){e({})}),[])}function ce(e){var n=(0,t.useRef)();return n.current=d(e)||u,(0,t.useCallback)((function(){return n.current.apply(this,arguments)}),[])}function fe(e,n){var r=se(),o=e[n],i=(0,t.useRef)();return i.current=o,(0,t.useEffect)((function(){var t=function(e){e!==i.current&&r()};return t(e[n]),A(e,n,t)}),[e,n]),o}function le(e,n,r){var o=(0,t.useState)((function(){var t,n,i;return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return ae.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(u){if(r&&!u)return(i=i||J()).waitFor(U(r)),i.d||(i.d=i.then((function(){return i=null,o.refresh(!0)})));m(o,{loading:!0,error:void 0});var a=Y(e)(),s=K(a,(function(e,t){if(!o.disposed&&n===s)if(e)m(o,{loading:!1,value:t}),ae.emit("load",o,{data:t});else if(m(o,{loading:!1,value:void 0,error:t}),!ae.emit("error",o,{error:t}))throw t}));return n=s,oe(t||ne.root,s),a}}}))[0];return n=[!1!==n].concat(l(n)||[]),e=ce(e),(0,t.useEffect)((function(){return o.disposed=!1,function(){o.disposed=!0}}),[o]),(0,t.useEffect)((function(){n[0]&&o.refresh()}),n),(0,t.useMemo)((function(){n[0]&&!r&&(o.loading=!0)}),n),fe(o,"loading"),[o.value,o]}function de(e){var n=v(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&O(r,t)&&(n[0]=t,e.apply(null,n))}}function pe(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return m(P(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}function ve(){return me.apply(this,arguments).ref}function me(){var e=(0,t.useRef)(!1),n=(0,t.useRef)(null),r=v(arguments),o=(0,t.useState)((function(){return{ref:function(e){n.current=e,s(e)},emit:function(e){return u(e)||i(e)||W()},catch:function(e,t){var n;return t?n=l(e)?function(e,t){return S(t,(function(t){return(d(t)?c:M)(e,t)}))}:d(e)?c:M:t=e,ae.add(o,n?"error":"default",(function(r){if((n||a)(r.error,e))return t(r.error)}))}}}))[0],i=(0,t.useCallback)((function(t){try{return e.current=!0,ne.emit("error",n.current||ne.root,{error:t},!0)}finally{e.current=!1}}),[]),u=(0,t.useCallback)((function(e){return ae.emit("error",o,{error:e})||ae.emit("default",o,{error:e})}),[]),s=de((function(t){ne.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return(0,t.useEffect)((function(){return P(g(r,(function(e){return e.onError(o.emit)})))}),r),o}function he(e){var n=(0,t.useMemo)((function(){return matchMedia(e)}),[e]),r=(0,t.useState)(n.matches);return(0,t.useEffect)((function(){return Z(n,"change",(function(){r[1](n.matches)}))}),[n]),r[0]}function ge(e){var n={};return A(n,!0),h(e,(function(e,t){var r=matchMedia(t),o=T(n,e,r.matches,!0);Z(r,"change",(function(){o(r.matches)}))})),{breakpoints:Object.freeze(n),useBreakpoint:function(){var e=se();return(0,t.useEffect)((function(){return A(n,e)}),[]),n}}}var ye=(0,t.createContext)(null),be=Object.freeze({get:u,set:u}),Se=ye.Provider;function we(e){var n=(0,t.useState)(q)[0],r=(0,t.useContext)(ye),o=r&&e&&r.getState(n,e)||be;return(0,t.useEffect)((function(){return o.dispose&&o.dispose.bind(o)}),[o]),o}var xe=F(),Ce=Ve.prototype,Ee=new ue;function ke(e,t){var n=f(e)&&-1,r=f(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function Ve(e,t,n,r){var o=this,i={filters:m({},e),sortBy:t,sortOrder:n||t&&"asc",pageIndex:0,pageSize:void 0===r?Ve.pageSize:r};for(var u in e=m({},e))T(e,u);var a=xe(o,{filters:Object.freeze(e),defaults:i,items:[]}),s=function(){a.sorted=a.items.length?void 0:[],this!==o&&(a.filtered=a.sorted),Ee.emitAsync("viewChange",o)};m(this,i),A(o,s),A(o.filters,s)}function Oe(e,n,r,o,i){if("string"!=typeof e)return Oe("__dataView",e,n,r,o);var a=we(e),s=se(),c=(0,t.useState)((function(){return m(new Ve(n,r,o,i),a.get())}))[0];return(0,t.useEffect)((function(){var e=xe(c);return P(c.on("viewChange",s),a.onPopState?a.onPopState((function(t){a.set(c.toJSON()),m(c,t||e.defaults)})):u,(function(){a.set(c.toJSON())}))}),[c]),c}j(Ve,{pageSize:0}),H(Ve,{itemCount:0,on:function(e,t){return Ee.add(this,e,t)},getView:function(e,t){var n=this,r=xe(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=v(e),!d(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return h(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(l(n)?w(n,(function(e,t){return ke(e,i[t])})):ke(n,i))}))},toJSON:function(){var e=this;return m(C(e,N(xe(e).defaults)),{filters:m({},e.filters),itemCount:e.itemCount})},reset:function(){m(this,xe(this).defaults)}}),T(Ce,"sortBy"),T(Ce,"sortOrder"),T(Ce,"pageIndex"),T(Ce,"pageSize"),T(Ce,"filters",{},(function(e){return m(xe(this).filters,e)}));var Pe=new WeakMap;function Fe(e,t){var n;return t=p(e)||x(e,t),function(e){if(e){if(n)throw new Error("Callback can only be passed to single React element");void 0===(n=k(Pe,e,Array)).index&&(n.index=0),t=h(t,(function(t,r){var o=n.index++;n[o]||ne.on(e,t,(function(){return n[o].apply(this,arguments)})),n[o]=D(r)}))}else n.index=0}}function Re(){var e=[];return function t(n){h(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(v(r.getClassNames()));else for(var o in r){var i=r[o];i&&e.push(!0===i?o:o+"-"+i)}}))}(v(arguments)),e.join(" ")}function ze(e){return p(e)?{dangerouslySetInnerHTML:e}:{children:e}}function De(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=x(t,d(n)?n(e[t],e):n)),m({},e,t)}))};return t?n.bind(0,t):n}function Me(){return P(v(arguments).map(Ne))}function Ne(e){return e&&!d(e)?function(t){return e.current=t}:e||u}function Ie(e,n){n=n||t.Fragment,d(n)&&(n=(0,t.createElement)(n));var r=(0,t.lazy)(e);return function(e){return(0,t.createElement)(t.Suspense,{fallback:n},(0,t.createElement)(r,e))}}function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function He(){}function Te(e){return(0,t.useMemo)((function(){return(e||[]).map((function(e){return"object"===je(e)?e:{label:String(e),value:e}}))}),[e])}j(He,{normalizeItems:Te}),H(He,{defaultValue:"",postHook:function(e,n){var r=Te(n.items),o=r.findIndex((function(t){return t.value===e.value}));return(0,t.useEffect)((function(){o<0&&(o=n.allowUnselect||!r[0]?-1:0,e.setValue(o<0?"":r[0].value))})),m(e,{items:r,selectedIndex:o,selectedItem:r[o]})}});var Ae=/^-?\d{4,}-\d{2}-\d{2}$/,Le=6e4*(new Date).getTimezoneOffset(),qe={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function We(e){if("string"==typeof e){if(Ae.test(e))return Date.parse(e+" 00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=Ke(Date.now()),n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[qe[i][1]](t[qe[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return e-(e-Le)%864e5}function Be(e,t,n){var r=c(e,Date)||We(e);return r<t?t:r>n?n:e}function Ke(e){var t=We(e);return isNaN(t)?null:new Date(t)}function _e(e){if(!isNaN(e)){var t=new Date(e-Le).toISOString();return t.slice(0,t.indexOf("T",10))}return""}function Je(){}function Ue(){}function Ye(){}function Ge(){}function $e(){}qe.w=qe.d,j(Je,{toDateString:_e,toDateObject:Ke}),H(Je,{defaultValue:"",normalizeValue:function(e){return _e(We(e))},postHook:function(e,n){var r=e.setValue,o=e.value,i=We(n.min),u=We(n.max),a=(0,t.useMemo)((function(){return o&&n.formatDisplay?n.formatDisplay(Ke(o)):o}),[o]);return(0,t.useEffect)((function(){var e=o&&Be(o,i,u);e!==o&&r(e)}),[o,i,u]),m(e,{min:_e(i),max:_e(u),displayText:a,setValue:ce((function(t){(t=d(t)?t(e.value):t)?/\d{4}/.test(t)&&/[^\s\d]/.test(t)&&(t=Ke(t),isNaN(t)||r(Be(t,i,u))):r("")}))})}}),H(Ue,{defaultValue:L([]),normalizeValue:function(e){return l(e)||v(e)},postHook:function(e,n){var r=n.allowCustomValues||!n.items,o=He.normalizeItems(n.items),i=function(e){return!o.some((function(t){return t.value===e}))},u=ce((function(t,n){!r&&i(t)||e.setValue((function(e){var r=e.indexOf(t);return(f(n)||s(r<0,n))&&(e=v(e),r<0?e.push(t):e.splice(r,1)),e}))}));return(0,t.useEffect)((function(){if(!r){var t=v(e.value);b(t,i).length&&e.setValue(t)}})),m(e,{items:o,toggleValue:u})}}),H(Ye,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,n){var r=e.value,o=n.min,i=n.max,u=n.step,a=n.allowEmpty;return(0,t.useEffect)((function(){var t=u>0?Math.round(r/u)*u:r;t<o||isNaN(t)&&!a?t=o||0:t>i&&(t=i),t!==r&&e.setValue(t)}),[r,o,i,u,a]),e}}),H(Ge,{defaultValue:"",postHook:function(e,t){var n=e.form,r=C(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,m(e,{inputProps:r})}}),H($e,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e){return e}});var Qe=F(),Ze=new ue,Xe=new WeakMap,et=new WeakMap,tt=new Map,nt={text:Ge,toggle:$e,choice:He},rt=(0,t.createContext)(null),ot=rt.Provider;function it(e,t,n){this.kind=e,this.args=n,this.message=t}function ut(e){return f(e)||""===e||l(e)&&!e.length}function at(e){return e.props.required&&(e.props.isEmpty||e.preset.isEmpty||ut)(e.value)}function st(e){return Qe(e)?m(!0,l(e)?[]:{},e):e}function ct(e){return(Qe(e)||"").uniqueId}function ft(e,t){for(var n=l(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!I(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function lt(e,t){var n=ft(e,t),r=ct(n.parent);return r&&Qe(e).fields[r+"."+n.name]}function dt(e,t,n){if(t===e.data)return n;for(var r=Qe(e).paths,o=[n],i=ct(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return ft(e,o).parent===t?o.join("."):""}function pt(){h(tt,(function(e){var t=Qe(e),n=V(tt,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;if(Ze.emit("dataChange",e,N(n)),yt(e,y(t.fields,(function(t){return n[t.path]&&(t.props.validateOnChange+1||e.validateOnChange+1)>1}))),e.preventLeave&&!t.unlock){var o=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));ie(t.ref||ne.root,o,(function(){return Ze.emit("beforeLeave",e)||B()}))}}))}function vt(e){var t,n=vt.d||(vt.d=t=new Set);try{e()}finally{n===t&&(h(t,(function(e,t){t.onChange(t.value)})),vt.d=null)}}function mt(e,t){var n=Qe(e),r=l(t)?[]:{},o=q(),i=function(t,i){var a=dt(e,s,t);if(a){if(i){if(i.value=r[t],i.value!==r[t])return void u(t,i.value);vt.d.add(i)}for(var c=o;c=n.paths[c];c=c.slice(0,8))n.fields[c]&&vt.d.add(n.fields[c]);return k(tt,e,Object)[a]=!0,R(pt),!0}},u=function(t,i){return(p(i)||l(i))&&((Qe(i)||"").context!==e&&(i=mt(e,i)),n.paths[ct(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},s=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||e[t]===r&&t in e||vt((function(){var a=e[t];if(l(e)){if("length"===t){for(var s=a-1;s>=r;s--)i(s);return e[t]=r,!0}}else{if(Qe(r)&&z("Cannot assign proxied data object"),l(r)&&l(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(p(r)&&Qe(a)){for(var c in E(a,r))delete a[c];return m(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t])})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&vt((function(){a(t),i(t)})),!0}});return Qe(s,{context:e,uniqueId:o,set:u,delete:a}),h(t,(function(e,t){u(e,t)})),s}function ht(e){var t={initialValue:e,value:e,error:"",preset:{},onChange:function(e){t.props.onChange&&t.props.onChange(st(e))},setValue:function(e){e=d(e)?e(t.value):e,t.controlled?e!==t.value&&t.onChange(e):t.value=e},setError:function(e){t.error=d(e)?e(t.error):e,(t.form||{}).isValid=null},elementRef:function(e){t.element=e}};return A(t,!0),T(t,"value",e,(function(e,n){return(e=(t.preset.normalizeValue||a)(e,t.props))!==n&&Qe(n)?(t.dict[t.name]=e,n):e})),T(t,"error","",(function(e){return d(e)||c(e,it)?function(e,t){return{toString:function(){return c(t,it)?w([e.props,e.form||"",bt],(function(n){return(n.formatError||u).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),A(t,"value",(function(e){t.key?t.dict[t.name]=e:t.controlled||t.onChange(e)})),A(t,"error",(function(e){t.key&&Ze.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function gt(e,n,r,o,i,u,a,s){var c="error"in i,f=r.key||s;m(r,{form:e,props:i,preset:o,controlled:u,dict:a,key:s}),e&&s&&(r.name=s.slice(9),r.path=dt(e,a,r.name),f!==s&&(r.locks=[],c||(r.error="")),n.fields[s]=r),c&&(r.error=i.error),(0,t.useEffect)((function(){return e&&s&&(n.fields[s]=r),function(){n&&n.fields[s]===r&&(delete n.fields[s],r.props.clearWhenUnmount&&Qe(a).delete(s.slice(9)),n.setValid())}}),[n,r,s]),(0,t.useEffect)((function(){n&&n.setValid()}),[n,r.error,i.disabled,i.required])}function yt(e,t){var n=Qe(e),r=g(t,at),o=function(t){var n=t.path,r=t.value;return Ze.emit("validate",e,{name:n,value:r})||((t.props||"").onValidate||u)(r,n,e)},i=t.map((function(e){var t=e.locks||(e.locks=[]),n=t[0];return n?t[1]||(t[1]=K(t[0],(function(){var r=o(e);return K(r,(function(){t[0]===n&&t.shift()})),r}))):(t[0]=W(o(e)),t[0])}));return _(i).then((function(e){return t.forEach((function(t,n){t.locks[0]===i[n]&&(t.locks.shift(),t.error=e[n]),e[n]=e[n]||r[n]})),n.setValid(),!S(e)}))}function bt(e,t,n){var r=this,o={},i=Qe(r,{fields:o,viewState:n,paths:{},initialData:e,setValid:T(this,"isValid",!0,(function(){return!S(o,(function(e){return!e.props.disabled&&(e.error||at(e))}))}))});m(r,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),m({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),r.ref=function(e){i.ref=e,e&&et.set(e,r)},r.isValid=!0,r.data=mt(r,n.get()||i.initialData)}function St(e,n,r){if("string"!=typeof e)return St("",e,n);var o=we(e),i=(0,t.useState)((function(){return new bt(n,r,o)}))[0],a=se();return fe(i,"isValid"),(0,t.useEffect)((function(){return P(i.on("dataChange",a),i.on("reset",a),(function(){(Qe(i).unlock||u)(),i.autoPersist&&(i.persist(),i.autoPersist=!0)}))}),[i]),i}function wt(e,n,r,o){"string"==typeof e&&(e=nt[e]),d(e)||(o=r,r=n,n=e,e="");var i=e?k(Xe,e,e):{};o=o||i.valueProperty||"value";var u=(0,t.useContext)(rt),s=u&&Qe(u).context,c=s&&Qe(s),f=n.name||"",l=s&&f&&ct(u)+"."+f,p=o in n,v=(0,t.useState)((function(){return ht(p?n[o]:(i.normalizeValue||a)(s&&f in u?u[f]:void 0!==r?r:i.defaultValue))}))[0];gt(s,c,v,i,n,p,u,l),p&&(v.value=n[o]),s&&l&&(f in u?p||(v.value=u[f]):v.value=Qe(u).set(f,v.initialValue));var m=(i.postHook||a)({form:s,key:l,path:v.path,value:v.value,error:String(v.error),setValue:v.setValue,setError:v.setError,elementRef:v.elementRef},n);return m.value=fe(v,"value"),m.error=String(fe(v,"error")),m}function xt(){var e=y(v(arguments),d);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),W())}}function Ct(e,t){d(t)&&(t={postHook:t}),nt[e]=function(){return t}}vt.d=null,j(bt,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return w(Q(e),et.get.bind(et))||null}}),H(bt,{element:function(e){return e?(lt(this,e)||"").element:Qe(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?g(Qe(this).fields,(function(t){return t.error&&1&e||ut(t.value)&&2&e?t.element:null})).sort($)[0]:this.element(e))&&te(t)},on:function(e,t){return Ze.add(this,e,t)},persist:function(){var e=this;Qe(e).viewState.set(e.toJSON()),e.autoPersist=!1},restore:function(){var e=Qe(this).viewState.get();return e&&this.reset(e),!!e},reset:function(e){var t=this,n=Qe(t),r=Qe(t.data);for(var o in t.data)r.delete(o);h(e||n.initialData,(function(e,t){r.set(e,t)})),h(n.fields,(function(e,n){var r=ft(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value),n.error=null})),n.setValid(),(n.unlock||u)(),Ze.emit("reset",t)},getValue:function(e){return st(ft(this,e).value)},setValue:function(e,t){var n=ft(this,e);n.parent&&(n.parent[n.name]=st(t))},getErrors:function(){var e=y(Qe(this).fields,(function(e){return e.error}));return e[0]?Object.fromEntries(e.map((function(e){return[e.path,String(e.error)]}))):null},getError:function(e){return String((lt(this,e)||"").error||"")},setError:function(e,t){(lt(this,e)||{}).error=t},validate:function(){var e=this,t=Qe(e).fields,n=v(arguments);return n[0]?yt(e,y(t,(function(e){return S(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):yt(e,y(t,(function(e){return!e.props.disabled})))},toJSON:function(){return m(!0,{},this.data)}});var Et=(0,t.forwardRef)((function(e,n){var r=e.context;return m(r,C(e,["enterKeyHint","preventLeave","formatError"])),(0,t.createElement)(ot,{value:r.data},(0,t.createElement)("form",m(E(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:Me(n,r.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||u).call(this,t)},onReset:function(t){t.preventDefault(),r.reset(),(e.onReset||u).call(this,t)}})))}));function kt(e){return(0,t.createElement)(ot,{value:e.value.data},e.children)}function Vt(e){return Ot(m({},e,{defaultValue:[]}))}function Ot(e){var n=(0,t.useContext)(rt);Qe(n)||z("Missing form context");var r=(0,t.useRef)(),o=Qe(n).context,i=Qe(o),a=e.name,s=e.value;a?(s=p(n[a])||l(n[a])||e.defaultValue||{},s=Qe(n).set(a,s)):(Qe(s)||"").context||z("Value must be a data object or array");var c=i.paths[ct(s)];if("boolean"!=typeof(i.fields[c]||"").controlled){var f=r.current||(r.current=ht(s));gt(o,i,f,{},e,0,n,c),f.value=s}else(0,t.useEffect)(u,[null]),(0,t.useEffect)(u,[null]);var v=e.children;return d(v)&&(v=v(s)),(0,t.createElement)(ot,{value:s},v)}j(Ot,{keyFor:ct});const Pt=e;n.react=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map