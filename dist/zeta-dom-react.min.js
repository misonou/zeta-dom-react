/*! zeta-dom-react v0.5.8 | (c) misonou | https://misonou.github.io */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("zeta-dom"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["zeta-dom","react","react-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("zeta-dom"),require("react"),require("react-dom")):(e.zeta=e.zeta||{},e.zeta.react=t(e.zeta,e.React,e.ReactDOM))}(self,((e,t,n)=>(()=>{"use strict";var r={12:e=>{e.exports=t},33:e=>{e.exports=n},231:t=>{t.exports=e}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{i.r(u),i.d(u,{ChoiceField:()=>kt,DataView:()=>pt,DateField:()=>Mt,Form:()=>vn,FormArray:()=>mn,FormContext:()=>fn,FormContextProvider:()=>pn,FormObject:()=>hn,HiddenField:()=>gn,MultiChoiceField:()=>It,NumericField:()=>Nt,TextField:()=>Ht,ToggleField:()=>jt,ValidationError:()=>Jt,ViewStateProvider:()=>at,classNames:()=>yt,combineRef:()=>St,combineValidators:()=>ln,createBreakpointContext:()=>ot,createDependency:()=>tt,domEventRef:()=>gt,innerTextOrHTML:()=>bt,isSingletonDisposed:()=>$e,partial:()=>wt,registerFieldType:()=>dn,toRefCallback:()=>Vt,useAsync:()=>Ue,useAutoSetRef:()=>Le,useDataView:()=>mt,useDependency:()=>nt,useDispose:()=>Ge,useEagerReducer:()=>Ae,useEagerState:()=>qe,useErrorHandler:()=>Xe,useErrorHandlerRef:()=>Ze,useEventTrigger:()=>We,useFormContext:()=>cn,useFormField:()=>sn,useMediaQuery:()=>rt,useMemoizedFunction:()=>_e,useObservableProperty:()=>Je,useRefInitCallback:()=>Ye,useSingleton:()=>Qe,useUnloadEffect:()=>et,useUpdateTrigger:()=>Be,useValueTrigger:()=>Ke,useViewState:()=>ft,withSuspense:()=>Ct});var e=i(231),t=e.util,n=t.always,r=t.any,o=t.arrRemove,a=t.catchAsync,f=t.clearImmediateOnce,c=t.combineFn,s=t.createPrivateStore,l=t.deferrable,d=t.define,v=t.defineGetterProperty,p=t.defineObservableProperty,m=t.defineOwnProperty,h=t.definePrototype,g=t.delay,y=t.each,b=t.either,w=t.exclude,S=t.extend,V=t.fill,C=t.freeze,x=t.grep,k=t.hasOwnProperty,O=t.is,E=t.isArray,z=t.isErrorWithCode,P=t.isFunction,D=t.isPlainObject,F=t.isUndefinedOrNull,R=t.keys,M=t.kv,I=t.makeArray,N=t.makeAsync,H=t.map,j=t.mapGet,T=t.mapRemove,L=t.noop,A=t.pick,q=t.pipe,B=t.randomId,K=t.resolve,W=t.resolveAll,_=t.sameValueZero,J=t.setAdd,U=t.setImmediate,Y=t.setImmediateOnce,G=t.single,$=t.splice,Q=t.throwNotFunction,Z=t.throws,X=t.watch,ee=i(12),te=ee.Fragment,ne=ee.StrictMode,re=ee.Suspense,oe=ee.createContext,ie=ee.createElement,ue=ee.forwardRef,ae=ee.lazy,fe=ee.useCallback,ce=ee.useContext,se=ee.useEffect,le=ee.useMemo,de=ee.useReducer,ve=ee.useRef,pe=ee.useState,me=e.util,he=me.bind,ge=me.comparePosition,ye=me.parentsAndSelf,be=e.dom;const we=be;var Se=be.focus,Ve=be.reportError,Ce=e.dom,xe=Ce.notifyAsync,ke=Ce.preventLeave,Oe=e.EventContainer,Ee=i(33),ze=!0;Ee.flushSync((function(){function e(){return ze=!ze,null}var t=document.createElement("div"),n=ie(ne,null,ie(e));Ee.createRoot?Ee.createRoot(t).render(n):Ee.render(n,t)}));var Pe=ze,De=s(),Fe=new Oe,Re=new Map,Me=new WeakSet,Ie=new Set,Ne=window.AbortController,He=Pe?function(e,t,n){var r=le((function(){var n=e();return Re.has(n)||(Re.set(n,t),Te.d=0,f(Te)),n}),n);return se((function(){var e=function(e){Re.get(r).d=e?4:2,Te.d|=e?1:2,Y(Te)};return e(!0),e}),[r]),r}:function(e,t,n){var r=le(e,n);return se((function(){return function(){Me.add(r),t(r,!0)}}),[r]),r},je=Object.is||function(e,t){return _(e,t)&&(0!==e||1/e==1/t)};function Te(){y(Re,(function(e,t){Te.d&(t.d||1)&&(Me.add(e),T(Re,e)(e,2===t.d))})),Te.d=0}function Le(e){var t=ve();return t.current=e,t}function Ae(e,t){var n=pe((function(){var r=P(t)?t():t;return[r,function t(o){o=e(r,o),je(o,r)||(r=o,n[1]([r,t]))}]}));return n[0]}function qe(e){return Ae((function(e,t){return P(t)?t(e):t}),e)}function Be(){return de((function(){return{}}))[1]}function Ke(e,t){var n=Ae((function(e,n){return(t||je)(e.current,n)?e:{current:n}}),{});return n[0].current=e,n[1]}function We(e,t,n,r){var o=qe(r);return se((function(){var r=function(e){o[1](n?n.bind(this,e):{})};return e.addEventListener?he(e,t,r):e.on(V(t,r))}),[e,t]),n?o[0]:void 0}function _e(e){var t=Le(e);return fe((function(){return(P(t.current)||L).apply(this,arguments)}),[])}function Je(e,t){var n=e[t],r=Ke(n);return se((function(){return r(e[t]),X(e,t,r)}),[e,t]),n}function Ue(e,t,r){var o=Qe((function(){var t,i,u;return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return Fe.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(f){if(r&&!f)return(u=u||l()).waitFor(g(r)),u.d||(u.d=function(e){return a(e),e}(u.then((function(){return u=null,o.refresh(!0)}))));var c=Ne?new Ne:{abort:L};i&&i.abort(),S(o,{loading:!0,error:void 0});var s=N(e)(c.signal),d=n(s,(function(e,t){if(i===c)if(i=null,e)S(o,{loading:!1,value:t}),Fe.emit("load",o,{data:t});else if(S(o,{loading:!1,value:void 0,error:t}),!Fe.emit("error",o,{error:t}))throw t}));return i=c,xe(t||we.root,d),s},abort:function(e){i&&(i.abort(e),i=null),o.loading=!1}}}),(function(){o.abort()}));return t=[!1!==t].concat(E(t)||[]),e=_e(e),se((function(){t[0]&&Y(o.refresh)}),t),le((function(){t[0]&&!r&&(o.loading=!0)}),t),Je(o,"loading"),[o.value,o]}function Ye(e){var t=I(arguments),n=pe(new WeakSet)[0];return function(r){r&&J(n,r)&&(t[0]=r,e.apply(null,t))}}function Ge(){var e=pe((function(){var e=[function(){e.splice(0,e.length-1)}];return S(c(e),{push:e.splice.bind(e,-1,0)})}))[0];return se((function(){return e}),[e]),e}function $e(e){return Me.has(e)}function Qe(e,t){var n=function(e){(t||e.dispose||L).call(e)};return P(e)?He(e,n,[]):He(q.bind(0,e),n,[e])}function Ze(){return Xe.apply(this,arguments).ref}function Xe(){var e=ve(!1),t=ve(null),n=I(arguments),o=pe((function(){return{ref:function(e){t.current=e,a(e)},emit:function(e){return u(e)||i(e)||K()},catch:function(e,t){var n;return t?n=E(e)?function(e,t){return r(t,(function(t){return(P(t)?O:z)(e,t)}))}:P(e)?O:z:t=e,Fe.add(o,n?"error":"default",(function(r){if((n||q)(r.error,e))return t(r.error)}))}}}))[0],i=fe((function(n){try{return e.current=!0,Ve(n,t.current)}finally{e.current=!1}}),[]),u=fe((function(e){return Fe.emit("error",o,{error:e})||Fe.emit("default",o,{error:e})}),[]),a=Ye((function(t){we.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return se((function(){return c(H(n,(function(e){return e.onError(o.emit)})))}),n),o}function et(e){e=_e(e),Ie.add(e),He(q.bind(0,e),(function(t,n){return Ie.delete(e),n&&e(!1)}),[])}function tt(e){var t=C({}),n={Provider:t},r=De(n,S([],n));return p(r,"current",e,(function(){return r[0]?r[0].value:e})),De(t,r),C(n)}function nt(e,t,n){var r=De(e);if(e===r.Provider){var i=le((function(){return{}}),[r]);return r.indexOf(i)<0&&r.push(i),Qe(i,(function(){o(r,i),r.current=null})),le((function(){t=P(t)?t():t,i.value===t&&k(i,"value")||(m(i,"value",t,!0),r.current=null)}),[i].concat(n||[t])),i}return Je(r,"current")}function rt(e){var t=le((function(){return matchMedia(e)}),[e]);return We(t,"change"),t.matches}function ot(e){var t={},n=X(t,!0),r=c(H(e,(function(e,o){var i=matchMedia(e),u=p(t,o,i.matches,!0);return he(i,"change",(function(){i.matches!==t[o]&&n(r)})),function(){return u(i.matches)}})));return{breakpoints:Object.freeze(t),useBreakpoint:function(){var e=I(arguments),n=Be();return se((function(){return X(t,(function(t){e.length&&!G(e,k.bind(0,t.newValues))||n()}))}),e),t}}}he(window,"pagehide",(function(e){c(I(Ie))(e.persisted)}));var it=oe(null),ut=Object.freeze({get:L,set:L}),at=it.Provider;function ft(e){var t=pe(B)[0],n=ce(it);return Qe(n&&e&&n.getState(t,e)||ut)}var ct=s(),st=pt.prototype,lt=new Oe;function dt(e,t){var n=F(e)&&-1,r=F(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function vt(e,t,n){ct(e).setPageCount(Math.ceil(n/(t||n||1)))}function pt(e,t,n,r){var o=this,i={filters:S({},e),sortBy:t,sortOrder:n||t&&"asc",itemCount:null,pageIndex:0,pageSize:void 0===r?pt.pageSize:r},u=ct(o,{setPageCount:p(o,"pageCount",0,!0),defaults:i,items:[]}),a=function(){lt.emit("viewChange",o)},f=function(e){var t=this!==o,n=t||G(e.newValues,(function(e,t){return"pageCount"!==t&&"itemCount"!==t}));u.sorted=u.items.length?void 0:[],t&&(u.filtered=u.sorted),o.pageIndex=t||!k(e.newValues,"pageIndex")?0:o.pageIndex,n&&Y(a)};e=S(o,i).filters;for(var c in u.callback=X(e,!1),X(o,f),X(o.filters,f),e)p(e,c);C(e)}function mt(e,t,n,r,o){if("string"!=typeof e)return mt("__dataView",e,t,n,r);var i=ft(e),u=Be(),a=pe((function(){return new pt(t,n,r,o).reset(i.get())}))[0];return se((function(){return c(a.on("viewChange",(function(){i.set(a.toJSON()),u()})),i.onPopState?i.onPopState((function(e){i.set(a.toJSON()),a.reset(e)})):L)}),[a]),a}d(pt,{pageSize:0}),h(pt,{get hasPreviousPage(){return this.pageIndex>0},get hasNextPage(){return this.pageIndex<this.pageCount-1},on:function(e,t){return lt.add(this,e,t)},getView:function(e,t){var n=this,r=ct(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=I(e),!P(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return y(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(E(n)?G(n,(function(e,t){return dt(e,i[t])})):dt(n,i))}))},toggleSort:function(e,t){var n=this;n.sortBy===e?n.sortOrder="asc"===n.sortOrder?"desc":"asc":(n.sortBy=e,n.sortOrder=t||"asc")},toJSON:function(){var e=this;return S(A(e,R(ct(e).defaults)),{filters:S({},e.filters),itemCount:e.itemCount})},reset:function(e){var t=this,n=ct(t);return delete n.itemCount,e=e||n.defaults,n.callback((function(){S(t.filters,e.filters)})),S(t,e)}}),p(st,"sortBy"),p(st,"sortOrder"),p(st,"itemCount",0,(function(e){return ct(this).itemCount=e,vt(this,this.pageSize,e),e||0})),p(st,"pageSize",0,(function(e){return vt(this,e,this.itemCount),e})),p(st,"pageIndex",0,(function(e){return Math.max(0,F(ct(this).itemCount)?e:Math.min(e,this.pageCount-1))})),p(st,"filters",{},(function(e,t){return S(t||{},e)}));var ht=new WeakMap;function gt(e,t){var n;return t=D(e)||M(e,t),function(e){if(e){if(n&&n.ref)throw new Error("Callback can only be passed to single React element");void 0===(n=j(ht,e,Array)).index&&(n.index=0);var r=n.index++,o=n[r]||(n[r]={keys:{}});y(t,(function(t,n){Q(n),o.keys[t]=o.keys[t]||we.on(e,t,(function(){return(o.handler[t]||L).apply(this,arguments)}))})),o.handler=t}else n.index=0;n.ref=e}}function yt(){var e=[];return function t(n){y(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(I(r.getClassNames()));else for(var o in r){var i=r[o];(i||0===i)&&e.push(!0===i?o:o+"-"+i)}}))}(I(arguments)),e.join(" ")}function bt(e){return D(e)?{dangerouslySetInnerHTML:e}:{children:e}}function wt(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=M(t,P(n)?n(e[t],e):n)),G(t,(function(n,r){return n!==e[r]&&S({},e,t)}))||e}))};return t?n.bind(0,t):n}function St(){return c(I(arguments).map(Vt))}function Vt(e){return e&&!P(e)?function(t){return e.current=t}:e||L}function Ct(e,t){P(t=t||te)&&(t=ie(t));var n=ae(e);return function(e){return ie(re,{fallback:t},ie(n,e))}}function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function kt(){}function Ot(e){return le((function(){return(e||[]).map((function(e){return"object"===xt(e)?e:{label:String(e),value:e}}))}),[e])}d(kt,{normalizeItems:Ot}),h(kt,{defaultValue:"",postHook:function(e,t){var n=Ot(t.items),r=n.findIndex((function(t){return t.value===e.value}));return se((function(){r<0&&(r=t.allowUnselect||!n[0]?-1:0,e.setValue(r<0?"":n[0].value))})),S(e,{items:n,selectedIndex:r,selectedItem:n[r]})}});var Et=/^-?\d{4,}-\d{2}-\d{2}$/,zt={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function Pt(e){if("string"==typeof e){if(Et.test(e))return Date.parse(e+"T00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=new Date,n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[zt[i][1]](t[zt[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return new Date(e).setHours(0,0,0,0)}function Dt(e,t,n){var r=Pt(e);return r<t?t:r>n?n:e}function Ft(e){var t=Pt(e);return isNaN(t)?null:new Date(t)}function Rt(e){if(!isNaN(e)){var t=6e4*new Date(e).getTimezoneOffset(),n=new Date(e-t).toISOString();return n.slice(0,n.indexOf("T",10))}return""}function Mt(){}function It(){}function Nt(){}function Ht(){}function jt(){}zt.w=zt.d,d(Mt,{toDateString:Rt,toDateObject:Ft}),h(Mt,{defaultValue:"",normalizeValue:function(e){return Rt(Pt(e))},postHook:function(e,t){var n=e.setValue,r=e.value,o=Pt(t.min),i=Pt(t.max),u=le((function(){return r&&t.formatDisplay?t.formatDisplay(Ft(r)):r}),[r]);return se((function(){var e=r&&Dt(r,o,i);e!==r&&n(e)}),[r,o,i]),S(e,{min:Rt(o),max:Rt(i),displayText:u,setValue:_e((function(t){(t=P(t)?t(e.value):t)?/\d{4}/.test(t)&&/[^\s\d]/.test(t)&&(t=Pt(t),isNaN(t)||n(Dt(t,o,i))):n("")}))})}}),h(It,{defaultValue:C([]),normalizeValue:function(e){return E(e)||I(e)},postHook:function(e,t){var n=t.allowCustomValues||!t.items,r=kt.normalizeItems(t.items),o=function(e){return!r.some((function(t){return t.value===e}))},i=_e((function(t,r){!n&&o(t)||e.setValue((function(e){var n=e.indexOf(t);return(F(r)||b(n>=0,r))&&(e=I(e),n<0?e.push(t):e.splice(n,1)),e}))})),u=le((function(){return I(e.value)}),[e.version]);return se((function(){if(!n){var t=I(u);$(t,o).length&&e.setValue(t)}})),S(e,{value:u,items:r,toggleValue:i})}}),h(Nt,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,t){var n=e.value,r=t.min,o=t.max,i=t.step,u=t.allowEmpty;return se((function(){var t=i>0?Math.round(n/i)*i:n;t<r||isNaN(t)&&!u?t=r||0:t>o&&(t=o),t!==n&&e.setValue(t)}),[n,r,o,i,u]),e}}),h(Ht,{defaultValue:"",normalizeValue:function(e){return F(e)?"":String(e)},postHook:function(e,t){var n=e.form,r=A(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint","readOnly"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,S(e,{inputProps:r})}}),h(jt,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e){var t=fe((function(){e.setValue((function(e){return!e}))}),[]);return S(e,{toggleValue:t})}});var Tt=s(),Lt=new Oe,At=new WeakMap,qt=new Map,Bt=new fn({},{},{get:L}),Kt={text:Ht,toggle:jt,choice:kt},Wt=oe(null),_t=Wt.Provider;function Jt(e,t,n){this.kind=e,this.args=n,this.message=t}function Ut(e){return F(e)||""===e||E(e)&&!e.length}function Yt(e){return e.props.required&&e.isEmpty(e.value)}function Gt(e){return Tt(e)?S(!0,E(e)?[]:{},e):e}function $t(e){return(Tt(e)||"").uniqueId}function Qt(e,t){for(var n=E(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!k(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function Zt(e,t){var n=Qt(e,t),r=$t(n.parent);return r&&Tt(e).fields[r+"."+n.name]}function Xt(e,t,n){if(t===e.data)return n;for(var r=Tt(e).paths,o=n?[n]:[],i=$t(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return Qt(e,o)[n?"parent":"value"]===t?o.join("."):""}function en(){y(qt,(function(e){var t=Tt(e),n=T(qt,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;var o=t.ref||we.root,i=x(t.fields,(function(e){return n[e.path]}));if(Lt.emit("dataChange",e,R(n)),un(e,x(i,(function(t){return t.version&&(t.props.validateOnChange+1||e.validateOnChange+1)>1}))),e.preventLeave&&!t.unlock&&i[0]&&"script"!==we.getEventSource(o)){var u=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));ke(o,u,(function(){return Lt.emit("beforeLeave",e)||K()}))}}))}function tn(e){var t,n=tn.d||(tn.d=t=new Set);try{e()}finally{n===t&&(y(t,(function(e,t){t.onChange(t.value)})),tn.d=null)}}function nn(e,t){var n=Tt(e),r=E(t)?[]:{},o=B(),i=function(t,i,a){var c=Xt(e,f,t);if(c){if(i){var s=i.normalizeValue(r[t]);if(_(s,r[t])||u(t,s),_(i.value,s)||(i.value=s,i.version++),s===a)return;tn.d.add(i)}for(var l=o;l=n.paths[l];l=l.slice(0,8))n.fields[l]&&tn.d.add(n.fields[l]);return e!==Bt&&(j(qt,e,Object)[c]=!0,Y(en)),!0}},u=function(t,i){return(D(i)||E(i))&&((Tt(i)||"").state!==n&&(i=nn(e,i)),n.paths[$t(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},f=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||_(e[t],r)&&t in e||tn((function(){var a=e[t];if(E(e)){if("length"===t){for(var f=a-1;f>=r;f--)i(f);return e[t]=r,!0}}else{if(Tt(r)&&Z("Cannot assign proxied data object"),E(r)&&E(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(D(r)&&Tt(a)){for(var c in w(a,r))delete a[c];return S(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t],a)})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&tn((function(){a(t),i(t)})),!0}});for(var c in Tt(f,{state:n,uniqueId:o,set:u,delete:a}),t)u(c,t[c]);return f}function rn(e){var t={version:0,initialValue:e,error:"",preset:{},onChange:function(e){t.controlled||t.version++,t.props.onChange&&t.props.onChange(Gt(e))},setValue:function(e){e=P(e)?e(t.value):e,t.controlled?_(e,t.value)||t.onChange(e):t.dict[t.name]=e},setError:function(e){t.error=P(e)?e(t.error):e,(t.form||{}).isValid=null},validate:function(){return un(t.form,[t])},isEmpty:function(e){return(t.props.isEmpty||(t.preset.isEmpty||Ut).bind(t.preset))(e)},normalizeValue:function(e){return(t.preset.normalizeValue||q).call(t.preset,e,t.props)},elementRef:function(e){t.element=e}};return X(t,!0),p(t,"error","",(function(e){return P(e)||O(e,Jt)?function(e,t){return{toString:function(){return O(t,Jt)?G([e.props,e.form||"",fn],(function(n){return(n.formatError||L).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),X(t,"error",(function(e){t.form&&Lt.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function on(e,t,n,r,o,i,u){var a=e.form===Bt?null:e.form,f=u?$t(i)+"."+u:e.paths[$t(i)],c=t.key!==f;S(t,{form:a,props:r,preset:n,controlled:o,dict:i,key:f,name:u,path:a?Xt(a,i,u):"",error:"error"in r?r.error:c?"":t.error,locks:c?[]:t.locks});var s=a?e.setValid:L;e.fields[f]=t,se((function(){return e.fields[f]=t,function(){e.fields[f]===t&&(delete e.fields[f],!t.props.clearWhenUnmount&&a||U((function(){e.fields[f]||delete i[u]})),s())}}),[e,t,f]),se((function(){s()}),[e,t.error,r.disabled,r.required])}function un(e,t){var o=function(t){var n=t.path,r=t.value,o=Lt.emit("validate",e,{name:n,value:r});return o||!t.props?o:(t.props.onValidate||L)(r,n,e)||Yt(t)&&new Jt("required","Required")},i=t.map((function(e){var t=e.locks||(e.locks=[]),r=t[0];return r?t[1]||(t[1]=n(t[0],(function(){var i=o(e);return n(i,(function(){t[0]===r&&t.shift()})),i}))):(t[0]=K(o(e)),t[0])}));return W(i).then((function(n){t.forEach((function(e,t){e.locks[0]===i[t]&&(e.locks.shift(),e.error=n[t])}));var o=Tt(e);return o&&o.setValid(),!r(n)}))}function an(e){Tt(e).viewState.set(e.toJSON())}function fn(e,t,n){P(e)&&(e=e());var o=this,i={},u=Tt(o,{form:o,fields:i,viewState:n,paths:{},initialData:e,setValid:p(this,"isValid",!0,(function(){return!r(i,(function(e){return!e.props.disabled&&(e.error||Yt(e))}))}))});S(o,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),S({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),o.ref=function(e){u.ref=e,e&&At.set(e,o)},o.isValid=!0,o.data=nn(o,n.get()||u.initialData)}function cn(e,t,n){if("string"!=typeof e)return cn("",e,t);var r=ft(e),o=pe((function(){return new fn(t,n,r)}))[0],i=Be();return Je(o,"isValid"),et((function(){(Tt(o).unlock||L)(),o.autoPersist&&an(o)})),se((function(){return T(qt,o)&&i(),o.on({dataChange:i,reset:i})}),[o]),o}function sn(e,t,n,r){"string"==typeof e?e=Kt[e]:P(e)||(r=n,n=t,t=e,e="");var o=pe(B)[0],i=ce(Wt),u=le((function(){return e?new e:{}}),[e]);r=r||u.valueProperty||"value";var a=i,f=t.name;a&&f||(a=Bt.data,f=o);var c=f in a,s=r in t,l=pe((function(){return rn(s?t[r]:void 0!==n?n:u.defaultValue)}))[0],d=l.key;on(Tt(a).state,l,u,t,s,a,f);var v=s?t[r]:c?a[f]:l.initialValue;return d!==l.key&&(v=l.normalizeValue(v)),!l.form||!c&&l.isEmpty(v)?Tt(a).set(f,v):a[f]=v,l.value=a[f],c||(l.version=0),Je(l,"error"),Je(l,"version"),(u.postHook||q).call(u,{form:i&&Tt(i).state.form,key:l.form?l.key:"",path:l.path,value:l.value,error:String(l.error),version:l.version,setValue:l.setValue,setError:l.setError,validate:l.validate,elementRef:l.elementRef},t)}function ln(){var e=x(I(arguments),P);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),K())}}function dn(e,t){P(t)&&(t={postHook:t}),Kt[e]=function(){return t}}tn.d=null,d(fn,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return G(ye(e),At.get.bind(At))||null}}),h(fn,{element:function(e){return e?(Zt(this,e)||"").element:Tt(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?H(Tt(this).fields,(function(t){return t.error&&1&e||t.isEmpty(t.value)&&2&e?t.element:null})).sort(ge)[0]:this.element(e))&&Se(t)},on:function(e,t){return Lt.add(this,e,t)},persist:function(){an(this),this.autoPersist=!1},restore:function(){var e=Tt(this).viewState.get();return e&&this.reset(e),!!e},clear:function(){this.reset({})},reset:function(e){var t=this,n=Tt(t),r=Tt(t.data);for(var o in t.data)r.delete(o);for(var o in e=e||n.initialData)r.set(o,e[o]);y(n.fields,(function(e,n){var r=Qt(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value,n.version=0),n.error=null})),n.setValid(),(n.unlock||L)(),Lt.emit("reset",t)},getValue:function(e){return Gt(Qt(this,e).value)},setValue:function(e,t){var n=Qt(this,e);n.parent&&(n.parent[n.name]=Gt(t))},getErrors:function(){var e=x(Tt(this).fields,(function(e){return e.error}));return e[0]?e.reduce((function(e,t){return e[t.path]=String(t.error),e}),{}):null},getError:function(e){return String((Zt(this,e)||"").error||"")},setError:function(e,t){(Zt(this,e)||{}).error=t},validate:function(){var e=this,t=Tt(e).fields,n=I(arguments);return n.length?un(e,x(t,(function(e){return r(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):un(e,x(t,(function(e){return!e.props.disabled})))},toJSON:function(){return S(!0,{},this.data)}}),p(fn.prototype,"preventLeave",!1,(function(e){return e||(Tt(this).unlock||L)(),!!e}));var vn=ue((function(e,t){var n=e.context;return S(n,A(e,["enterKeyHint","preventLeave","formatError"])),ie(_t,{value:n.data},ie("form",S(w(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:St(t,n.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||L).call(this,t)},onReset:function(t){t.preventDefault(),n.reset(),(e.onReset||L).call(this,t)}})))}));function pn(e){return ie(_t,{value:e.value.data},e.children)}function mn(e){return hn(S({},e,{defaultValue:[]}))}function hn(e){var t=pe(B)[0],n=e.name,r=ce(Wt);r||(r=Bt.data,n=t);var o=ve(),i=e.value;(Tt(i)||"").state?(r=i,n=""):n?(i="value"in e?i:D(r[n])||E(r[n])||e.defaultValue||{},i=Tt(r).set(n,i)):Z("Value must be a data object or array");var u=Tt(r).state,a=u.fields[u.paths[$t(i)]];a&&0!==a.controlled?(se(L,[null]),se(L,[null])):(on(u,a=o.current||(o.current=rn(i)),{},e,0,r,n),a.value=i);var f=e.children;return P(f)&&(f=f(i)),ie(_t,{value:i},f)}function gn(e){return sn(e,e.value),null}d(hn,{keyFor:$t}),v(window,"zeta-dom-react",(function(){return console.warn('window["zeta-dom-react"] is deprecated, access zeta.react instead.'),zeta.react}))})(),u})()));
//# sourceMappingURL=zeta-dom-react.min.js.map