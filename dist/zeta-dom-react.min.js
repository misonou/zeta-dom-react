!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>Ot});var e={};o.r(e),o.d(e,{ChoiceField:()=>je,DataView:()=>ke,DateField:()=>_e,Form:()=>wt,FormArray:()=>kt,FormContext:()=>yt,FormContextProvider:()=>Ct,FormObject:()=>Vt,MultiChoiceField:()=>Je,NumericField:()=>Ue,TextField:()=>Ye,ToggleField:()=>Ge,ValidationError:()=>ot,ViewStateProvider:()=>be,classNames:()=>Fe,combineRef:()=>De,combineValidators:()=>xt,createBreakpointContext:()=>he,domEventRef:()=>Pe,innerTextOrHTML:()=>Re,partial:()=>ze,registerFieldType:()=>Et,toRefCallback:()=>Me,useAsync:()=>fe,useDataView:()=>Ve,useDispose:()=>de,useErrorHandler:()=>ve,useErrorHandlerRef:()=>pe,useFormContext:()=>bt,useFormField:()=>St,useMediaQuery:()=>me,useMemoizedFunction:()=>se,useObservableProperty:()=>ce,useRefInitCallback:()=>le,useUpdateTrigger:()=>ae,useViewState:()=>Se,withSuspense:()=>Ne});var t=o(359),n=o(654),r=n.util,u=r.noop,a=r.pipe,s=r.either,c=r.is,f=r.isUndefinedOrNull,l=r.isArray,d=r.isFunction,p=(r.isThenable,r.isPlainObject),v=(r.isArrayLike,r.makeArray),m=r.extend,h=r.each,g=r.map,y=r.grep,b=r.splice,S=r.any,x=r.single,E=r.kv,w=(r.fill,r.pick),C=r.exclude,k=(r.mapObject,r.mapGet),V=r.mapRemove,O=(r.arrRemove,r.setAdd),P=(r.equal,r.combineFn),F=(r.executeOnce,r.createPrivateStore),R=(r.setTimeout,r.setTimeoutOnce,r.setInterval,r.setIntervalSafe,r.setImmediate,r.setImmediateOnce),z=r.throws,D=r.throwNotFunction,M=(r.errorWithCode,r.isErrorWithCode),N=r.keys,I=(r.values,r.hasOwnProperty),j=(r.getOwnPropertyDescriptors,r.define),T=r.definePrototype,H=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty),A=r.watch,L=(r.watchOnce,r.watchable,r.inherit,r.freeze),q=(r.deepFreeze,r.iequal,r.randomId),W=(r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),B=(r.reject,r.always),K=r.resolveAll,_=(r.retryable,r.deferrable),J=(r.catchAsync,r.setPromiseTimeout,r.delay),U=r.makeAsync,Y=n.util,G=(Y.domReady,Y.tagName,Y.isVisible,Y.matchSelector,Y.comparePosition),$=(Y.connected,Y.containsOrEquals,Y.acceptNode,Y.combineNodeFilters,Y.iterateNode,Y.iterateNodeToArray,Y.getCommonAncestor,Y.parentsAndSelf),Q=(Y.selectIncludeSelf,Y.selectClosestRelative,Y.createNodeIterator,Y.createTreeWalker,Y.bind);Y.bindUntil,Y.dispatchDOMMouseEvent,Y.removeNode,Y.getClass,Y.setClass,Y.getScrollOffset,Y.getScrollParent,Y.getContentRect,Y.scrollBy,Y.scrollIntoView,Y.makeSelection,Y.getRect,Y.getRects,Y.toPlainRect,Y.rectEquals,Y.rectCovers,Y.rectIntersects,Y.pointInRect,Y.mergeRect,Y.elementFromPoint;const Z=n.dom;var X=n.dom,ee=(X.textInputAllowed,X.beginDrag,X.beginPinchZoom,X.insertText,X.getShortcut,X.setShortcut,X.focusable,X.focused,X.setModal,X.releaseModal,X.retainFocus,X.releaseFocus,X.iterateFocusPath,X.focus);const te=Z;var ne=n.dom,re=(ne.lock,ne.locked,ne.cancelLock,ne.subscribeAsync,ne.notifyAsync),oe=ne.preventLeave,ie=n.EventContainer,ue=new ie;function ae(){var e=(0,t.useState)()[1];return(0,t.useCallback)((function(){e({})}),[])}function se(e){var n=(0,t.useRef)();return n.current=d(e)||u,(0,t.useCallback)((function(){return n.current.apply(this,arguments)}),[])}function ce(e,n){var r=ae(),o=e[n],i=(0,t.useRef)();return i.current=o,(0,t.useEffect)((function(){var t=function(e){e!==i.current&&r()};return t(e[n]),A(e,n,t)}),[e,n]),o}function fe(e,n,r){var o=(0,t.useState)((function(){var t,n,i;return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return ue.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(u){if(r&&!u)return(i=i||_()).waitFor(J(r)),i.d||(i.d=i.then((function(){return i=null,o.refresh(!0)})));m(o,{loading:!0,error:void 0});var a=U(e)(),s=B(a,(function(e,t){if(!o.disposed&&n===s)if(e)m(o,{loading:!1,value:t}),ue.emit("load",o,{data:t});else if(m(o,{loading:!1,value:void 0,error:t}),!ue.emit("error",o,{error:t}))throw t}));return n=s,re(t||te.root,s),a}}}))[0];return n=[!1!==n].concat(l(n)||[]),e=se(e),(0,t.useEffect)((function(){return o.disposed=!1,function(){o.disposed=!0}}),[o]),(0,t.useEffect)((function(){n[0]&&o.refresh()}),n),(0,t.useMemo)((function(){n[0]&&!r&&(o.loading=!0)}),n),ce(o,"loading"),[o.value,o]}function le(e){var n=v(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&O(r,t)&&(n[0]=t,e.apply(null,n))}}function de(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return m(P(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}function pe(){return ve.apply(this,arguments).ref}function ve(){var e=(0,t.useRef)(!1),n=(0,t.useRef)(null),r=v(arguments),o=(0,t.useState)((function(){return{ref:function(e){n.current=e,s(e)},emit:function(e){return u(e)||i(e)||W()},catch:function(e,t){var n;return t?n=l(e)?function(e,t){return S(t,(function(t){return(d(t)?c:M)(e,t)}))}:d(e)?c:M:t=e,ue.add(o,n?"error":"default",(function(r){if((n||a)(r.error,e))return t(r.error)}))}}}))[0],i=(0,t.useCallback)((function(t){try{return e.current=!0,te.emit("error",n.current||te.root,{error:t},!0)}finally{e.current=!1}}),[]),u=(0,t.useCallback)((function(e){return ue.emit("error",o,{error:e})||ue.emit("default",o,{error:e})}),[]),s=le((function(t){te.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return(0,t.useEffect)((function(){return P(g(r,(function(e){return e.onError(o.emit)})))}),r),o}function me(e){var n=(0,t.useMemo)((function(){return matchMedia(e)}),[e]),r=(0,t.useState)(n.matches);return(0,t.useEffect)((function(){return Q(n,"change",(function(){r[1](n.matches)}))}),[n]),r[0]}function he(e){var n={};return A(n,!0),h(e,(function(e,t){var r=matchMedia(t),o=H(n,e,r.matches,!0);Q(r,"change",(function(){o(r.matches)}))})),{breakpoints:Object.freeze(n),useBreakpoint:function(){var e=ae();return(0,t.useEffect)((function(){return A(n,e)}),[]),n}}}var ge=(0,t.createContext)(null),ye=Object.freeze({get:u,set:u}),be=ge.Provider;function Se(e){var n=(0,t.useState)(q)[0],r=(0,t.useContext)(ge),o=r&&e&&r.getState(n,e)||ye;return(0,t.useEffect)((function(){return o.dispose&&o.dispose.bind(o)}),[o]),o}var xe=F(),Ee=ke.prototype,we=new ie;function Ce(e,t){var n=f(e)&&-1,r=f(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function ke(e,t,n,r){var o=this,i={filters:m({},e),sortBy:t,sortOrder:n||t&&"asc",pageIndex:0,pageSize:void 0===r?ke.pageSize:r};for(var u in e=m({},e))H(e,u);var a=xe(o,{filters:Object.freeze(e),defaults:i,items:[]}),s=function(){a.sorted=a.items.length?void 0:[],this!==o&&(a.filtered=a.sorted),we.emitAsync("viewChange",o)};m(this,i),A(o,s),A(o.filters,s)}function Ve(e,n,r,o,i){if("string"!=typeof e)return Ve("__dataView",e,n,r,o);var a=Se(e),s=ae(),c=(0,t.useState)((function(){return m(new ke(n,r,o,i),a.get())}))[0];return(0,t.useEffect)((function(){var e=xe(c);return P(c.on("viewChange",s),a.onPopState?a.onPopState((function(t){a.set(c.toJSON()),m(c,t||e.defaults)})):u,(function(){a.set(c.toJSON())}))}),[c]),c}j(ke,{pageSize:0}),T(ke,{itemCount:0,on:function(e,t){return we.add(this,e,t)},getView:function(e,t){var n=this,r=xe(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=v(e),!d(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return h(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(l(n)?x(n,(function(e,t){return Ce(e,i[t])})):Ce(n,i))}))},toJSON:function(){var e=this;return m(w(e,N(xe(e).defaults)),{filters:m({},e.filters),itemCount:e.itemCount})},reset:function(){m(this,xe(this).defaults)}}),H(Ee,"sortBy"),H(Ee,"sortOrder"),H(Ee,"pageIndex"),H(Ee,"pageSize"),H(Ee,"filters",{},(function(e){return m(xe(this).filters,e)}));var Oe=new WeakMap;function Pe(e,t){var n;return t=p(e)||E(e,t),function(e){if(e){if(n)throw new Error("Callback can only be passed to single React element");void 0===(n=k(Oe,e,Array)).index&&(n.index=0),t=h(t,(function(t,r){var o=n.index++;n[o]||te.on(e,t,(function(){return n[o].apply(this,arguments)})),n[o]=D(r)}))}else n.index=0}}function Fe(){var e=[];return function t(n){h(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(v(r.getClassNames()));else for(var o in r){var i=r[o];i&&e.push(!0===i?o:o+"-"+i)}}))}(v(arguments)),e.join(" ")}function Re(e){return p(e)?{dangerouslySetInnerHTML:e}:{children:e}}function ze(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=E(t,d(n)?n(e[t],e):n)),m({},e,t)}))};return t?n.bind(0,t):n}function De(){return P(v(arguments).map(Me))}function Me(e){return e&&!d(e)?function(t){return e.current=t}:e||u}function Ne(e,n){n=n||t.Fragment,d(n)&&(n=(0,t.createElement)(n));var r=(0,t.lazy)(e);return function(e){return(0,t.createElement)(t.Suspense,{fallback:n},(0,t.createElement)(r,e))}}function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function je(){}function Te(e){return(0,t.useMemo)((function(){return(e||[]).map((function(e){return"object"===Ie(e)?e:{label:String(e),value:e}}))}),[e])}j(je,{normalizeItems:Te}),T(je,{defaultValue:"",postHook:function(e,n){var r=Te(n.items),o=r.findIndex((function(t){return t.value===e.value}));return(0,t.useEffect)((function(){o<0&&(o=n.allowUnselect||!r[0]?-1:0,e.setValue(o<0?"":r[0].value))})),m(e,{items:r,selectedIndex:o,selectedItem:r[o]})}});var He=/^-?\d{4,}-\d{2}-\d{2}$/,Ae=6e4*(new Date).getTimezoneOffset(),Le={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function qe(e){if("string"==typeof e){if(He.test(e))return Date.parse(e+" 00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=Be(Date.now()),n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[Le[i][1]](t[Le[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return e-(e-Ae)%864e5}function We(e,t,n){var r=c(e,Date)||qe(e);return r<t?t:r>n?n:e}function Be(e){var t=qe(e);return isNaN(t)?null:new Date(t)}function Ke(e){if(!isNaN(e)){var t=new Date(e-Ae).toISOString();return t.slice(0,t.indexOf("T",10))}return""}function _e(){}function Je(){}function Ue(){}function Ye(){}function Ge(){}Le.w=Le.d,j(_e,{toDateString:Ke,toDateObject:Be}),T(_e,{defaultValue:"",normalizeValue:function(e){return Ke(qe(e))},postHook:function(e,n){var r=e.setValue,o=e.value,i=qe(n.min),u=qe(n.max),a=(0,t.useMemo)((function(){return o&&n.formatDisplay?n.formatDisplay(Be(o)):o}),[o]);return(0,t.useEffect)((function(){var e=o&&We(o,i,u);e!==o&&r(e)}),[o,i,u]),m(e,{min:Ke(i),max:Ke(u),displayText:a,setValue:se((function(t){(t=d(t)?t(e.value):t)?/\d{4}/.test(t)&&/[^\s\d]/.test(t)&&(t=Be(t),isNaN(t)||r(We(t,i,u))):r("")}))})}}),T(Je,{defaultValue:L([]),normalizeValue:function(e){return l(e)||v(e)},postHook:function(e,n){var r=n.allowCustomValues||!n.items,o=je.normalizeItems(n.items),i=function(e){return!o.some((function(t){return t.value===e}))},u=se((function(t,n){!r&&i(t)||e.setValue((function(e){var r=e.indexOf(t);return(f(n)||s(r>=0,n))&&(e=v(e),r<0?e.push(t):e.splice(r,1)),e}))}));return(0,t.useEffect)((function(){if(!r){var t=v(e.value);b(t,i).length&&e.setValue(t)}})),m(e,{items:o,toggleValue:u})}}),T(Ue,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,n){var r=e.value,o=n.min,i=n.max,u=n.step,a=n.allowEmpty;return(0,t.useEffect)((function(){var t=u>0?Math.round(r/u)*u:r;t<o||isNaN(t)&&!a?t=o||0:t>i&&(t=i),t!==r&&e.setValue(t)}),[r,o,i,u,a]),e}}),T(Ye,{defaultValue:"",postHook:function(e,t){var n=e.form,r=w(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,m(e,{inputProps:r})}}),T(Ge,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e){return e}});var $e=F(),Qe=new ie,Ze=new WeakMap,Xe=new WeakMap,et=new Map,tt={text:Ye,toggle:Ge,choice:je},nt=(0,t.createContext)(null),rt=nt.Provider;function ot(e,t,n){this.kind=e,this.args=n,this.message=t}function it(e){return f(e)||""===e||l(e)&&!e.length}function ut(e){return e.props.required&&(e.props.isEmpty||e.preset.isEmpty||it)(e.value)}function at(e){return $e(e)?m(!0,l(e)?[]:{},e):e}function st(e){return($e(e)||"").uniqueId}function ct(e,t){for(var n=l(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!I(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function ft(e,t){var n=ct(e,t),r=st(n.parent);return r&&$e(e).fields[r+"."+n.name]}function lt(e,t,n){if(t===e.data)return n;for(var r=$e(e).paths,o=[n],i=st(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return ct(e,o).parent===t?o.join("."):""}function dt(){h(et,(function(e){var t=$e(e),n=V(et,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;var o=t.ref||te.root,i=y(t.fields,(function(e){return n[e.path]}));if(Qe.emit("dataChange",e,N(n)),gt(e,y(i,(function(t){return(t.props.validateOnChange+1||e.validateOnChange+1)>1}))),e.preventLeave&&!t.unlock&&i[0]&&"script"!==te.getEventSource(o)){var u=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));oe(o,u,(function(){return Qe.emit("beforeLeave",e)||W()}))}}))}function pt(e){var t,n=pt.d||(pt.d=t=new Set);try{e()}finally{n===t&&(h(t,(function(e,t){t.onChange(t.value)})),pt.d=null)}}function vt(e,t){var n=$e(e),r=l(t)?[]:{},o=q(),i=function(t,i){var a=lt(e,s,t);if(a){if(i){if(i.value=r[t],i.value!==r[t])return void u(t,i.value);pt.d.add(i)}for(var c=o;c=n.paths[c];c=c.slice(0,8))n.fields[c]&&pt.d.add(n.fields[c]);return k(et,e,Object)[a]=!0,R(dt),!0}},u=function(t,i){return(p(i)||l(i))&&(($e(i)||"").context!==e&&(i=vt(e,i)),n.paths[st(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},s=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||e[t]===r&&t in e||pt((function(){var a=e[t];if(l(e)){if("length"===t){for(var s=a-1;s>=r;s--)i(s);return e[t]=r,!0}}else{if($e(r)&&z("Cannot assign proxied data object"),l(r)&&l(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(p(r)&&$e(a)){for(var c in C(a,r))delete a[c];return m(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t])})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&pt((function(){a(t),i(t)})),!0}});return $e(s,{context:e,uniqueId:o,set:u,delete:a}),h(t,(function(e,t){u(e,t)})),s}function mt(e){var t={initialValue:e,value:e,error:"",preset:{},onChange:function(e){t.props.onChange&&t.props.onChange(at(e))},setValue:function(e){e=d(e)?e(t.value):e,t.controlled?e!==t.value&&t.onChange(e):t.value=e},setError:function(e){t.error=d(e)?e(t.error):e,(t.form||{}).isValid=null},elementRef:function(e){t.element=e}};return A(t,!0),H(t,"value",e,(function(e,n){return(e=(t.preset.normalizeValue||a)(e,t.props))!==n&&$e(n)?(t.dict[t.name]=e,n):e})),H(t,"error","",(function(e){return d(e)||c(e,ot)?function(e,t){return{toString:function(){return c(t,ot)?x([e.props,e.form||"",yt],(function(n){return(n.formatError||u).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),A(t,"value",(function(e){t.key?t.dict[t.name]=e:t.controlled||t.onChange(e)})),A(t,"error",(function(e){t.key&&Qe.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function ht(e,n,r,o,i,u,a,s){var c="error"in i,f=r.key||s;m(r,{form:e,props:i,preset:o,controlled:u,dict:a,key:s}),e&&s&&(r.name=s.slice(9),r.path=lt(e,a,r.name),f!==s&&(r.locks=[],c||(r.error="")),n.fields[s]=r),c&&(r.error=i.error),(0,t.useEffect)((function(){return e&&s&&(n.fields[s]=r),function(){n&&n.fields[s]===r&&(delete n.fields[s],r.props.clearWhenUnmount&&$e(a).delete(s.slice(9)),n.setValid())}}),[n,r,s]),(0,t.useEffect)((function(){n&&n.setValid()}),[n,r.error,i.disabled,i.required])}function gt(e,t){var n=$e(e),r=g(t,ut),o=function(t){var n=t.path,r=t.value;return Qe.emit("validate",e,{name:n,value:r})||((t.props||"").onValidate||u)(r,n,e)},i=t.map((function(e){var t=e.locks||(e.locks=[]),n=t[0];return n?t[1]||(t[1]=B(t[0],(function(){var r=o(e);return B(r,(function(){t[0]===n&&t.shift()})),r}))):(t[0]=W(o(e)),t[0])}));return K(i).then((function(e){return t.forEach((function(t,n){t.locks[0]===i[n]&&(t.locks.shift(),t.error=e[n]),e[n]=e[n]||r[n]})),n.setValid(),!S(e)}))}function yt(e,t,n){var r=this,o={},i=$e(r,{fields:o,viewState:n,paths:{},initialData:e,setValid:H(this,"isValid",!0,(function(){return!S(o,(function(e){return!e.props.disabled&&(e.error||ut(e))}))}))});m(r,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),m({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),r.ref=function(e){i.ref=e,e&&Xe.set(e,r)},r.isValid=!0,r.data=vt(r,n.get()||i.initialData)}function bt(e,n,r){if("string"!=typeof e)return bt("",e,n);var o=Se(e),i=(0,t.useState)((function(){return new yt(n,r,o)}))[0],a=ae();return ce(i,"isValid"),(0,t.useEffect)((function(){return P(i.on("dataChange",a),i.on("reset",a),(function(){($e(i).unlock||u)(),i.autoPersist&&(i.persist(),i.autoPersist=!0)}))}),[i]),i}function St(e,n,r,o){"string"==typeof e&&(e=tt[e]),d(e)||(o=r,r=n,n=e,e="");var i=e?k(Ze,e,e):{};o=o||i.valueProperty||"value";var u=(0,t.useContext)(nt),s=u&&$e(u).context,c=s&&$e(s),f=n.name||"",l=s&&f&&st(u)+"."+f,p=o in n,v=(0,t.useState)((function(){return mt(p?n[o]:(i.normalizeValue||a)(void 0!==r?r:i.defaultValue))}))[0];ht(s,c,v,i,n,p,u,l),p&&(v.value=n[o]),s&&l&&(f in u?p||(v.value=u[f]):v.value=$e(u).set(f,v.initialValue));var m=(i.postHook||a)({form:s,key:l,path:v.path,value:v.value,error:String(v.error),setValue:v.setValue,setError:v.setError,elementRef:v.elementRef},n);return m.value=ce(v,"value"),m.error=String(ce(v,"error")),m}function xt(){var e=y(v(arguments),d);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),W())}}function Et(e,t){d(t)&&(t={postHook:t}),tt[e]=function(){return t}}pt.d=null,j(yt,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return x($(e),Xe.get.bind(Xe))||null}}),T(yt,{element:function(e){return e?(ft(this,e)||"").element:$e(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?g($e(this).fields,(function(t){return t.error&&1&e||it(t.value)&&2&e?t.element:null})).sort(G)[0]:this.element(e))&&ee(t)},on:function(e,t){return Qe.add(this,e,t)},persist:function(){var e=this;$e(e).viewState.set(e.toJSON()),e.autoPersist=!1},restore:function(){var e=$e(this).viewState.get();return e&&this.reset(e),!!e},clear:function(){this.reset({})},reset:function(e){var t=this,n=$e(t),r=$e(t.data);for(var o in t.data)r.delete(o);h(e||n.initialData,(function(e,t){r.set(e,t)})),h(n.fields,(function(e,n){var r=ct(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value),n.error=null})),n.setValid(),(n.unlock||u)(),Qe.emit("reset",t)},getValue:function(e){return at(ct(this,e).value)},setValue:function(e,t){var n=ct(this,e);n.parent&&(n.parent[n.name]=at(t))},getErrors:function(){var e=y($e(this).fields,(function(e){return e.error}));return e[0]?Object.fromEntries(e.map((function(e){return[e.path,String(e.error)]}))):null},getError:function(e){return String((ft(this,e)||"").error||"")},setError:function(e,t){(ft(this,e)||{}).error=t},validate:function(){var e=this,t=$e(e).fields,n=v(arguments);return n[0]?gt(e,y(t,(function(e){return S(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):gt(e,y(t,(function(e){return!e.props.disabled})))},toJSON:function(){return m(!0,{},this.data)}});var wt=(0,t.forwardRef)((function(e,n){var r=e.context;return m(r,w(e,["enterKeyHint","preventLeave","formatError"])),(0,t.createElement)(rt,{value:r.data},(0,t.createElement)("form",m(C(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:De(n,r.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||u).call(this,t)},onReset:function(t){t.preventDefault(),r.reset(),(e.onReset||u).call(this,t)}})))}));function Ct(e){return(0,t.createElement)(rt,{value:e.value.data},e.children)}function kt(e){return Vt(m({},e,{defaultValue:[]}))}function Vt(e){var n=(0,t.useContext)(nt);$e(n)||z("Missing form context");var r=(0,t.useRef)(),o=$e(n).context,i=$e(o),a=e.name,s=e.value;a?(s=p(n[a])||l(n[a])||e.defaultValue||{},s=$e(n).set(a,s)):($e(s)||"").context||z("Value must be a data object or array");var c=i.paths[st(s)];if("boolean"!=typeof(i.fields[c]||"").controlled){var f=r.current||(r.current=mt(s));ht(o,i,f,{},e,0,n,c),f.value=s}else(0,t.useEffect)(u,[null]),(0,t.useEffect)(u,[null]);var v=e.children;return d(v)&&(v=v(s)),(0,t.createElement)(rt,{value:s},v)}j(Vt,{keyFor:st});const Ot=e;n.react=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map