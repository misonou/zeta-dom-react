!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{a.d(o,{default:()=>V});var e={};a.r(e),a.d(e,{FormContext:()=>z,FormContextProvider:()=>F,classNames:()=>R,useAsyncContent:()=>S,useDispose:()=>k,useFormContext:()=>A,useFormFieldHooks:()=>q,useMemoizedFunction:()=>P,useObservableProperty:()=>O,useRefInitCallback:()=>w});var t=a(359),n=a(654),r=n.util,i=(r.noop,r.either,r.is,r.isUndefinedOrNull,r.isArray,r.isFunction,r.isThenable,r.isPlainObject,r.isArrayLike,r.makeArray),u=r.extend,s=r.each,c=(r.map,r.grep,r.splice,r.any),f=(r.single,r.kv,r.pick,r.exclude,r.mapGet,r.mapRemove,r.arrRemove,r.setAdd),d=(r.equal,r.combineFn),l=(r.executeOnce,r.createPrivateStore),p=(r.setTimeoutOnce,r.setImmediate,r.setImmediateOnce,r.throwNotFunction,r.keys),v=r.values,m=(r.hasOwnProperty,r.getOwnPropertyDescriptors,r.define,r.definePrototype),y=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty,r.watch),h=(r.watchOnce,r.watchable,r.inherit,r.deepFreeze,r.iequal,r.randomId,r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),g=(r.reject,r.always),C=r.resolveAll,b=(r.catchAsync,r.setPromiseTimeout,n.EventContainer),x=new WeakMap;function P(e){var n=(0,t.useState)((function(){return function e(){var t=x.get(e);return t&&t.apply(this,arguments)}}))[0];return x.set(n,e),n}function O(e,n){var r=(0,t.useState)(e[n]),a=r[0],o=r[1];return(0,t.useEffect)((function(){return y(e,n,(function(e){o((function(){return e}))}))}),[e,n]),a}function S(e,n){var r=(0,t.useState)((function(){return{loading:!0,refresh:function(){u(r,{loading:!0,error:void 0}),g(h().then(e),(function(e,t){r.disposed||u(r,e?{loading:!1,value:t}:{loading:!1,value:void 0,error:t})}))}}}))[0];return e=P(e),O(r,"loading"),(0,t.useEffect)((function(){return function(){r.disposed=!0}}),[r]),(0,t.useEffect)((function(){!1!==n&&r.refresh()}),[r,n]),[r.value,r]}function w(e){var n=i(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&f(r,t)&&(n[0]=t,e.apply(null,n))}}function k(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return u(d(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}var j=l(),E=(0,t.createContext)(null),F=E.Provider;function z(e,t){var n=this,r=j(n,{validateCallback:{},validateResult:{},eventContainer:new b,initialData:e||{}});n.isValid=!0,n.validateOnChange=!1!==t,n.data=function(e,t,n){return new Proxy(u({},n),{get:function(e,t){if("string"==typeof t)return e[t]},set:function(n,r,a){return"string"==typeof r&&n[r]!==a&&(r in n&&t.emitAsync("dataChange",e,[r],{},(function(e,t){return e.concat(t)})),n[r]=a),!0}})}(n,r.eventContainer,e),n.on("dataChange",(function(e){n.validate.apply(n,e.data)}))}function A(e,n){var r=(0,t.useState)((function(){return new z(e,n)}))[0],a=(0,t.useState)(0)[1];return(0,t.useEffect)((function(){return r.on("dataChange",(function(){a((function(e){return++e}))}))}),[r]),r}function q(e,n,r){var a=(0,t.useContext)(E),o=e.name||"",i=(0,t.useState)((function(){return a&&a.data[o]||n}))[0],s=(0,t.useState)(i),c=(0,t.useState)(""),f=P(e.onValidate),l=s[0],p=s[1],v=c[0],m=c[1],y=P((function(t){e.onChange?e.onChange("function"==typeof t?t(l):t):console.warn("onChange not supplied")}));return r in e||(y=p,(e=u({},e))[r]=l,e.error=v),(0,t.useEffect)((function(){if(a&&o)return o in a.data&&p(a.data[o]),d(a.on("validationChange",(function(e){e.name===o&&m(e.message)})),a.on("validate",(function(e){if(e.name===o)return f(e.value,e.name)})),a.on("reset",(function(){p(i),m("")})))}),[a,o,i,f]),(0,t.useEffect)((function(){a&&o&&(a.data[o]=l)}),[a,o,l]),{value:e[r],error:e.error||"",setValue:y,setError:m}}function R(){var e=[];return function t(n){s(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(i(r.getClassNames()));else for(var a in r){var o=r[a];o&&e.push(!0===o?a:a+"-"+o)}}))}(i(arguments)),e.join(" ")}m(z,{on:function(e,t){return j(this).eventContainer.add(this,e,t)},reset:function(){var e=this,t=j(e);for(var n in e.data)delete e.data[n];u(e.data,t.initialData),e.isValid=!0,t.eventContainer.emit("reset",e)},validate:function(){var e=this,t=j(e),n=t.validateResult,r=t.eventContainer,a=i(arguments);a.length||(a=p(t.validateCallback));var o=u({},n),s=C(a.map((function(t){return r.emit("validate",e,{name:t,value:e.data[t]})})));return s.then((function(t){return a.forEach((function(a,i){n[a]=t[i],(t[i]||"")!==(o[a]||"")&&r.emit("validationChange",e,{name:a,isValid:!!t[i],message:t[i]||""})})),e.isValid=!c(v(n),(function(e){return e})),!c(t,(function(e){return e}))}))}});const V=e})(),o=o.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map