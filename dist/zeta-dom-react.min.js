/*! zeta-dom-react v0.5.10 | (c) misonou | https://misonou.github.io */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("zeta-dom"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["zeta-dom","react","react-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("zeta-dom"),require("react"),require("react-dom")):(e.zeta=e.zeta||{},e.zeta.react=t(e.zeta,e.React,e.ReactDOM))}(self,((e,t,n)=>(()=>{"use strict";var r={12:e=>{e.exports=t},33:e=>{e.exports=n},231:t=>{t.exports=e}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{i.r(u),i.d(u,{ChoiceField:()=>Ot,DataView:()=>mt,DateField:()=>It,Form:()=>mn,FormArray:()=>gn,FormContext:()=>ln,FormContextProvider:()=>hn,FormObject:()=>yn,HiddenField:()=>bn,MultiChoiceField:()=>Nt,NumericField:()=>Ht,TextField:()=>jt,ToggleField:()=>Tt,ValidationError:()=>Ut,ViewStateProvider:()=>ct,classNames:()=>bt,combineRef:()=>Vt,combineValidators:()=>vn,createBreakpointContext:()=>ut,createDependency:()=>rt,domEventRef:()=>yt,innerTextOrHTML:()=>wt,isSingletonDisposed:()=>Ze,partial:()=>St,registerFieldType:()=>pn,toRefCallback:()=>Ct,useAsync:()=>Ge,useAutoSetRef:()=>Ae,useDataView:()=>ht,useDependency:()=>ot,useDispose:()=>Qe,useEagerReducer:()=>Be,useEagerState:()=>We,useErrorHandler:()=>tt,useErrorHandlerRef:()=>et,useEventTrigger:()=>Je,useFormContext:()=>sn,useFormField:()=>dn,useMediaQuery:()=>it,useMemoizedFunction:()=>Ue,useObservableProperty:()=>Ye,useRefInitCallback:()=>$e,useSingleton:()=>Xe,useUnloadEffect:()=>nt,useUpdateTrigger:()=>Ke,useValueTrigger:()=>_e,useViewState:()=>ft,withSuspense:()=>kt});var e=i(231),t=e.util,n=t.always,r=t.any,o=t.arrRemove,a=t.catchAsync,c=t.clearImmediateOnce,f=t.combineFn,l=t.createPrivateStore,s=t.define,d=t.defineGetterProperty,v=t.defineObservableProperty,p=t.defineOwnProperty,m=t.definePrototype,h=t.delay,g=t.each,y=t.either,b=t.equal,w=t.errorWithCode,S=t.exclude,V=t.extend,C=t.fill,k=t.freeze,x=t.grep,O=t.hasOwnProperty,E=t.is,P=t.isArray,z=t.isErrorWithCode,D=t.isFunction,F=t.isPlainObject,R=t.isUndefinedOrNull,M=t.keys,I=t.kv,N=t.makeArray,H=t.makeAsync,j=t.map,T=t.mapGet,L=t.mapRemove,q=t.noop,A=t.pick,B=t.pipe,W=t.randomId,K=t.resolve,_=t.resolveAll,J=t.sameValueZero,U=t.setAdd,Y=t.setImmediate,G=t.setImmediateOnce,$=t.single,Q=t.splice,Z=t.throwNotFunction,X=t.throws,ee=t.watch,te=i(12),ne=te.Fragment,re=te.StrictMode,oe=te.Suspense,ie=te.createContext,ue=te.createElement,ae=te.forwardRef,ce=te.lazy,fe=te.useCallback,le=te.useContext,se=te.useEffect,de=te.useMemo,ve=te.useReducer,pe=te.useRef,me=te.useState,he=e.util,ge=he.bind,ye=he.comparePosition,be=he.parentsAndSelf,we=e.dom;const Se=we;var Ve=we.focus,Ce=we.reportError,ke=e.dom,xe=ke.notifyAsync,Oe=ke.preventLeave,Ee=e.EventContainer,Pe=e.ErrorCode.cancelled,ze=i(33),De=!0;ze.flushSync((function(){function e(){return De=!De,null}var t=document.createElement("div"),n=ue(re,null,ue(e));ze.createRoot?ze.createRoot(t).render(n):ze.render(n,t)}));var Fe=De,Re=l(),Me=new Ee,Ie=new Map,Ne=new WeakSet,He=new Set,je=window.AbortController,Te=Fe?function(e,t,n){var r=de((function(){var n=e();return Ie.has(n)||(Ie.set(n,t),qe.d=0,c(qe)),n}),n);return se((function(){var e=function(e){Ie.get(r).d=e?4:2,qe.d|=e?1:2,G(qe)};return e(!0),e}),[r]),r}:function(e,t,n){var r=de(e,n);return se((function(){return function(){Ne.add(r),t.call(r,r,!0)}}),[r]),r},Le=Object.is||function(e,t){return J(e,t)&&(0!==e||1/e==1/t)};function qe(){g(Ie,(function(e,t){qe.d&(t.d||1)&&(Ne.add(e),L(Ie,e).call(e,e,2===t.d))})),qe.d=0}function Ae(e){var t=pe();return t.current=e,t}function Be(e,t){var n=me((function(){var r=D(t)?t():t;return[r,function t(o){o=e(r,o),Le(o,r)||(r=o,n[1]([r,t]))}]}));return n[0]}function We(e){return Be((function(e,t){return D(t)?t(e):t}),e)}function Ke(){return ve((function(){return{}}))[1]}function _e(e,t){var n=Be((function(e,n){return(t||Le)(e.current,n)?e:{current:n}}),{});return n[0].current=e,n[1]}function Je(e,t,n,r){var o=We(r);return se((function(){var r=function(e){o[1](n?n.bind(this,e):{})};return e.addEventListener?ge(e,t,r):e.on(C(t,r))}),[e,t]),n?o[0]:void 0}function Ue(e){var t=Ae(e);return fe((function(){return(D(t.current)||q).apply(this,arguments)}),[])}function Ye(e,t){var n=e[t],r=_e(n);return se((function(){return r(e[t]),ee(e,t,r)}),[e,t]),n}function Ge(e,t,r){var o=Xe((function(){var t,u,c,f=0,l=function(e,t,n,r){u&&(u.abort(r),u=null),c=null,V(o,{loading:e,value:t,error:n}),i([e,t,n])},s=function(){var r=je?new je:{abort:q},i=H(e)(r.signal),a=n(i,(function(e,t){if(u===r)if(u=null,e)l(!1,t),Me.emit("load",o,{data:t});else if(l(!1,void 0,t),!Me.emit("error",o,{error:t}))throw t}));return l(!0,o.value),f=Date.now(),u=r,xe(t||Se.root,a),i};return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return Me.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(){return c||(e=new Promise((function(e,t){var n=u||{abort:q};u={abort:function(e){n.abort(e),t(e||w(Pe))}},(Date.now()-f<r?h(r):Promise.resolve()).then(e)})).then(s),a(e),c=e);var e},abort:function(e){l(!1,o.value,o.error,e)},reset:function(){l(!1),f=0}}}),[],(function(){o.abort()}));t=[!1!==t].concat(P(t)||[]),e=Ue(e),se((function(){t[0]&&o.refresh()}),t),de((function(){t[0]&&!r&&(o.loading=!0)}),t);var i=_e([o.loading,o.value,o.error],b);return[o.value,o]}function $e(e){var t=N(arguments),n=me(new WeakSet)[0];return function(r){r&&U(n,r)&&(t[0]=r,e.apply(null,t))}}function Qe(){var e=me((function(){var e=[function(){e.splice(0,e.length-1)}];return V(f(e),{push:e.splice.bind(e,-1,0)})}))[0];return se((function(){return e}),[e]),e}function Ze(e){return Ne.has(e)}function Xe(e,t,n){return D(t)&&(n=t,t=[]),n=n||function(e){(e.dispose||q).call(e)},D(e)?Te(e,n,t||[]):Te(B.bind(0,e),n,[e])}function et(){return tt.apply(this,arguments).ref}function tt(){var e=pe(!1),t=pe(null),n=N(arguments),o=me((function(){return{ref:function(e){t.current=e,a(e)},emit:function(e){return u(e)||i(e)||K()},catch:function(e,t){var n;return t?n=P(e)?function(e,t){return r(t,(function(t){return(D(t)?E:z)(e,t)}))}:D(e)?E:z:t=e,Me.add(o,n?"error":"default",(function(r){if((n||B)(r.error,e))return t(r.error)}))}}}))[0],i=fe((function(n){try{return e.current=!0,Ce(n,t.current)}finally{e.current=!1}}),[]),u=fe((function(e){return Me.emit("error",o,{error:e})||Me.emit("default",o,{error:e})}),[]),a=$e((function(t){Se.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return se((function(){return f(j(n,(function(e){return e.onError(o.emit)})))}),n),o}function nt(e){e=Ue(e),He.add(e),Te(B.bind(0,e),(function(t,n){return He.delete(e),n&&e(!1)}),[])}function rt(e){var t=k({}),n=k({}),r={Provider:t,Consumer:n},o=Re(r,V([],r));return v(o,"current",e,(function(){return o[0]?o[0].value:e})),Re(t,o),Re(n,o),k(r)}function ot(e,t,n){var r=Re(e);if(e===r.Provider){var i=Xe((function(){var e={};return r.push(e)&&e}),[r],(function(){o(r,i),r.current=null}));return de((function(){t=D(t)?t():t,i.value===t&&O(i,"value")||(p(i,"value",t,!0),r.current=null)}),[i].concat(n||[t])),i}return Ye(r,"current")}function it(e){var t=de((function(){return matchMedia(e)}),[e]);return Je(t,"change"),t.matches}function ut(e){var t={},n=ee(t,!0),r=f(j(e,(function(e,o){var i=matchMedia(e),u=v(t,o,i.matches,!0);return ge(i,"change",(function(){i.matches!==t[o]&&n(r)})),function(){return u(i.matches)}})));return{breakpoints:Object.freeze(t),useBreakpoint:function(){var e=N(arguments),n=Ke();return se((function(){return ee(t,(function(t){e.length&&!$(e,O.bind(0,t.newValues))||n()}))}),e),t}}}ge(window,"pagehide",(function(e){f(N(He))(e.persisted)}));var at=ie(null),ct=at.Provider;function ft(e){var t=me(W)[0],n=le(at);return Xe((function(){return n&&e&&n.getState(t,e)||{get:q,set:q}}),[n,e,t])}var lt=l(),st=mt.prototype,dt=new Ee;function vt(e,t){var n=R(e)&&-1,r=R(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function pt(e,t,n){lt(e).setPageCount(Math.ceil(n/(t||n||1)))}function mt(e,t,n,r){var o=this,i={filters:V({},e),sortBy:t,sortOrder:n||t&&"asc",itemCount:null,pageIndex:0,pageSize:void 0===r?mt.pageSize:r},u=lt(o,{setPageCount:v(o,"pageCount",0,!0),defaults:i,items:[]}),a=function(){dt.emit("viewChange",o)},c=function(e){var t=this!==o,n=t||$(e.newValues,(function(e,t){return"pageCount"!==t&&"itemCount"!==t}));u.sorted=u.items.length?void 0:[],t&&(u.filtered=u.sorted),o.pageIndex=t||!O(e.newValues,"pageIndex")?0:o.pageIndex,n&&G(a)};e=V(o,i).filters;for(var f in u.callback=ee(e,!1),ee(o,c),ee(o.filters,c),e)v(e,f);k(e)}function ht(e,t,n,r,o){if("string"!=typeof e)return ht("__dataView",e,t,n,r);var i=ft(e),u=Ke(),a=me((function(){return new mt(t,n,r,o).reset(i.get())}))[0];return se((function(){return f(a.on("viewChange",(function(){i.set(a.toJSON()),u()})),i.onPopState?i.onPopState((function(e){i.set(a.toJSON()),a.reset(e)})):q)}),[a]),a}s(mt,{pageSize:0}),m(mt,{get hasPreviousPage(){return this.pageIndex>0},get hasNextPage(){return this.pageIndex<this.pageCount-1},on:function(e,t){return dt.add(this,e,t)},getView:function(e,t){var n=this,r=lt(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=N(e),!D(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return g(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(P(n)?$(n,(function(e,t){return vt(e,i[t])})):vt(n,i))}))},toggleSort:function(e,t){var n=this;n.sortBy===e?n.sortOrder="asc"===n.sortOrder?"desc":"asc":(n.sortBy=e,n.sortOrder=t||"asc")},toJSON:function(){var e=this;return V(A(e,M(lt(e).defaults)),{filters:V({},e.filters),itemCount:e.itemCount})},reset:function(e){var t=this,n=lt(t);return delete n.itemCount,e=e||n.defaults,n.callback((function(){V(t.filters,e.filters)})),V(t,e)}}),v(st,"sortBy"),v(st,"sortOrder"),v(st,"itemCount",0,(function(e){return lt(this).itemCount=e,pt(this,this.pageSize,e),e||0})),v(st,"pageSize",0,(function(e){return pt(this,e,this.itemCount),e})),v(st,"pageIndex",0,(function(e){return Math.max(0,R(lt(this).itemCount)?e:Math.min(e,this.pageCount-1))})),v(st,"filters",{},(function(e,t){return V(t||{},e)}));var gt=new WeakMap;function yt(e,t){var n;return t=F(e)||I(e,t),function(e){if(e){if(n&&n.ref)throw new Error("Callback can only be passed to single React element");void 0===(n=T(gt,e,Array)).index&&(n.index=0);var r=n.index++,o=n[r]||(n[r]={keys:{}});g(t,(function(t,n){Z(n),o.keys[t]=o.keys[t]||Se.on(e,t,(function(){return(o.handler[t]||q).apply(this,arguments)}))})),o.handler=t}else n.index=0;n.ref=e}}function bt(){var e=[];return function t(n){g(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(N(r.getClassNames()));else for(var o in r){var i=r[o];(i||0===i)&&e.push(!0===i?o:o+"-"+i)}}))}(N(arguments)),e.join(" ")}function wt(e){return F(e)?{dangerouslySetInnerHTML:e}:{children:e}}function St(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=I(t,D(n)?n(e[t],e):n)),$(t,(function(n,r){return n!==e[r]&&V({},e,t)}))||e}))};return t?n.bind(0,t):n}function Vt(){return f(N(arguments).map(Ct))}function Ct(e){return e&&!D(e)?function(t){return e.current=t}:e||q}function kt(e,t){D(t=t||ne)&&(t=ue(t));var n=ce(e);return function(e){return ue(oe,{fallback:t},ue(n,e))}}function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function Ot(){}function Et(e){return(e||[]).map((function(e){return"object"===xt(e)?e:{label:String(e),value:e}}))}s(Ot,{normalizeItems:Et}),m(Ot,{defaultValue:"",postHook:function(e,t,n){var r=n.memo((function(){return Et(t.items)}),[t.items]),o=r.findIndex((function(t){return t.value===e.value}));return n.effect((function(){o<0&&(o=t.allowUnselect||!r[0]?-1:0,e.setValue(o<0?"":r[0].value))})),V(e,{items:r,selectedIndex:o,selectedItem:r[o]})}});var Pt=/^-?\d{4,}-\d{2}-\d{2}$/,zt={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function Dt(e){if("string"==typeof e){if(Pt.test(e))return Date.parse(e+"T00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=new Date,n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[zt[i][1]](t[zt[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return new Date(e).setHours(0,0,0,0)}function Ft(e,t,n){var r=Dt(e);return r<t?t:r>n?n:e}function Rt(e){var t=Dt(e);return isNaN(t)?null:new Date(t)}function Mt(e){if(!isNaN(e)){var t=6e4*new Date(e).getTimezoneOffset(),n=new Date(e-t).toISOString();return n.slice(0,n.indexOf("T",10))}return""}function It(){}function Nt(){}function Ht(){}function jt(){}function Tt(){}zt.w=zt.d,s(It,{toDateString:Mt,toDateObject:Rt}),m(It,{defaultValue:"",normalizeValue:function(e){return Mt(Dt(e))},postHook:function(e,t,n){var r=e.setValue,o=e.value,i=Dt(t.min),u=Dt(t.max),a=n.memo((function(){return o&&t.formatDisplay?t.formatDisplay(Rt(o)):o}),[o]);return n.effect((function(){var e=o&&Ft(o,i,u);e!==o&&r(e)}),[o,i,u]),V(e,{min:Mt(i),max:Mt(u),displayText:a,setValue:n.callback((function(e){(e=D(e)?e(o):e)?/\d{4}/.test(e)&&/[^\s\d]/.test(e)&&(e=Dt(e),isNaN(e)||r(Ft(e,i,u))):r("")}))})}}),m(Nt,{defaultValue:k([]),normalizeValue:function(e){return P(e)||N(e)},postHook:function(e,t,n){var r=t.allowCustomValues||!t.items,o=n.memo((function(){return Ot.normalizeItems(t.items)}),[t.items]),i=function(e){return!o.some((function(t){return t.value===e}))},u=n.callback((function(t,n){!r&&i(t)||e.setValue((function(e){var r=e.indexOf(t);return(R(n)||y(r>=0,n))&&(e=N(e),r<0?e.push(t):e.splice(r,1)),e}))})),a=n.memo((function(){return N(e.value)}),[e.version]);return n.effect((function(){if(!r){var t=N(a);Q(t,i).length&&e.setValue(t)}})),V(e,{value:a,items:o,toggleValue:u})}}),m(Ht,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,t,n){var r=e.value,o=t.min,i=t.max,u=t.step,a=t.allowEmpty;return n.effect((function(){var t=u>0?Math.round(r/u)*u:r;t<o||isNaN(t)&&!a?t=o||0:t>i&&(t=i),t!==r&&e.setValue(t)}),[r,o,i,u,a]),e}}),m(jt,{defaultValue:"",normalizeValue:function(e){return R(e)?"":String(e)},postHook:function(e,t){var n=e.form,r=A(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint","readOnly"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,V(e,{inputProps:r})}}),m(Tt,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e,t,n){return V(e,{toggleValue:n.callback((function(){e.setValue((function(e){return!e}))}))})}});var Lt=l(),qt=new Ee,At=new WeakMap,Bt=new Map,Wt=new ln({},{},{get:q}),Kt={text:jt,toggle:Tt,choice:Ot},_t=ie(null),Jt=_t.Provider;function Ut(e,t,n){this.kind=e,this.args=n,this.message=t}function Yt(e){var t=[],n=function(n,r){var o=e.i++;return t[o]=r&&t[o]&&b(t[o][0],r)?t[o]:[r,n()],t[o][1]};return{memo:n,callback:function(e){var t=n(Object,[]);return t.current=e,t.cb||(t.cb=function(){return t.current.apply(this,arguments)})},effect:function(t,r){n((function(){e.push(Z(t))}),r)}}}function Gt(e){return R(e)||""===e||P(e)&&!e.length}function $t(e){return e.props.required&&e.isEmpty(e.value)}function Qt(e){return Lt(e)?V(!0,P(e)?[]:{},e):e}function Zt(e){return(Lt(e)||"").uniqueId}function Xt(e,t){for(var n=P(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!O(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function en(e,t){var n=Xt(e,t),r=Zt(n.parent);return r&&Lt(e).fields[r+"."+n.name]}function tn(e,t,n){if(t===e.data)return n;for(var r=Lt(e).paths,o=n?[n]:[],i=Zt(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return Xt(e,o)[n?"parent":"value"]===t?o.join("."):""}function nn(){g(Bt,(function(e){var t=Lt(e),n=L(Bt,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;var o=t.ref||Se.root,i=x(t.fields,(function(e){return n[e.path]}));if(qt.emit("dataChange",e,M(n)),cn(e,x(i,(function(t){return t.version&&(t.props.validateOnChange+1||e.validateOnChange+1)>1}))),e.preventLeave&&!t.unlock&&i[0]&&"script"!==Se.getEventSource(o)){var u=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));Oe(o,u,(function(){return qt.emit("beforeLeave",e)||K()}))}}))}function rn(e){var t,n=rn.d||(rn.d=t=new Set);try{e()}finally{n===t&&(g(t,(function(e,t){t.onChange(t.value)})),rn.d=null)}}function on(e,t){var n=Lt(e),r=P(t)?[]:{},o=W(),i=function(t,i,a){var f=tn(e,c,t);if(f){if(i){var l=i.normalizeValue(r[t]);if(J(l,r[t])||u(t,l),J(i.value,l)||(i.value=l,i.version++),l===a)return;rn.d.add(i)}for(var s=o;s=n.paths[s];s=s.slice(0,8))n.fields[s]&&rn.d.add(n.fields[s]);return e!==Wt&&(T(Bt,e,Object)[f]=!0,G(nn)),!0}},u=function(t,i){return(F(i)||P(i))&&((Lt(i)||"").state!==n&&(i=on(e,i)),n.paths[Zt(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},c=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||J(e[t],r)&&t in e||rn((function(){var a=e[t];if(P(e)){if("length"===t){for(var c=a-1;c>=r;c--)i(c);return e[t]=r,!0}}else{if(Lt(r)&&X("Cannot assign proxied data object"),P(r)&&P(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(F(r)&&Lt(a)){for(var f in S(a,r))delete a[f];return V(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t],a)})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&rn((function(){a(t),i(t)})),!0}});for(var f in Lt(c,{state:n,uniqueId:o,set:u,delete:a}),t)u(f,t[f]);return c}function un(e){var t={version:0,initialValue:e,error:"",preset:{},onChange:function(e){t.controlled||t.version++,t.props.onChange&&t.props.onChange(Qt(e))},setValue:function(e){e=D(e)?e(t.value):e,t.controlled?J(e,t.value)||t.onChange(e):t.dict[t.name]=e},setError:function(e){t.error=D(e)?e(t.error):e,(t.form||{}).isValid=null},validate:function(){return cn(t.form,[t])},isEmpty:function(e){return(t.props.isEmpty||(t.preset.isEmpty||Gt).bind(t.preset))(e)},normalizeValue:function(e){return(t.preset.normalizeValue||B).call(t.preset,e,t.props)},elementRef:function(e){t.element=e}};return ee(t,!0),v(t,"error","",(function(e){return D(e)||E(e,Ut)?function(e,t){return{toString:function(){return E(t,Ut)?$([e.props,e.form||"",ln],(function(n){return(n.formatError||q).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),ee(t,"error",(function(e){t.form&&qt.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function an(e,t,n,r,o,i,u){var a=e.form===Wt?null:e.form,c=u?Zt(i)+"."+u:e.paths[Zt(i)],f=t.key!==c;V(t,{form:a,props:r,preset:n,controlled:o,dict:i,key:c,name:u,path:a?tn(a,i,u):"",error:"error"in r?r.error:f?"":t.error,locks:f?[]:t.locks});var l=a?e.setValid:q;e.fields[c]=t,se((function(){return e.fields[c]=t,function(){e.fields[c]===t&&(delete e.fields[c],!t.props.clearWhenUnmount&&a||Y((function(){e.fields[c]||delete i[u]})),l())}}),[e,t,c]),se((function(){l()}),[e,t.error,r.disabled,r.required])}function cn(e,t){var o=function(t){var n=t.path,r=t.value,o=qt.emit("validate",e,{name:n,value:r});return o||!t.props?o:(t.props.onValidate||q)(r,n,e)||$t(t)&&new Ut("required","Required")},i=t.map((function(e){var t=e.locks||(e.locks=[]),r=t[0];return r?t[1]||(t[1]=n(t[0],(function(){var i=o(e);return n(i,(function(){t[0]===r&&t.shift()})),i}))):(t[0]=K(o(e)),t[0])}));return _(i).then((function(n){t.forEach((function(e,t){e.locks[0]===i[t]&&(e.locks.shift(),e.error=n[t])}));var o=Lt(e);return o&&o.setValid(),!r(n)}))}function fn(e){Lt(e).viewState.set(e.toJSON())}function ln(e,t,n){D(e)&&(e=e());var o=this,i={},u=Lt(o,{form:o,fields:i,viewState:n,paths:{},initialData:e,setValid:v(this,"isValid",!0,(function(){return!r(i,(function(e){return!e.props.disabled&&(e.error||$t(e))}))}))});V(o,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),V({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),o.ref=function(e){u.ref=e,e&&At.set(e,o)},o.isValid=!0,o.data=on(o,n.get()||u.initialData)}function sn(e,t,n){if("string"!=typeof e)return sn("",e,t);var r=ft(e),o=me((function(){return new ln(t,n,r)}))[0],i=Ke();return Ye(o,"isValid"),nt((function(){(Lt(o).unlock||q)(),o.autoPersist&&fn(o)})),se((function(){return L(Bt,o)&&i(),o.on({dataChange:i,reset:i})}),[o]),o}function dn(e,t,n,r){"string"==typeof e?e=Kt[e]:D(e)||(r=n,n=t,t=e,e="");var o=me(W)[0],i=le(_t),u=me([])[0],a=de((function(){return e?[new e,Yt(u)]:[{}]}),[e]),c=a[0];r=r||c.valueProperty||"value";var l=i,s=t.name;l&&s||(l=Wt.data,s=o);var d=s in l,v=r in t,p=me((function(){return un(v?t[r]:void 0!==n?n:c.defaultValue)}))[0],m=p.key;an(Lt(l).state,p,c,t,v,l,s);var h=v?t[r]:d?l[s]:p.initialValue;return m!==p.key&&(h=p.normalizeValue(h)),!p.form||!d&&p.isEmpty(h)?Lt(l).set(s,h):l[s]=h,p.value=l[s],d||(p.version=0),u.i=0,u.splice(0),se((function(){f(u)()})),Ye(p,"error"),Ye(p,"version"),(c.postHook||B).call(c,{form:i&&Lt(i).state.form,key:p.form?p.key:"",path:p.path,value:p.value,error:String(p.error),version:p.version,setValue:p.setValue,setError:p.setError,validate:p.validate,elementRef:p.elementRef},t,a[1])}function vn(){var e=x(N(arguments),D);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),K())}}function pn(e,t){D(t)&&(t={postHook:t}),Kt[e]=function(){return t}}rn.d=null,s(ln,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return $(be(e),At.get.bind(At))||null}}),m(ln,{element:function(e){return e?(en(this,e)||"").element:Lt(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?j(Lt(this).fields,(function(t){return t.error&&1&e||t.isEmpty(t.value)&&2&e?t.element:null})).sort(ye)[0]:this.element(e))&&Ve(t)},on:function(e,t){return qt.add(this,e,t)},persist:function(){fn(this),this.autoPersist=!1},restore:function(){var e=Lt(this).viewState.get();return e&&this.reset(e),!!e},clear:function(){this.reset({})},reset:function(e){var t=this,n=Lt(t),r=Lt(t.data);for(var o in t.data)r.delete(o);for(var o in e=e||n.initialData)r.set(o,e[o]);g(n.fields,(function(e,n){var r=Xt(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value,n.version=0),n.error=null})),n.setValid(),(n.unlock||q)(),qt.emit("reset",t)},getValue:function(e){return Qt(Xt(this,e).value)},setValue:function(e,t){var n=Xt(this,e);n.parent&&(n.parent[n.name]=Qt(t))},getErrors:function(){var e=x(Lt(this).fields,(function(e){return e.error}));return e[0]?e.reduce((function(e,t){return e[t.path]=String(t.error),e}),{}):null},getError:function(e){return String((en(this,e)||"").error||"")},setError:function(e,t){(en(this,e)||{}).error=t},validate:function(){var e=this,t=Lt(e).fields,n=N(arguments);return n.length?cn(e,x(t,(function(e){return r(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):cn(e,x(t,(function(e){return!e.props.disabled})))},toJSON:function(){return V(!0,{},this.data)}}),v(ln.prototype,"preventLeave",!1,(function(e){return e||(Lt(this).unlock||q)(),!!e}));var mn=ae((function(e,t){var n=e.context;return V(n,A(e,["enterKeyHint","preventLeave","formatError"])),ue(Jt,{value:n.data},ue("form",V(S(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:Vt(t,n.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||q).call(this,t)},onReset:function(t){t.preventDefault(),n.reset(),(e.onReset||q).call(this,t)}})))}));function hn(e){return ue(Jt,{value:e.value.data},e.children)}function gn(e){return yn(V({},e,{defaultValue:[]}))}function yn(e){var t=me(W)[0],n=e.name,r=le(_t);r||(r=Wt.data,n=t);var o=pe(),i=e.value;(Lt(i)||"").state?(r=i,n=""):n?(i="value"in e?i:F(r[n])||P(r[n])||e.defaultValue||{},i=Lt(r).set(n,i)):X("Value must be a data object or array");var u=Lt(r).state,a=u.fields[u.paths[Zt(i)]];a&&0!==a.controlled?(se(q,[null]),se(q,[null])):(an(u,a=o.current||(o.current=un(i)),{},e,0,r,n),a.value=i);var c=e.children;return D(c)&&(c=c(i)),ue(Jt,{value:i},c)}function bn(e){return dn(e,e.value),null}s(yn,{keyFor:Zt}),d(window,"zeta-dom-react",(function(){return console.warn('window["zeta-dom-react"] is deprecated, access zeta.react instead.'),zeta.react}))})(),u})()));
//# sourceMappingURL=zeta-dom-react.min.js.map