!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,a),i.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{a.d(i,{default:()=>M});var e={};a.r(e),a.d(e,{FormContext:()=>V,FormContextProvider:()=>R,classNames:()=>T,partial:()=>I,useAsync:()=>F,useDispose:()=>A,useFormContext:()=>D,useFormField:()=>N,useMemoizedFunction:()=>E,useObservableProperty:()=>j,useRefInitCallback:()=>z});var t=a(359),n=a(654),r=n.util,o=(r.noop,r.either,r.is,r.isUndefinedOrNull,r.isArray),u=r.isFunction,c=(r.isThenable,r.isPlainObject,r.isArrayLike,r.makeArray),s=r.extend,f=r.each,d=(r.map,r.grep),l=(r.splice,r.any),v=(r.single,r.kv),p=(r.pick,r.exclude,r.mapGet,r.mapRemove,r.arrRemove,r.setAdd),m=(r.equal,r.combineFn),h=(r.executeOnce,r.createPrivateStore),y=(r.setTimeoutOnce,r.setImmediate,r.setImmediateOnce,r.throwNotFunction,r.keys),g=r.values,C=(r.hasOwnProperty,r.getOwnPropertyDescriptors,r.define,r.definePrototype),O=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty,r.watch),b=(r.watchOnce,r.watchable,r.inherit,r.deepFreeze,r.iequal,r.randomId,r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),x=(r.reject,r.always),P=r.resolveAll,S=(r.catchAsync,r.setPromiseTimeout,n.EventContainer),w=new WeakMap;function E(e){var n=(0,t.useState)((function(){return function e(){var t=w.get(e);return t&&t.apply(this,arguments)}}))[0];return w.set(n,e),n}function j(e,n){var r=(0,t.useState)(e[n]),a=r[0],i=r[1];return(0,t.useEffect)((function(){return O(e,n,(function(e){i((function(){return e}))}))}),[e,n]),a}function F(e,n){var r=(0,t.useState)((function(){return{loading:!0,refresh:function(){s(r,{loading:!0,error:void 0}),x(b().then(e),(function(e,t){r.disposed||s(r,e?{loading:!1,value:t}:{loading:!1,value:void 0,error:t})}))}}}))[0],a=o(n);return e=E(e),n=!1!==n,j(r,"loading"),(0,t.useEffect)((function(){return function(){r.disposed=!0}}),[r]),(0,t.useEffect)((function(){n&&r.refresh()}),[r,n].concat(a)),[r.value,r]}function z(e){var n=c(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&p(r,t)&&(n[0]=t,e.apply(null,n))}}function A(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return s(m(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}var k=h(),q=(0,t.createContext)(null),R=q.Provider;function V(e,t){var n=this,r=k(n,{validateResult:{},validateOnChange:{},eventContainer:new S,initialData:e||{}});n.isValid=!0,n.validateOnChange=!1!==t,n.data=function(e,t,n){return new Proxy(s({},n),{get:function(e,t){if("string"==typeof t)return e[t]},set:function(n,r,a){return"string"==typeof r&&n[r]!==a&&(r in n&&t.emitAsync("dataChange",e,[r],{},(function(e,t){return e.concat(t)})),n[r]=a),!0}})}(n,r.eventContainer,e),n.on("dataChange",(function(e){n.validateOnChange&&n.validate.apply(n,d(e.data,(function(e){return!1!==r.validateOnChange[e]})))}))}function D(e,n){var r=(0,t.useState)((function(){return new V(e,n)}))[0],a=(0,t.useState)(0)[1];return(0,t.useEffect)((function(){return r.on("dataChange",(function(){a((function(e){return++e}))}))}),[r]),r}function N(e,n,r){var a=(0,t.useContext)(q),i=e.name||"",o=(0,t.useState)((function(){return a&&a.data[i]||n}))[0],u=(0,t.useState)(o),c=(0,t.useState)(""),f=E(e.onValidate),d=u[0],l=u[1],v=c[0],p=c[1],h=E((function(t){e.onChange?e.onChange("function"==typeof t?t(d):t):console.warn("onChange not supplied")}));return(r=r||"value")in e||(h=l,(e=s({},e))[r]=d),(0,t.useEffect)((function(){if(a&&i)return i in a.data&&l(a.data[i]),m(a.on("dataChange",(function(e){e.data.includes(i)&&l(a.data[i])})),a.on("validationChange",(function(e){e.name===i&&p(e.message)})),a.on("validate",(function(e){if(e.name===i)return f(e.value,e.name)})),a.on("reset",(function(){l(o),p("")})))}),[a,i,o,f]),(0,t.useEffect)((function(){a&&i&&(a.data[i]=d)}),[a,i,d]),(0,t.useEffect)((function(){a&&i&&(k(a).validateOnChange[i]=e.validateOnChange)}),[a,i,e.validateOnChange]),{value:e[r],error:e.error||v||"",setValue:h,setError:p}}function T(){var e=[];return function t(n){f(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(c(r.getClassNames()));else for(var a in r){var i=r[a];i&&e.push(!0===i?a:a+"-"+i)}}))}(c(arguments)),e.join(" ")}function I(e){return function(t,n){e((function(e){return"string"==typeof t&&(t=v(t,u(n)?n(e[t],e):n)),s({},e,t)}))}}C(V,{on:function(e,t){return k(this).eventContainer.add(this,e,t)},reset:function(){var e=this,t=k(e);for(var n in e.data)delete e.data[n];s(e.data,t.initialData),e.isValid=!0,t.eventContainer.emit("reset",e)},validate:function(){var e=this,t=k(e),n=t.validateResult,r=t.eventContainer,a=c(arguments);a.length||(a=y(e.data));var i=s({},n),o=P(a.map((function(t){return r.emit("validate",e,{name:t,value:e.data[t]})})));return o.then((function(t){return a.forEach((function(a,o){n[a]=t[o],(t[o]||"")!==(i[a]||"")&&r.emit("validationChange",e,{name:a,isValid:!t[o],message:t[o]||""})})),e.isValid=!l(g(n),(function(e){return e})),!l(t,(function(e){return e}))}))}});const M=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map