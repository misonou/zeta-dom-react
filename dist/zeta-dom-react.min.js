!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>zt});var e={};o.r(e),o.d(e,{ChoiceField:()=>qe,DataView:()=>Re,DateField:()=>Ge,Form:()=>Pt,FormArray:()=>Rt,FormContext:()=>Ct,FormContextProvider:()=>Ft,FormObject:()=>Dt,MultiChoiceField:()=>$e,NumericField:()=>Qe,TextField:()=>Ze,ToggleField:()=>Xe,ValidationError:()=>st,ViewStateProvider:()=>Ee,classNames:()=>Ne,combineRef:()=>Ae,combineValidators:()=>Vt,createBreakpointContext:()=>we,domEventRef:()=>Me,innerTextOrHTML:()=>Ie,isSingletonDisposed:()=>he,partial:()=>je,registerFieldType:()=>Ot,toRefCallback:()=>He,useAsync:()=>pe,useDataView:()=>De,useDispose:()=>me,useErrorHandler:()=>be,useErrorHandlerRef:()=>ye,useFormContext:()=>Et,useFormField:()=>kt,useMediaQuery:()=>Se,useMemoizedFunction:()=>le,useObservableProperty:()=>de,useRefInitCallback:()=>ve,useSingleton:()=>ge,useUpdateTrigger:()=>fe,useViewState:()=>ke,withSuspense:()=>Te});var t=o(359),n=o(654),r=n.util,u=r.noop,a=r.pipe,s=r.either,c=r.is,f=r.isUndefinedOrNull,l=r.isArray,d=r.isFunction,p=(r.isThenable,r.isPlainObject),v=(r.isArrayLike,r.makeArray),m=r.extend,h=r.each,g=r.map,y=r.grep,b=r.splice,S=r.any,w=r.single,x=r.kv,C=(r.fill,r.pick),E=r.exclude,k=(r.mapObject,r.mapGet),V=r.mapRemove,O=(r.arrRemove,r.setAdd),P=(r.equal,r.combineFn),F=(r.executeOnce,r.createPrivateStore),R=(r.setTimeout,r.setTimeoutOnce,r.setInterval,r.setIntervalSafe,r.setImmediate),D=r.setImmediateOnce,z=r.throws,M=r.throwNotFunction,N=(r.errorWithCode,r.isErrorWithCode),I=r.keys,j=(r.values,r.hasOwnProperty),A=(r.getOwnPropertyDescriptors,r.define),H=r.definePrototype,T=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty),L=r.watch,q=(r.watchOnce,r.watchable,r.inherit,r.freeze),W=(r.deepFreeze,r.iequal,r.randomId),B=(r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),K=(r.reject,r.always),_=r.resolveAll,J=(r.retryable,r.deferrable),U=(r.catchAsync,r.setPromiseTimeout,r.delay),Y=r.makeAsync,G=n.util,$=(G.domReady,G.tagName,G.isVisible,G.matchSelector,G.comparePosition),Q=(G.connected,G.containsOrEquals,G.acceptNode,G.combineNodeFilters,G.iterateNode,G.iterateNodeToArray,G.getCommonAncestor,G.parentsAndSelf),Z=(G.selectIncludeSelf,G.selectClosestRelative,G.createNodeIterator,G.createTreeWalker,G.bind);G.bindUntil,G.dispatchDOMMouseEvent,G.removeNode,G.getClass,G.setClass,G.getSafeAreaInset,G.getScrollOffset,G.getScrollParent,G.getContentRect,G.scrollBy,G.scrollIntoView,G.makeSelection,G.getRect,G.getRects,G.toPlainRect,G.rectEquals,G.rectCovers,G.rectIntersects,G.pointInRect,G.mergeRect,G.elementFromPoint;const X=n.dom;var ee=n.dom,te=(ee.textInputAllowed,ee.beginDrag,ee.beginPinchZoom,ee.insertText,ee.getShortcut,ee.setShortcut,ee.focusable,ee.focused,ee.setModal,ee.releaseModal,ee.retainFocus,ee.releaseFocus,ee.iterateFocusPath,ee.focus);const ne=X;var re=n.dom,oe=(re.lock,re.locked,re.cancelLock,re.subscribeAsync,re.notifyAsync),ie=re.preventLeave,ue=n.EventContainer,ae=new ue,se=new WeakSet,ce=window.AbortController;function fe(){var e=(0,t.useState)()[1];return(0,t.useCallback)((function(){e({})}),[])}function le(e){var n=(0,t.useRef)();return n.current=d(e)||u,(0,t.useCallback)((function(){return n.current.apply(this,arguments)}),[])}function de(e,n){var r=fe(),o=e[n],i=(0,t.useRef)();return i.current=o,(0,t.useEffect)((function(){var t=function(e){e!==i.current&&r()};return t(e[n]),L(e,n,t)}),[e,n]),o}function pe(e,n,r){var o=ge((function(){var t,n,i;return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return ae.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(a){if(r&&!a)return(i=i||J()).waitFor(U(r)),i.d||(i.d=i.then((function(){return i=null,o.refresh(!0)})));var s=ce?new ce:{abort:u};n&&n.abort(),m(o,{loading:!0,error:void 0});var c=Y(e)(s.signal),f=K(c,(function(e,t){if(n===s)if(e)m(o,{loading:!1,value:t}),ae.emit("load",o,{data:t});else if(m(o,{loading:!1,value:void 0,error:t}),!ae.emit("error",o,{error:t}))throw t}));return n=s,oe(t||ne.root,f),c},abort:function(e){n&&(n.abort(e),n=null),o.loading=!1}}}),(function(){o.abort()}));return n=[!1!==n].concat(l(n)||[]),e=le(e),(0,t.useEffect)((function(){n[0]&&D(o.refresh)}),n),(0,t.useMemo)((function(){n[0]&&!r&&(o.loading=!0)}),n),de(o,"loading"),[o.value,o]}function ve(e){var n=v(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&O(r,t)&&(n[0]=t,e.apply(null,n))}}function me(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return m(P(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}function he(e){return!se.has(e)}function ge(e,n){var r=(0,t.useState)(e())[0];return O(se,r),(0,t.useEffect)((function(){return O(se,r),function(){se.delete(r),R((function(){he(r)&&(n||r.dispose||u).call(r)}))}}),[r]),r}function ye(){return be.apply(this,arguments).ref}function be(){var e=(0,t.useRef)(!1),n=(0,t.useRef)(null),r=v(arguments),o=(0,t.useState)((function(){return{ref:function(e){n.current=e,s(e)},emit:function(e){return u(e)||i(e)||B()},catch:function(e,t){var n;return t?n=l(e)?function(e,t){return S(t,(function(t){return(d(t)?c:N)(e,t)}))}:d(e)?c:N:t=e,ae.add(o,n?"error":"default",(function(r){if((n||a)(r.error,e))return t(r.error)}))}}}))[0],i=(0,t.useCallback)((function(t){try{return e.current=!0,ne.emit("error",n.current||ne.root,{error:t},!0)}finally{e.current=!1}}),[]),u=(0,t.useCallback)((function(e){return ae.emit("error",o,{error:e})||ae.emit("default",o,{error:e})}),[]),s=ve((function(t){ne.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return(0,t.useEffect)((function(){return P(g(r,(function(e){return e.onError(o.emit)})))}),r),o}function Se(e){var n=(0,t.useMemo)((function(){return matchMedia(e)}),[e]),r=(0,t.useState)(n.matches);return(0,t.useEffect)((function(){return Z(n,"change",(function(){r[1](n.matches)}))}),[n]),r[0]}function we(e){var n={};return L(n,!0),h(e,(function(e,t){var r=matchMedia(t),o=T(n,e,r.matches,!0);Z(r,"change",(function(){o(r.matches)}))})),{breakpoints:Object.freeze(n),useBreakpoint:function(){var e=fe();return(0,t.useEffect)((function(){return L(n,e)}),[]),n}}}var xe=(0,t.createContext)(null),Ce=Object.freeze({get:u,set:u}),Ee=xe.Provider;function ke(e){var n=(0,t.useState)(W)[0],r=(0,t.useContext)(xe),o=r&&e&&r.getState(n,e)||Ce;return(0,t.useEffect)((function(){return o.dispose&&o.dispose.bind(o)}),[o]),o}var Ve=F(),Oe=Re.prototype,Pe=new ue;function Fe(e,t){var n=f(e)&&-1,r=f(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function Re(e,t,n,r){var o=this,i={filters:m({},e),sortBy:t,sortOrder:n||t&&"asc",pageIndex:0,pageSize:void 0===r?Re.pageSize:r};for(var u in e=m({},e))T(e,u);var a=Ve(o,{filters:Object.freeze(e),defaults:i,items:[]}),s=function(){a.sorted=a.items.length?void 0:[],this!==o&&(a.filtered=a.sorted),Pe.emitAsync("viewChange",o)};m(this,i),L(o,s),L(o.filters,s)}function De(e,n,r,o,i){if("string"!=typeof e)return De("__dataView",e,n,r,o);var a=ke(e),s=fe(),c=(0,t.useState)((function(){return m(new Re(n,r,o,i),a.get())}))[0];return(0,t.useEffect)((function(){var e=Ve(c);return P(c.on("viewChange",(function(){a.set(c.toJSON()),s()})),a.onPopState?a.onPopState((function(t){a.set(c.toJSON()),m(c,t||e.defaults)})):u)}),[c]),c}A(Re,{pageSize:0}),H(Re,{itemCount:0,on:function(e,t){return Pe.add(this,e,t)},getView:function(e,t){var n=this,r=Ve(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=v(e),!d(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return h(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(l(n)?w(n,(function(e,t){return Fe(e,i[t])})):Fe(n,i))}))},toJSON:function(){var e=this;return m(C(e,I(Ve(e).defaults)),{filters:m({},e.filters),itemCount:e.itemCount})},reset:function(){m(this,Ve(this).defaults)}}),T(Oe,"sortBy"),T(Oe,"sortOrder"),T(Oe,"pageIndex"),T(Oe,"pageSize"),T(Oe,"filters",{},(function(e){return m(Ve(this).filters,e)}));var ze=new WeakMap;function Me(e,t){var n;return t=p(e)||x(e,t),function(e){if(e){if(n)throw new Error("Callback can only be passed to single React element");void 0===(n=k(ze,e,Array)).index&&(n.index=0),t=h(t,(function(t,r){var o=n.index++;n[o]||ne.on(e,t,(function(){return n[o].apply(this,arguments)})),n[o]=M(r)}))}else n.index=0}}function Ne(){var e=[];return function t(n){h(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(v(r.getClassNames()));else for(var o in r){var i=r[o];i&&e.push(!0===i?o:o+"-"+i)}}))}(v(arguments)),e.join(" ")}function Ie(e){return p(e)?{dangerouslySetInnerHTML:e}:{children:e}}function je(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=x(t,d(n)?n(e[t],e):n)),m({},e,t)}))};return t?n.bind(0,t):n}function Ae(){return P(v(arguments).map(He))}function He(e){return e&&!d(e)?function(t){return e.current=t}:e||u}function Te(e,n){n=n||t.Fragment,d(n)&&(n=(0,t.createElement)(n));var r=(0,t.lazy)(e);return function(e){return(0,t.createElement)(t.Suspense,{fallback:n},(0,t.createElement)(r,e))}}function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function qe(){}function We(e){return(0,t.useMemo)((function(){return(e||[]).map((function(e){return"object"===Le(e)?e:{label:String(e),value:e}}))}),[e])}A(qe,{normalizeItems:We}),H(qe,{defaultValue:"",postHook:function(e,n){var r=We(n.items),o=r.findIndex((function(t){return t.value===e.value}));return(0,t.useEffect)((function(){o<0&&(o=n.allowUnselect||!r[0]?-1:0,e.setValue(o<0?"":r[0].value))})),m(e,{items:r,selectedIndex:o,selectedItem:r[o]})}});var Be=/^-?\d{4,}-\d{2}-\d{2}$/,Ke={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function _e(e){if("string"==typeof e){if(Be.test(e))return Date.parse(e+" 00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=new Date,n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[Ke[i][1]](t[Ke[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return new Date(e).setHours(0,0,0,0)}function Je(e,t,n){var r=_e(e);return r<t?t:r>n?n:e}function Ue(e){var t=_e(e);return isNaN(t)?null:new Date(t)}function Ye(e){if(!isNaN(e)){var t=6e4*new Date(e).getTimezoneOffset(),n=new Date(e-t).toISOString();return n.slice(0,n.indexOf("T",10))}return""}function Ge(){}function $e(){}function Qe(){}function Ze(){}function Xe(){}Ke.w=Ke.d,A(Ge,{toDateString:Ye,toDateObject:Ue}),H(Ge,{defaultValue:"",normalizeValue:function(e){return Ye(_e(e))},postHook:function(e,n){var r=e.setValue,o=e.value,i=_e(n.min),u=_e(n.max),a=(0,t.useMemo)((function(){return o&&n.formatDisplay?n.formatDisplay(Ue(o)):o}),[o]);return(0,t.useEffect)((function(){var e=o&&Je(o,i,u);e!==o&&r(e)}),[o,i,u]),m(e,{min:Ye(i),max:Ye(u),displayText:a,setValue:le((function(t){(t=d(t)?t(e.value):t)?/\d{4}/.test(t)&&/[^\s\d]/.test(t)&&(t=_e(t),isNaN(t)||r(Je(t,i,u))):r("")}))})}}),H($e,{defaultValue:q([]),normalizeValue:function(e){return l(e)||v(e)},postHook:function(e,n){var r=n.allowCustomValues||!n.items,o=qe.normalizeItems(n.items),i=function(e){return!o.some((function(t){return t.value===e}))},u=le((function(t,n){!r&&i(t)||e.setValue((function(e){var r=e.indexOf(t);return(f(n)||s(r>=0,n))&&(e=v(e),r<0?e.push(t):e.splice(r,1)),e}))}));return(0,t.useEffect)((function(){if(!r){var t=v(e.value);b(t,i).length&&e.setValue(t)}})),m(e,{items:o,toggleValue:u})}}),H(Qe,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,n){var r=e.value,o=n.min,i=n.max,u=n.step,a=n.allowEmpty;return(0,t.useEffect)((function(){var t=u>0?Math.round(r/u)*u:r;t<o||isNaN(t)&&!a?t=o||0:t>i&&(t=i),t!==r&&e.setValue(t)}),[r,o,i,u,a]),e}}),H(Ze,{defaultValue:"",postHook:function(e,t){var n=e.form,r=C(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,m(e,{inputProps:r})}}),H(Xe,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e){return e}});var et=F(),tt=new ue,nt=new WeakMap,rt=new WeakMap,ot=new Map,it={text:Ze,toggle:Xe,choice:qe},ut=(0,t.createContext)(null),at=ut.Provider;function st(e,t,n){this.kind=e,this.args=n,this.message=t}function ct(e){return f(e)||""===e||l(e)&&!e.length}function ft(e){return e.props.required&&(e.props.isEmpty||e.preset.isEmpty||ct)(e.value)}function lt(e){return et(e)?m(!0,l(e)?[]:{},e):e}function dt(e){return(et(e)||"").uniqueId}function pt(e,t){for(var n=l(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!j(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function vt(e,t){var n=pt(e,t),r=dt(n.parent);return r&&et(e).fields[r+"."+n.name]}function mt(e,t,n){if(t===e.data)return n;for(var r=et(e).paths,o=[n],i=dt(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return pt(e,o).parent===t?o.join("."):""}function ht(){h(ot,(function(e){var t=et(e),n=V(ot,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;var o=t.ref||ne.root,i=y(t.fields,(function(e){return n[e.path]}));if(tt.emit("dataChange",e,I(n)),wt(e,y(i,(function(t){return(t.props.validateOnChange+1||e.validateOnChange+1)>1}))),e.preventLeave&&!t.unlock&&i[0]&&"script"!==ne.getEventSource(o)){var u=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));ie(o,u,(function(){return tt.emit("beforeLeave",e)||B()}))}}))}function gt(e){var t,n=gt.d||(gt.d=t=new Set);try{e()}finally{n===t&&(h(t,(function(e,t){t.onChange(t.value)})),gt.d=null)}}function yt(e,t){var n=et(e),r=l(t)?[]:{},o=W(),i=function(t,i){var a=mt(e,s,t);if(a){if(i){if(i.value=r[t],i.value!==r[t])return void u(t,i.value);gt.d.add(i)}for(var c=o;c=n.paths[c];c=c.slice(0,8))n.fields[c]&&gt.d.add(n.fields[c]);return k(ot,e,Object)[a]=!0,D(ht),!0}},u=function(t,i){return(p(i)||l(i))&&((et(i)||"").context!==e&&(i=yt(e,i)),n.paths[dt(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},s=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||e[t]===r&&t in e||gt((function(){var a=e[t];if(l(e)){if("length"===t){for(var s=a-1;s>=r;s--)i(s);return e[t]=r,!0}}else{if(et(r)&&z("Cannot assign proxied data object"),l(r)&&l(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(p(r)&&et(a)){for(var c in E(a,r))delete a[c];return m(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t])})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&gt((function(){a(t),i(t)})),!0}});return et(s,{context:e,uniqueId:o,set:u,delete:a}),h(t,(function(e,t){u(e,t)})),s}function bt(e){var t={initialValue:e,value:e,error:"",preset:{},onChange:function(e){t.props.onChange&&t.props.onChange(lt(e))},setValue:function(e){e=d(e)?e(t.value):e,t.controlled?e!==t.value&&t.onChange(e):t.value=e},setError:function(e){t.error=d(e)?e(t.error):e,(t.form||{}).isValid=null},elementRef:function(e){t.element=e}};return L(t,!0),T(t,"value",e,(function(e,n){return(e=(t.preset.normalizeValue||a)(e,t.props))!==n&&et(n)?(t.dict[t.name]=e,n):e})),T(t,"error","",(function(e){return d(e)||c(e,st)?function(e,t){return{toString:function(){return c(t,st)?w([e.props,e.form||"",Ct],(function(n){return(n.formatError||u).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),L(t,"value",(function(e){t.key?t.dict[t.name]=e:t.controlled||t.onChange(e)})),L(t,"error",(function(e){t.key&&tt.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function St(e,n,r,o,i,u,a,s){var c="error"in i,f=r.key||s;m(r,{form:e,props:i,preset:o,controlled:u,dict:a,key:s}),e&&s&&(r.name=s.slice(9),r.path=mt(e,a,r.name),f!==s&&(r.locks=[],c||(r.error="")),n.fields[s]=r),c&&(r.error=i.error),(0,t.useEffect)((function(){return e&&s&&(n.fields[s]=r),function(){n&&n.fields[s]===r&&(delete n.fields[s],r.props.clearWhenUnmount&&et(a).delete(s.slice(9)),n.setValid())}}),[n,r,s]),(0,t.useEffect)((function(){n&&n.setValid()}),[n,r.error,i.disabled,i.required])}function wt(e,t){var n=et(e),r=g(t,ft),o=function(t){var n=t.path,r=t.value;return tt.emit("validate",e,{name:n,value:r})||((t.props||"").onValidate||u)(r,n,e)},i=t.map((function(e){var t=e.locks||(e.locks=[]),n=t[0];return n?t[1]||(t[1]=K(t[0],(function(){var r=o(e);return K(r,(function(){t[0]===n&&t.shift()})),r}))):(t[0]=B(o(e)),t[0])}));return _(i).then((function(e){return t.forEach((function(t,n){t.locks[0]===i[n]&&(t.locks.shift(),t.error=e[n]),e[n]=e[n]||r[n]})),n.setValid(),!S(e)}))}function xt(e){et(e).viewState.set(e.toJSON())}function Ct(e,t,n){var r=this,o={},i=et(r,{fields:o,viewState:n,paths:{},initialData:e,setValid:T(this,"isValid",!0,(function(){return!S(o,(function(e){return!e.props.disabled&&(e.error||ft(e))}))}))});m(r,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),m({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),r.ref=function(e){i.ref=e,e&&rt.set(e,r)},r.isValid=!0,r.data=yt(r,n.get()||i.initialData)}function Et(e,n,r){if("string"!=typeof e)return Et("",e,n);var o=ke(e),i=(0,t.useState)((function(){return new Ct(n,r,o)}))[0],a=fe();return de(i,"isValid"),(0,t.useEffect)((function(){return P(i.on("dataChange",a),i.on("reset",a),Z(window,"pagehide",(function(){i.autoPersist&&xt(i)})),(function(){(et(i).unlock||u)(),i.autoPersist&&xt(i)}))}),[i]),i}function kt(e,n,r,o){"string"==typeof e&&(e=it[e]),d(e)||(o=r,r=n,n=e,e="");var i=e?k(nt,e,e):{};o=o||i.valueProperty||"value";var u=(0,t.useContext)(ut),s=u&&et(u).context,c=s&&et(s),f=n.name||"",l=s&&f&&dt(u)+"."+f,p=o in n,v=(0,t.useState)((function(){return bt(p?n[o]:(i.normalizeValue||a)(void 0!==r?r:i.defaultValue))}))[0];St(s,c,v,i,n,p,u,l),p&&(v.value=n[o]),s&&l&&(f in u?p||(v.value=u[f]):v.value=et(u).set(f,v.initialValue));var m=(i.postHook||a)({form:s,key:l,path:v.path,value:v.value,error:String(v.error),setValue:v.setValue,setError:v.setError,elementRef:v.elementRef},n);return m.value=de(v,"value"),m.error=String(de(v,"error")),m}function Vt(){var e=y(v(arguments),d);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),B())}}function Ot(e,t){d(t)&&(t={postHook:t}),it[e]=function(){return t}}gt.d=null,A(Ct,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return w(Q(e),rt.get.bind(rt))||null}}),H(Ct,{element:function(e){return e?(vt(this,e)||"").element:et(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?g(et(this).fields,(function(t){return t.error&&1&e||ct(t.value)&&2&e?t.element:null})).sort($)[0]:this.element(e))&&te(t)},on:function(e,t){return tt.add(this,e,t)},persist:function(){xt(this),this.autoPersist=!1},restore:function(){var e=et(this).viewState.get();return e&&this.reset(e),!!e},clear:function(){this.reset({})},reset:function(e){var t=this,n=et(t),r=et(t.data);for(var o in t.data)r.delete(o);h(e||n.initialData,(function(e,t){r.set(e,t)})),h(n.fields,(function(e,n){var r=pt(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value),n.error=null})),n.setValid(),(n.unlock||u)(),tt.emit("reset",t)},getValue:function(e){return lt(pt(this,e).value)},setValue:function(e,t){var n=pt(this,e);n.parent&&(n.parent[n.name]=lt(t))},getErrors:function(){var e=y(et(this).fields,(function(e){return e.error}));return e[0]?Object.fromEntries(e.map((function(e){return[e.path,String(e.error)]}))):null},getError:function(e){return String((vt(this,e)||"").error||"")},setError:function(e,t){(vt(this,e)||{}).error=t},validate:function(){var e=this,t=et(e).fields,n=v(arguments);return n[0]?wt(e,y(t,(function(e){return S(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):wt(e,y(t,(function(e){return!e.props.disabled})))},toJSON:function(){return m(!0,{},this.data)}}),T(Ct.prototype,"preventLeave",!1,(function(e){return e||(et(this).unlock||u)(),!!e}));var Pt=(0,t.forwardRef)((function(e,n){var r=e.context;return m(r,C(e,["enterKeyHint","preventLeave","formatError"])),(0,t.createElement)(at,{value:r.data},(0,t.createElement)("form",m(E(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:Ae(n,r.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||u).call(this,t)},onReset:function(t){t.preventDefault(),r.reset(),(e.onReset||u).call(this,t)}})))}));function Ft(e){return(0,t.createElement)(at,{value:e.value.data},e.children)}function Rt(e){return Dt(m({},e,{defaultValue:[]}))}function Dt(e){var n=(0,t.useContext)(ut);et(n)||z("Missing form context");var r=(0,t.useRef)(),o=et(n).context,i=et(o),a=e.name,s=e.value;a?(s=p(n[a])||l(n[a])||e.defaultValue||{},s=et(n).set(a,s)):(et(s)||"").context||z("Value must be a data object or array");var c=i.paths[dt(s)];if("boolean"!=typeof(i.fields[c]||"").controlled){var f=r.current||(r.current=bt(s));St(o,i,f,{},e,0,n,c),f.value=s}else(0,t.useEffect)(u,[null]),(0,t.useEffect)(u,[null]);var v=e.children;return d(v)&&(v=v(s)),(0,t.createElement)(at,{value:s},v)}A(Dt,{keyFor:dt});const zt=e;n.react=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map