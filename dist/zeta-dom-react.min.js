!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>Vt});var e={};o.r(e),o.d(e,{ChoiceField:()=>Me,DataView:()=>Ve,DateField:()=>Be,Form:()=>Ct,FormArray:()=>xt,FormContext:()=>ht,FormContextProvider:()=>wt,FormObject:()=>Et,MultiChoiceField:()=>Ke,NumericField:()=>_e,TextField:()=>Je,ToggleField:()=>Ue,ValidationError:()=>nt,ViewStateProvider:()=>be,classNames:()=>Oe,combineRef:()=>Re,combineValidators:()=>bt,createBreakpointContext:()=>he,innerTextOrHTML:()=>Pe,partial:()=>Fe,registerFieldType:()=>St,toRefCallback:()=>ze,useAsync:()=>fe,useDataView:()=>ke,useDispose:()=>de,useErrorHandler:()=>ve,useErrorHandlerRef:()=>pe,useFormContext:()=>gt,useFormField:()=>yt,useMediaQuery:()=>me,useMemoizedFunction:()=>se,useObservableProperty:()=>ce,useRefInitCallback:()=>le,useUpdateTrigger:()=>ae,useViewState:()=>Se,withSuspense:()=>De});var t=o(359),n=o(654),r=n.util,u=r.noop,a=r.pipe,s=r.either,c=r.is,f=r.isUndefinedOrNull,l=r.isArray,d=r.isFunction,p=(r.isThenable,r.isPlainObject),v=(r.isArrayLike,r.makeArray),m=r.extend,h=r.each,g=r.map,y=r.grep,b=r.splice,S=r.any,C=r.single,w=r.kv,x=(r.fill,r.pick),E=r.exclude,V=(r.mapObject,r.mapGet),k=r.mapRemove,O=(r.arrRemove,r.setAdd),P=(r.equal,r.combineFn),F=(r.executeOnce,r.createPrivateStore),R=(r.setTimeout,r.setTimeoutOnce,r.setInterval,r.setIntervalSafe,r.setImmediate,r.setImmediateOnce),z=r.throws,D=(r.throwNotFunction,r.errorWithCode,r.isErrorWithCode),N=r.keys,M=(r.values,r.hasOwnProperty),I=(r.getOwnPropertyDescriptors,r.define),j=r.definePrototype,H=(r.defineOwnProperty,r.defineGetterProperty,r.defineHiddenProperty,r.defineAliasProperty,r.defineObservableProperty),T=r.watch,A=(r.watchOnce,r.watchable,r.inherit,r.freeze),L=(r.deepFreeze,r.iequal,r.randomId),q=(r.repeat,r.camel,r.hyphenate,r.ucfirst,r.lcfirst,r.trim,r.matchWord,r.htmlDecode,r.resolve),W=r.reject,B=r.always,K=r.resolveAll,_=(r.retryable,r.deferrable),J=(r.catchAsync,r.setPromiseTimeout,r.delay),U=r.makeAsync,Y=n.util,G=(Y.domReady,Y.tagName,Y.isVisible,Y.matchSelector,Y.comparePosition),$=(Y.connected,Y.containsOrEquals,Y.acceptNode,Y.combineNodeFilters,Y.iterateNode,Y.iterateNodeToArray,Y.getCommonAncestor,Y.parentsAndSelf),Q=(Y.selectIncludeSelf,Y.selectClosestRelative,Y.createNodeIterator,Y.createTreeWalker,Y.bind);Y.bindUntil,Y.dispatchDOMMouseEvent,Y.removeNode,Y.getClass,Y.setClass,Y.getScrollOffset,Y.getScrollParent,Y.getContentRect,Y.scrollBy,Y.scrollIntoView,Y.makeSelection,Y.getRect,Y.getRects,Y.toPlainRect,Y.rectEquals,Y.rectCovers,Y.rectIntersects,Y.pointInRect,Y.mergeRect,Y.elementFromPoint;const Z=n.dom;var X=n.dom,ee=(X.textInputAllowed,X.beginDrag,X.beginPinchZoom,X.getShortcut,X.setShortcut,X.focusable,X.focused,X.setModal,X.releaseModal,X.retainFocus,X.releaseFocus,X.iterateFocusPath,X.focus);const te=Z;var ne=n.dom,re=(ne.lock,ne.locked,ne.cancelLock,ne.subscribeAsync,ne.notifyAsync),oe=ne.preventLeave,ie=n.EventContainer,ue=new ie;function ae(){var e=(0,t.useState)()[1];return(0,t.useCallback)((function(){e({})}),[])}function se(e){var n=(0,t.useRef)();return n.current=d(e)||u,(0,t.useCallback)((function(){return n.current.apply(this,arguments)}),[])}function ce(e,n){var r=ae(),o=e[n],i=(0,t.useRef)();return i.current=o,(0,t.useEffect)((function(){var t=function(e){e!==i.current&&r()};return t(e[n]),T(e,n,t)}),[e,n]),o}function fe(e,n,r){var o=(0,t.useState)((function(){var t,n,i;return{loading:!1,value:void 0,error:void 0,elementRef:function(e){t=e},on:function(e,t){return ue.add(o,e,t)},onError:function(e){return o.on("error",(function(t){return e.call(o,t.error)}))},refresh:function(u){if(r&&!u)return(i=i||_()).waitFor(J(r)),i.d||(i.d=i.then((function(){return i=null,o.refresh(!0)})));m(o,{loading:!0,error:void 0});var a=U(e)(),s=B(a,(function(e,t){if(!o.disposed&&n===s)if(e)m(o,{loading:!1,value:t}),ue.emit("load",o,{data:t});else if(m(o,{loading:!1,value:void 0,error:t}),!ue.emit("error",o,{error:t}))throw t}));return n=s,re(t||te.root,s),a}}}))[0];return n=[!1!==n].concat(l(n)||[]),e=se(e),(0,t.useEffect)((function(){return o.disposed=!1,function(){o.disposed=!0}}),[o]),(0,t.useEffect)((function(){n[0]&&o.refresh()}),n),(0,t.useMemo)((function(){n[0]&&!r&&(o.loading=!0)}),n),ce(o,"loading"),[o.value,o]}function le(e){var n=v(arguments),r=(0,t.useState)(new WeakSet)[0];return function(t){t&&O(r,t)&&(n[0]=t,e.apply(null,n))}}function de(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return m(P(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}function pe(){return ve.apply(this,arguments).ref}function ve(){var e=(0,t.useRef)(!1),n=(0,t.useRef)(null),r=v(arguments),o=(0,t.useState)((function(){return{ref:function(e){n.current=e,s(e)},catch:function(e,t){var n;return t?n=l(e)?function(e,t){return S(t,(function(t){return(d(t)?c:D)(e,t)}))}:d(e)?c:D:t=e,ue.add(o,n?"error":"default",(function(r){if((n||a)(r.error,e))return t(r.error)}))}}}))[0],i=(0,t.useCallback)((function(t){try{return e.current=!0,te.emit("error",n.current||te.root,{error:t},!0)}finally{e.current=!1}}),[]),u=(0,t.useCallback)((function(e){return ue.emit("error",o,{error:e})||ue.emit("default",o,{error:e})}),[]),s=le((function(t){te.on(t,"error",(function(t){if(!e.current)return u(t.error)}))}));return(0,t.useEffect)((function(){return P(g(r,(function(e){return e.onError((function(e){return u(e)||i(e)||q()}))})))}),r),o}function me(e){var n=(0,t.useMemo)((function(){return matchMedia(e)}),[e]),r=(0,t.useState)(n.matches);return(0,t.useEffect)((function(){return Q(n,"change",(function(){r[1](n.matches)}))}),[n]),r[0]}function he(e){var n={};return T(n,!0),h(e,(function(e,t){var r=matchMedia(t),o=H(n,e,r.matches,!0);Q(r,"change",(function(){o(r.matches)}))})),{breakpoints:Object.freeze(n),useBreakpoint:function(){var e=ae();return(0,t.useEffect)((function(){return T(n,e)}),[]),n}}}var ge=(0,t.createContext)(null),ye=Object.freeze({get:u,set:u}),be=ge.Provider;function Se(e){var n=(0,t.useState)(L)[0],r=(0,t.useContext)(ge),o=r&&e&&r.getState(n,e)||ye;return(0,t.useEffect)((function(){return o.dispose&&o.dispose.bind(o)}),[o]),o}var Ce=F(),we=Ve.prototype,xe=new ie;function Ee(e,t){var n=f(e)&&-1,r=f(t)&&1;return n||r?n+r:"string"==typeof e||"string"==typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function Ve(e,t,n,r){var o=this,i={filters:m({},e),sortBy:t,sortOrder:n||t&&"asc",pageIndex:0,pageSize:void 0===r?Ve.pageSize:r};for(var u in e=m({},e))H(e,u);var a=Ce(o,{filters:Object.freeze(e),defaults:i,items:[]}),s=function(){a.sorted=a.items.length?void 0:[],this!==o&&(a.filtered=a.sorted),xe.emitAsync("viewChange",o)};m(this,i),T(o,s),T(o.filters,s)}function ke(e,n,r,o,i){if("string"!=typeof e)return ke("__dataView",e,n,r,o);var a=Se(e),s=ae(),c=(0,t.useState)((function(){return m(new Ve(n,r,o,i),a.get())}))[0];return(0,t.useEffect)((function(){var e=Ce(c);return P(c.on("viewChange",s),a.onPopState?a.onPopState((function(t){a.set(c.toJSON()),m(c,t||e.defaults)})):u,(function(){a.set(c.toJSON())}))}),[c]),c}function Oe(){var e=[];return function t(n){h(n,(function(n,r){if(r)if("string"==typeof r)e.push(r);else if("function"==typeof r.getClassNames)t(v(r.getClassNames()));else for(var o in r){var i=r[o];i&&e.push(!0===i?o:o+"-"+i)}}))}(v(arguments)),e.join(" ")}function Pe(e){return p(e)?{dangerouslySetInnerHTML:e}:{children:e}}function Fe(e,t){var n=function(t,n){e((function(e){return"string"==typeof t&&(t=w(t,d(n)?n(e[t],e):n)),m({},e,t)}))};return t?n.bind(0,t):n}function Re(){return P(v(arguments).map(ze))}function ze(e){return e&&!d(e)?function(t){return e.current=t}:e||u}function De(e,n){n=n||t.Fragment,d(n)&&(n=(0,t.createElement)(n));var r=(0,t.lazy)(e);return function(e){return(0,t.createElement)(t.Suspense,{fallback:n},(0,t.createElement)(r,e))}}function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Me(){}function Ie(e){return(0,t.useMemo)((function(){return(e||[]).map((function(e){return"object"===Ne(e)?e:{label:String(e),value:e}}))}),[e])}I(Ve,{pageSize:0}),j(Ve,{itemCount:0,on:function(e,t){return xe.add(this,e,t)},getView:function(e,t){var n=this,r=Ce(n),o=n.pageIndex||0,i=n.pageSize||0;e!==r.items&&(r.items=e||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),t=t||function(e){return n.sort(e)};var u=r.sorted||(r.sorted=t.call(n,r.filtered||r.items,n.filters,n.sortBy,n.sortOrder)||[]);return r.filtered=u,e&&(n.itemCount=u.length),[u.slice(o*i,i?(o+1)*i:void 0),u.length]},sort:function(e,t){if(e=v(e),!d(t)){var n=t||this.sortBy;if(!n)return e;t=function(e){return e[n]}}var r="desc"===this.sortOrder?-1:1,o=new Map;return h(e,(function(e,n){o.set(n,t(n))})),e.sort((function(e,t){var n=o.get(e),i=o.get(t);return r*(l(n)?C(n,(function(e,t){return Ee(e,i[t])})):Ee(n,i))}))},toJSON:function(){var e=this;return m(x(e,N(Ce(e).defaults)),{filters:m({},e.filters),itemCount:e.itemCount})},reset:function(){m(this,Ce(this).defaults)}}),H(we,"sortBy"),H(we,"sortOrder"),H(we,"pageIndex"),H(we,"pageSize"),H(we,"filters",{},(function(e){return m(Ce(this).filters,e)})),I(Me,{normalizeItems:Ie}),j(Me,{defaultValue:"",postHook:function(e,n){var r=Ie(n.items),o=r.findIndex((function(t){return t.value===e.value}));return(0,t.useEffect)((function(){o<0&&(o=n.allowUnselect||!r[0]?-1:0,e.setValue(o<0?"":r[0].value))})),m(e,{items:r,selectedIndex:o,selectedItem:r[o]})}});var je=/^-?\d{4,}-\d{2}-\d{2}$/,He=6e4*(new Date).getTimezoneOffset(),Te={y:["getFullYear","setFullYear"],m:["getMonth","setMonth"],d:["getDate","setDate"]};function Ae(e){if("string"==typeof e){if(je.test(e))return Date.parse(e+" 00:00");e="+"===e[0]||"-"===e[0]?function(e){var t=qe(Date.now()),n="-"===e[0]?-1:1;return e.toLowerCase().replace(/([+-]?)(\d+)([dwmy])/g,(function(e,r,o,i){t[Te[i][1]](t[Te[i][0]]()+o*("-"===r?-1:"+"===r?1:n)*("w"===i?7:1))})),t}(e):Date.parse(e)}return e-(e-He)%864e5}function Le(e,t,n){var r=c(e,Date)||Ae(e);return r<t?t:r>n?n:e}function qe(e){var t=Ae(e);return isNaN(t)?null:new Date(t)}function We(e){if(!isNaN(e)){var t=new Date(e-He).toISOString();return t.slice(0,t.indexOf("T",10))}return""}function Be(){}function Ke(){}function _e(){}function Je(){}function Ue(){}Te.w=Te.d,I(Be,{toDateString:We,toDateObject:qe}),j(Be,{defaultValue:"",normalizeValue:function(e){return We(Ae(e))},postHook:function(e,n){var r=e.setValue,o=e.value,i=Ae(n.min),u=Ae(n.max),a=(0,t.useMemo)((function(){return o&&n.formatDisplay?n.formatDisplay(qe(o)):o}),[o]);return(0,t.useEffect)((function(){var e=o&&Le(o,i,u);e!==o&&r(e)}),[o,i,u]),m(e,{min:We(i),max:We(u),displayText:a,setValue:se((function(t){(t=d(t)?t(e.value):t)?/\d{4}/.test(t)&&/[^\s\d]/.test(t)&&(t=qe(t),isNaN(t)||r(Le(t,i,u))):r("")}))})}}),j(Ke,{defaultValue:A([]),normalizeValue:function(e){return l(e)||v(e)},postHook:function(e,n){var r=n.allowCustomValues||!n.items,o=Me.normalizeItems(n.items),i=function(e){return!o.some((function(t){return t.value===e}))},u=se((function(t,n){!r&&i(t)||e.setValue((function(e){var r=e.indexOf(t);return(f(n)||s(r<0,n))&&(e=v(e),r<0?e.push(t):e.splice(r,1)),e}))}));return(0,t.useEffect)((function(){if(!r){var t=v(e.value);b(t,i).length&&e.setValue(t)}})),m(e,{items:o,toggleValue:u})}}),j(_e,{normalizeValue:function(e){return e=+e,isNaN(e)?void 0:e},postHook:function(e,n){var r=e.value,o=n.min,i=n.max,u=n.step,a=n.allowEmpty;return(0,t.useEffect)((function(){var t=u>0?Math.round(r/u)*u:r;t<o||isNaN(t)&&!a?t=o||0:t>i&&(t=i),t!==r&&e.setValue(t)}),[r,o,i,u,a]),e}}),j(Je,{defaultValue:"",postHook:function(e,t){var n=e.form,r=x(t,["type","disabled","autoComplete","maxLength","inputMode","placeholder","enterKeyHint"]);return"password"!==t.type||r.autoComplete||(r.autoComplete="current-password"),r.type=r.type||"text",r.enterKeyHint=r.enterKeyHint||n&&n.enterKeyHint,m(e,{inputProps:r})}}),j(Ue,{defaultValue:!1,valueProperty:"checked",normalizeValue:function(e){return!!e},isEmpty:function(e){return!e},postHook:function(e){return e}});var Ye=F(),Ge=new ie,$e=new WeakMap,Qe=new WeakMap,Ze=new Map,Xe={text:Je,toggle:Ue,choice:Me},et=(0,t.createContext)(null),tt=et.Provider;function nt(e,t,n){this.kind=e,this.args=n,this.message=t}function rt(e){return f(e)||""===e||l(e)&&!e.length}function ot(e){return e.props.required&&(e.props.isEmpty||e.preset.isEmpty||rt)(e.value)}function it(e){return Ye(e)?m(!0,l(e)?[]:{},e):e}function ut(e){return(Ye(e)||"").uniqueId}function at(e,t){for(var n=l(t)||t.split("."),r=e.data,o=r,i=0,u=n.length;i<u;i++){if(!M(r,n[i]))return{name:n[u-1],parent:i===u-1?r:null};o=r,r=r[n[i]]}return{exists:!0,name:n[u-1],value:r,parent:o}}function st(e,t){var n=at(e,t),r=ut(n.parent);return r&&Ye(e).fields[r+"."+n.name]}function ct(e,t,n){if(t===e.data)return n;for(var r=Ye(e).paths,o=[n],i=ut(t);i=r[i];i=i.slice(0,8))o.unshift(i.slice(9));return at(e,o).parent===t?o.join("."):""}function ft(){h(Ze,(function(e){var t=Ye(e),n=k(Ze,e);for(var r in n)for(;r=r.replace(/(^|\.)[^.]+$/,"");)n[r]=!0;if(Ge.emit("dataChange",e,N(n)),e.validateOnChange&&mt(e,y(t.fields,(function(e){return n[e.path]&&!1!==e.props.validateOnChange}))),e.preventLeave&&!t.unlock){var o=new Promise((function(e){t.unlock=function(){t.unlock=null,e()}}));oe(t.ref||te.root,o,(function(){return Ge.emit("beforeLeave",e)||W()}))}}))}function lt(e){var t,n=lt.d||(lt.d=t=new Set);try{e()}finally{n===t&&(h(t,(function(e,t){t.onChange(t.value)})),lt.d=null)}}function dt(e,t){var n=Ye(e),r=l(t)?[]:{},o=L(),i=function(t,i){var a=ct(e,s,t);if(a){if(i){if(i.value=r[t],i.value!==r[t])return void u(t,i.value);lt.d.add(i)}for(var c=o;c=n.paths[c];c=c.slice(0,8))n.fields[c]&&lt.d.add(n.fields[c]);return V(Ze,e,Object)[a]=!0,R(ft),!0}},u=function(t,i){return(p(i)||l(i))&&((Ye(i)||"").context!==e&&(i=dt(e,i)),n.paths[ut(i)]=o+"."+t),r[t]=i,i},a=function(e){delete r[e]},s=new Proxy(r,{set:function(e,t,r){return"string"!=typeof t||e[t]===r&&t in e||lt((function(){var a=e[t];if(l(e)){if("length"===t){for(var s=a-1;s>=r;s--)i(s);return e[t]=r,!0}}else{if(Ye(r)&&z("Cannot assign proxied data object"),l(r)&&l(a))return a.splice.apply(a,[0,a.length].concat(r)),!0;if(p(r)&&Ye(a)){for(var c in E(a,r))delete a[c];return m(a,r),!0}}u(t,r),i(t,n.fields[o+"."+t])})),!0},deleteProperty:function(e,t){return"string"==typeof t&&t in e&&lt((function(){a(t),i(t)})),!0}});return Ye(s,{context:e,uniqueId:o,set:u,delete:a}),h(t,(function(e,t){u(e,t)})),s}function pt(e){var t={initialValue:e,value:e,error:"",preset:{},onChange:function(e){t.props.onChange&&t.props.onChange(it(e))},setValue:function(e){e=d(e)?e(t.value):e,t.controlled?t.onChange(e):t.value=e},setError:function(e){t.error=d(e)?e(t.error):e,(t.form||{}).isValid=null},elementRef:function(e){t.element=e}};return T(t,!0),H(t,"value",e,(function(e,n){return(e=(t.preset.normalizeValue||a)(e,t.props))!==n&&Ye(n)?(t.dict[t.name]=e,n):e})),H(t,"error","",(function(e){return d(e)||c(e,nt)?function(e,t){return{toString:function(){return c(t,nt)?C([e.props,e.form||"",ht],(function(n){return(n.formatError||u).call(n,t,e.path||null,e.props,e.form)}))||t.message:t(e.props||{})}}}(t,e):e||""})),T(t,"value",(function(e){t.key?t.dict[t.name]=e:t.controlled||t.onChange(e)})),T(t,"error",(function(e){t.key&&Ge.emit("validationChange",t.form,{name:t.path,isValid:!e,message:String(e)})})),t}function vt(e,n,r,o,i,u,a,s){var c="error"in i,f=r.key||s;m(r,{form:e,props:i,preset:o,controlled:u,dict:a,key:s}),e&&s&&(r.name=s.slice(9),r.path=ct(e,a,r.name),f!==s&&(r.locks=[],c||(r.error="")),n.fields[s]=r),c&&(r.error=i.error),(0,t.useEffect)((function(){return e&&s&&(n.fields[s]=r),function(){n&&n.fields[s]===r&&(delete n.fields[s],r.props.clearWhenUnmount&&Ye(a).delete(s.slice(9)),n.setValid())}}),[n,r,s]),(0,t.useEffect)((function(){n&&n.setValid()}),[n,r.error,i.disabled,i.required])}function mt(e,t){var n=Ye(e),r=g(t,ot),o=function(t){var n=t.path,r=t.value;return Ge.emit("validate",e,{name:n,value:r})||((t.props||"").onValidate||u)(r,n,e)},i=t.map((function(e){var t=e.locks||(e.locks=[]),n=t[0];return n?t[1]||(t[1]=B(t[0],(function(){var r=o(e);return B(r,(function(){t[0]===n&&t.shift()})),r}))):(t[0]=q(o(e)),t[0])}));return K(i).then((function(e){return t.forEach((function(t,n){t.locks[0]===i[n]&&(t.locks.shift(),t.error=e[n]),e[n]=e[n]||r[n]})),n.setValid(),!S(e)}))}function ht(e,t,n){var r=this,o={},i=Ye(r,{fields:o,viewState:n,paths:{},initialData:e,setValid:H(this,"isValid",!0,(function(){return!S(o,(function(e){return!e.props.disabled&&(e.error||ot(e))}))}))});m(r,function(e){return"boolean"==typeof e&&(e={validateOnChange:e}),m({autoPersist:!0,preventLeave:!1,validateOnChange:!0},e)}(t)),r.ref=function(e){i.ref=e,e&&Qe.set(e,r)},r.isValid=!0,r.data=dt(r,n.get()||i.initialData)}function gt(e,n,r){if("string"!=typeof e)return gt("",e,n);var o=Se(e),i=(0,t.useState)((function(){return new ht(n,r,o)}))[0],a=ae();return ce(i,"isValid"),(0,t.useEffect)((function(){return P(i.on("dataChange",a),i.on("reset",a),(function(){(Ye(i).unlock||u)(),i.autoPersist&&(i.persist(),i.autoPersist=!0)}))}),[i]),i}function yt(e,n,r,o){"string"==typeof e&&(e=Xe[e]),d(e)||(o=r,r=n,n=e,e="");var i=e?V($e,e,e):{};o=o||i.valueProperty||"value";var u=(0,t.useContext)(et),s=u&&Ye(u).context,c=s&&Ye(s),f=n.name||"",l=s&&f&&ut(u)+"."+f,p=o in n,v=(0,t.useState)((function(){return pt(p?n[o]:(i.normalizeValue||a)(s&&f in u?u[f]:void 0!==r?r:i.defaultValue))}))[0];vt(s,c,v,i,n,p,u,l),p&&(v.value=n[o]),s&&l&&(f in u?p||(v.value=u[f]):v.value=Ye(u).set(f,v.initialValue));var m=(i.postHook||a)({form:s,key:l,path:v.path,value:v.value,error:String(v.error),setValue:v.setValue,setError:v.setError,elementRef:v.elementRef},n);return m.value=ce(v,"value"),m.error=String(ce(v,"error")),m}function bt(){var e=y(v(arguments),d);return function(t,n){return e.reduce((function(e,r){return e.then((function(e){return e||r(t,n)}))}),q())}}function St(e,t){d(t)&&(t={postHook:t}),Xe[e]=function(){return t}}lt.d=null,I(ht,{ERROR_FIELD:1,EMPTY_FIELD:2,get:function(e){return C($(e),Qe.get.bind(Qe))||null}}),j(ht,{element:function(e){return e?(st(this,e)||"").element:Ye(this).ref},focus:function(e){var t;return!!(t="number"==typeof e?g(Ye(this).fields,(function(t){return t.error&&1&e||rt(t.value)&&2&e?t.element:null})).sort(G)[0]:this.element(e))&&ee(t)},on:function(e,t){return Ge.add(this,e,t)},persist:function(){var e=this;Ye(e).viewState.set(e.toJSON()),e.autoPersist=!1},restore:function(){var e=Ye(this).viewState.get();return e&&this.reset(e),!!e},reset:function(e){var t=this,n=Ye(t),r=Ye(t.data);for(var o in t.data)r.delete(o);h(e||n.initialData,(function(e,t){r.set(e,t)})),h(n.fields,(function(e,n){var r=at(t,n.path);n.controlled?n.onChange(r.exists?r.value:n.initialValue):r.exists&&(n.value=r.value),n.error=null})),n.setValid(),(n.unlock||u)(),Ge.emit("reset",t)},getValue:function(e){return it(at(this,e).value)},setValue:function(e,t){var n=at(this,e);n.parent&&(n.parent[n.name]=it(t))},getError:function(e){return String((st(this,e)||"").error||"")},setError:function(e,t){(st(this,e)||{}).error=t},validate:function(){var e=this,t=Ye(e).fields,n=v(arguments);return n[0]?mt(e,y(t,(function(e){return S(n,(function(t){var n=t.length;return e.path.slice(0,n)===t&&(!e.path[n]||"."===e.path[n])}))}))):mt(e,y(t,(function(e){return!e.props.disabled})))},toJSON:function(){return m(!0,{},this.data)}});var Ct=(0,t.forwardRef)((function(e,n){var r=e.context;return m(r,x(e,["enterKeyHint","preventLeave","formatError"])),(0,t.createElement)(tt,{value:r.data},(0,t.createElement)("form",m(E(e,["context","enterKeyHint","preventLeave","formatError"]),{ref:Re(n,r.ref),onSubmit:function(t){e.action||t.preventDefault(),(e.onSubmit||u).call(this,t)},onReset:function(t){t.preventDefault(),r.reset(),(e.onReset||u).call(this,t)}})))}));function wt(e){return(0,t.createElement)(tt,{value:e.value.data},e.children)}function xt(e){return Et(m({},e,{defaultValue:[]}))}function Et(e){var n=(0,t.useContext)(et);Ye(n)||z("Missing form context");var r=(0,t.useRef)(),o=Ye(n).context,i=Ye(o),a=e.name,s=e.value;a?(s=p(n[a])||l(n[a])||e.defaultValue||{},s=Ye(n).set(a,s)):(Ye(s)||"").context||z("Value must be a data object or array");var c=i.paths[ut(s)];if("boolean"!=typeof(i.fields[c]||"").controlled){var f=r.current||(r.current=pt(s));vt(o,i,f,{},e,0,n,c),f.value=s}else(0,t.useEffect)(u,[null]),(0,t.useEffect)(u,[null]);var v=e.children;return d(v)&&(v=v(s)),(0,t.createElement)(tt,{value:s},v)}I(Et,{keyFor:ut});const Vt=e;n.react=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map