!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("zeta-dom")):"function"==typeof define&&define.amd?define("zeta-dom-react",["react","zeta-dom"],t):"object"==typeof exports?exports["zeta-dom-react"]=t(require("react"),require("zeta-dom")):e["zeta-dom-react"]=t(e.React,e.zeta)}(self,(function(e,t){return(()=>{"use strict";var n={359:t=>{t.exports=e},654:e=>{e.exports=t}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.d(i,{default:()=>M});var e={};r.r(e),r.d(e,{FormContext:()=>V,FormContextProvider:()=>R,classNames:()=>T,partial:()=>I,useAsync:()=>k,useDispose:()=>z,useFormContext:()=>D,useFormField:()=>N,useMemoizedFunction:()=>E,useObservableProperty:()=>j,useRefInitCallback:()=>F});var t=r(359),n=r(654),a=n.util,o=(a.noop,a.either,a.is,a.isUndefinedOrNull,a.isArray),u=a.isFunction,c=(a.isThenable,a.isPlainObject,a.isArrayLike,a.makeArray),s=a.extend,f=a.each,d=(a.map,a.grep),l=(a.splice,a.any),v=(a.single,a.kv),p=(a.pick,a.exclude,a.mapGet,a.mapRemove,a.arrRemove,a.setAdd),m=(a.equal,a.combineFn),h=(a.executeOnce,a.createPrivateStore),y=(a.setTimeoutOnce,a.setImmediate,a.setImmediateOnce,a.throwNotFunction,a.keys),g=a.values,C=(a.hasOwnProperty,a.getOwnPropertyDescriptors,a.define,a.definePrototype),b=(a.defineOwnProperty,a.defineGetterProperty,a.defineHiddenProperty,a.defineAliasProperty,a.defineObservableProperty,a.watch),O=(a.watchOnce,a.watchable,a.inherit,a.deepFreeze,a.iequal,a.randomId,a.repeat,a.camel,a.hyphenate,a.ucfirst,a.lcfirst,a.trim,a.matchWord,a.htmlDecode,a.resolve),x=(a.reject,a.always),P=a.resolveAll,S=(a.catchAsync,a.setPromiseTimeout,n.EventContainer),w=new WeakMap;function E(e){var n=(0,t.useState)((function(){return function e(){var t=w.get(e);return t&&t.apply(this,arguments)}}))[0];return w.set(n,e),n}function j(e,n){var a=(0,t.useState)(e[n]),r=a[0],i=a[1];return(0,t.useEffect)((function(){return b(e,n,(function(e){i((function(){return e}))}))}),[e,n]),r}function k(e,n){var a=(0,t.useState)((function(){return{loading:!0,refresh:function(){s(a,{loading:!0,error:void 0}),x(O().then(e),(function(e,t){a.disposed||s(a,e?{loading:!1,value:t}:{loading:!1,value:void 0,error:t})}))}}}))[0],r=o(n);return e=E(e),n=!1!==n,j(a,"loading"),(0,t.useEffect)((function(){return function(){a.disposed=!0}}),[a]),(0,t.useEffect)((function(){n&&a.refresh()}),[a,n].concat(r)),[a.value,a]}function F(e){var n=c(arguments),a=(0,t.useState)(new WeakSet)[0];return function(t){t&&p(a,t)&&(n[0]=t,e.apply(null,n))}}function z(){var e=(0,t.useState)((function(){var e=[function(){e.splice(0,e.length-1)}];return s(m(e),{push:e.splice.bind(e,-1,0)})}))[0];return(0,t.useEffect)((function(){return e}),[e]),e}var A=h(),q=(0,t.createContext)(null),R=q.Provider;function V(e,t){var n=this,a=A(n,{validateCallback:{},validateResult:{},validateOnChange:{},eventContainer:new S,initialData:e||{}});n.isValid=!0,n.validateOnChange=!1!==t,n.data=function(e,t,n){return new Proxy(s({},n),{get:function(e,t){if("string"==typeof t)return e[t]},set:function(n,a,r){return"string"==typeof a&&n[a]!==r&&(a in n&&t.emitAsync("dataChange",e,[a],{},(function(e,t){return e.concat(t)})),n[a]=r),!0}})}(n,a.eventContainer,e),n.on("dataChange",(function(e){n.validateOnChange&&n.validate.apply(n,d(e.data,(function(e){return!1!==a.validateOnChange[e]})))}))}function D(e,n){var a=(0,t.useState)((function(){return new V(e,n)}))[0],r=(0,t.useState)(0)[1];return(0,t.useEffect)((function(){return a.on("dataChange",(function(){r((function(e){return++e}))}))}),[a]),a}function N(e,n,a){var r=(0,t.useContext)(q),i=e.name||"",o=(0,t.useState)((function(){return r&&r.data[i]||n}))[0],u=(0,t.useState)(o),c=(0,t.useState)(""),f=E(e.onValidate),d=u[0],l=u[1],v=c[0],p=c[1],h=E((function(t){e.onChange?e.onChange("function"==typeof t?t(d):t):console.warn("onChange not supplied")}));return(a=a||"value")in e||(h=l,(e=s({},e))[a]=d),(0,t.useEffect)((function(){if(r&&i)return i in r.data&&l(r.data[i]),m(r.on("dataChange",(function(e){e.data.includes(i)&&l(r.data[i])})),r.on("validationChange",(function(e){e.name===i&&p(e.message)})),r.on("validate",(function(e){if(e.name===i)return f(e.value,e.name)})),r.on("reset",(function(){l(o),p("")})))}),[r,i,o,f]),(0,t.useEffect)((function(){r&&i&&(r.data[i]=d)}),[r,i,d]),(0,t.useEffect)((function(){r&&i&&(A(r).validateOnChange[i]=e.validateOnChange)}),[r,i,e.validateOnChange]),{value:e[a],error:e.error||v||"",setValue:h,setError:p}}function T(){var e=[];return function t(n){f(n,(function(n,a){if(a)if("string"==typeof a)e.push(a);else if("function"==typeof a.getClassNames)t(c(a.getClassNames()));else for(var r in a){var i=a[r];i&&e.push(!0===i?r:r+"-"+i)}}))}(c(arguments)),e.join(" ")}function I(e){return function(t,n){e((function(e){return"string"==typeof t&&(t=v(t,u(n)?n(e[t],e):n)),s({},e,t)}))}}C(V,{on:function(e,t){return A(this).eventContainer.add(this,e,t)},reset:function(){var e=this,t=A(e);for(var n in e.data)delete e.data[n];s(e.data,t.initialData),e.isValid=!0,t.eventContainer.emit("reset",e)},validate:function(){var e=this,t=A(e),n=t.validateResult,a=t.eventContainer,r=c(arguments);r.length||(r=y(t.validateCallback));var i=s({},n),o=P(r.map((function(t){return a.emit("validate",e,{name:t,value:e.data[t]})})));return o.then((function(t){return r.forEach((function(r,o){n[r]=t[o],(t[o]||"")!==(i[r]||"")&&a.emit("validationChange",e,{name:r,isValid:!!t[o],message:t[o]||""})})),e.isValid=!l(g(n),(function(e){return e})),!l(t,(function(e){return e}))}))}});const M=e})(),i=i.default})()}));
//# sourceMappingURL=zeta-dom-react.min.js.map